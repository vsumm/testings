var quform=function(e,t,r,s){"use strict";var o=e.core,a=o.cache,n=!1,i=null,u=[],f={init:function(){a.get("#qfb-save-entry").add(a.get("#qfb-fixed-save-button")).click(function(){f.saveEntry()}),a.get("#qfb-entry-form").on("click",".qfb-edit-file-upload-remove",function(){var e=t(this).closest(".qfb-edit-file-upload"),r=e.data("quform-upload-uid");r&&u.push(r),e.qfbSlideHide()}),t(document).on("click",function(e){var r;e&&e.target&&e.ctrlKey&&((r=t(e.target)).is(".quform-field-radio:checked")&&r.prop("checked",!1))}),t.fn.select2&&a.get("#qfb_entry_edit_created_by").select2({theme:"qfb",language:{searching:function(){return r.searchingDots},noResults:function(){return r.noResultsFound},inputTooShort:function(e){return r.inputTooShort.replace("%s",e.minimum-e.input.length)},errorLoading:function(){return r.errorLoading},removeAllItems:function(){return r.removeAllItems}},minimumInputLength:1,placeholder:s.none,allowClear:!0,ajax:{url:r.ajaxUrl,dataType:"json",delay:250,data:function(e){return{action:"quform_entries_search_users",_ajax_nonce:s.searchUsersNonce,search:e.term}},processResults:function(e){return{results:e&&"success"===e.type?e.results:[]}}}})},saveEntry:function(){n||(n=!0,"number"==typeof i&&(clearTimeout(i),i=null),a.get("#qfb-fixed-save-button").removeClass("qfb-saving qfb-saved qfb-save-error").addClass("qfb-saving"),a.get("#qfb-entry-form").ajaxSubmit({type:"POST",dataType:"json",data:{quform_removed_upload_uids:u.join(",")},iframe:!0,iframeSrc:"about:blank",url:"",success:function(e){switch((e=o.sanitizeResponse(e)).type){case"success":f.responseSuccess(e);break;case"error":f.responseError(e);break;case"invalid":f.responseInvalid(e)}}}))},allowResubmission:function(){t(".qfb-has-validation-error").removeClass("qfb-has-validation-error"),t(".qfb-validation-error").remove(),n=!1},responseSuccess:function(e){f.allowResubmission(),u=[],o.showFixedMessage(e.message,"success"),a.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-saved"),i=setTimeout(function(){a.get("#qfb-fixed-save-button").removeClass("qfb-saved")},2e3)},responseError:function(e){var n=null;f.allowResubmission(),a.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-save-error"),i=setTimeout(function(){a.get("#qfb-fixed-save-button").removeClass("qfb-save-error")},2e3),o.isNonEmptyString(e.message)&&o.showFixedMessage(e.message,"error"),t.each(e.errors,function(e,r){var s=t(".qfb-edit-element-"+e);s.length&&(f.addElementError(e,r),n=n||s)}),t(".qfb-validation-error").qfbSlideShow(),n&&o.scrollTo(n)},addElementError:function(e,r){var s=t('<div class="qfb-validation-error qfb-cf">');return t('<div class="qfb-validation-error-inner">').appendTo(s).append(t('<span class="qfb-validation-error-text">').html(r)),t(".qfb-edit-element-"+e).addClass("qfb-has-validation-error"),t(".qfb-edit-input-"+e).after(s),s},responseInvalid:function(e){f.allowResubmission(),o.showFixedMessage(e.message,"error"),a.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-save-error"),i=setTimeout(function(){a.get("#qfb-fixed-save-button").removeClass("qfb-save-error")},2e3)}};return t(f.init),e.entries=e.entries||{},e.entries.edit=f,e}(quform,jQuery,quformCoreL10n,quformEntriesEditL10n);