var quformInsertForm=function(c){"use strict";var d,r=c(document),a={activatedFancybox:!1,init:function(o){d=c(o).data("l10n"),a.loadPopup()},loadPopup:function(){c.ajax({url:d.ajaxUrl+"?action=quform_insert_form",dataType:"html"}).done(function(o){var e=c(o),t=function(){e.remove(),c("body").css("overflow","").removeClass("qfb-popup-open"),r.off("keydown.quform-close-popup")};e.on("change","#qfb-insert-form-id",a.updateShortcodePreview),e.on("click","#qfb-insert-form-popup, #qfb-insert-form-show-title, #qfb-insert-form-show-description",a.updateShortcodePreview),e.on("keyup blur","#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options",a.updateShortcodePreview),e.on("click","#qfb-insert-form-preview",function(){c(this).focus().select()}),e.on("click",".qfb-insert-form-go",function(){var o=a.generateShortcode();return o?window.send_to_editor?(window.send_to_editor(o),t()):alert(d.couldNotSendToEditor):alert(d.selectForm),!1}),e.on("click",".qfb-insert-form-cancel, .qfb-insert-form-overlay",t),e.on("click","#qfb-insert-form-popup",function(){c("#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options").closest(".qfb-sub-setting")[c(this).is(":checked")?"slideDown":"slideUp"]()}),c("body").css("overflow","hidden").addClass("qfb-popup-open"),e.appendTo(c("body")).show(),r.on("keydown.quform-close-popup",function(o){27==o.keyCode&&t()}),e.find(".qfb-popup-overlay").click(t),c("#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options").closest(".qfb-sub-setting").hide()})},generateShortcode:function(){var o,e,t,r,n,i,f=c("#qfb-insert-form-id").val(),s="";return f&&(o=c("#qfb-insert-form-id option:selected").text(),e=c("#qfb-insert-form-popup").is(":checked"),t="",c("#qfb-insert-form-show-title").is(":checked")||(t+=' show_title="0"'),c("#qfb-insert-form-show-description").is(":checked")||(t+=' show_description="0"'),e?(r=c("#qfb-insert-form-content").val(),n=c("#qfb-insert-form-width").val(),i=c("#qfb-insert-form-options").val(),n.length&&(t+=' width="'+n+'"'),i.length&&(t+=" options='"+i+"'"),s='[quform_popup id="'+f+'" name="'+o+'"'+t+"]"+r+"[/quform_popup]",a.activatedFancybox||(a.activatedFancybox=!0,c.ajax({url:d.ajaxUrl,type:"POST",dataType:"json",data:{action:"quform_set_popup_enabled"}}))):s='[quform id="'+f+'" name="'+o+'"'+t+"]"),s},updateShortcodePreview:function(){var o=a.generateShortcode(),e=c("#qfb-insert-form-preview");o?e.val(o).parent().show():e.val("").parent().hide()}};return a}(jQuery);