var quform=function(o,r,t,e){"use strict";var i=o.core,n=i.cache,a=r(document),m=!1,s={init:function(){n.get("#qfb-import-form-button").click(s["import"]),a.on("heartbeat-tick",function(o,r){r&&r.nonces_expired&&r.quformImportFormNonce&&t.importFormNonce!==r.quformImportFormNonce&&(t.importFormNonce=r.quformImportFormNonce)})},validate:function(){if(n.get(".qfb-tools-import-form").find(".qfb-validation-error").remove(),""!==n.get("#qfb-import-form-data").val())return!0;var o=n.get("#qfb-import-form-data").closest(i.settingWrap);return i.addValidationError(o,e.thisFieldIsRequired),i.scrollTo(o),!1},"import":function(){if(!m){if(!s.validate())return!1;m=!0,n.get("#qfb-import-form-loading").show().animate({maxWidth:"43px"}),r.ajax({type:"POST",url:e.ajaxUrl,data:{action:"quform_import_form",_ajax_nonce:t.importFormNonce,config:n.get("#qfb-import-form-data").val()},dataType:"json"}).done(function(o){o=i.sanitizeResponse(o),n.get(".qfb-tools-import-form").find(".qfb-validation-error").remove(),m=!1,"success"==o.type?s.onImportSuccess(o.message):"error"!=o.type&&"invalid"!=o.type||s.onImportFail(o)}).fail(function(){s.onImportFail({message:e.ajaxError})}).always(function(){m=!1,n.get("#qfb-import-form-loading").css({maxWidth:0}).hide()})}},onImportSuccess:function(o){i.showFixedMessage(o,"success",0)},onImportFail:function(o){var e;i.isNonEmptyString(o.message)&&i.showFixedMessage(t.errorImportingForm+"<br>"+o.message,"error"),o.errors&&r.each(o.errors,function(o,r){var t=n.get("#"+o).closest(i.settingWrap);e=e||t,i.addValidationError(t,r)}),e&&i.scrollTo(e)}};return r(s.init),o.tools=o.tools||{},o.tools.importForm=s,o}(quform,jQuery,quformToolsImportFormL10n,quformCoreL10n);