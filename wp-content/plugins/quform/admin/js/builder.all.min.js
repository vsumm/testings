var quform=function(e,n,c,r){"use strict";var f=e.core,a=e.builder,g=f.cache,b={editing:null,init:function(){n("#qfb-add-confirmation").on("click",function(){b.showSettings()}),g.get("#qfb-confirmations").on("click",".qfb-confirmation-action-toggle",function(){var e=n(this).closest(".qfb-confirmation"),t=b.getConfirmationById(e.data("id"));t&&1!=t.id&&(t.enabled=e.find(".qfb-confirmation-toggle").is(":checked"))}),g.get("#qfb-confirmations").on("click",".qfb-confirmation-action-settings",function(){b.showSettings(n(this).closest(".qfb-confirmation").data("id"))}),g.get("#qfb-confirmations").on("click",".qfb-confirmation-action-duplicate",function(){b.duplicate(n(this).closest(".qfb-confirmation").data("id"))}),g.get("#qfb-confirmations").on("click",".qfb-confirmation-action-remove",function(){var i=n(this).closest(".qfb-confirmation");1!=i.data("id")?confirm(c.confirmationConfirmRemove)&&i.qfbSlideHide(function(){for(var e=i.data("id"),t=a.form.confirmations.length;t--;)a.form.confirmations[t].id==e&&a.form.confirmations.splice(t,1);i.remove()}):alert(c.cannotRemoveDefaultConfirmation)}),g.get("#qfb-confirmation-settings").on("click",".qfb-popup-save-button",function(){b.saveSettings()&&b.hideSettings()}),g.get("#qfb-confirmation-settings").on("click",".qfb-popup-close-button",b.hideSettings),g.get("#qfb_confirmation_type").change(function(){var e=g.get("#qfb_confirmation_type").val();g.get("#qfb_confirmation_message").add(g.get("#qfb_confirmation_message_auto_format")).add(g.get("#qfb_confirmation_message_icon")).add(g.get("#qfb_confirmation_message_position")).add(g.get("#qfb_confirmation_message_timeout")).add(g.get("#qfb_confirmation_hide_form")).closest(f.settingWrap)["message"==e||"message-redirect-page"==e||"message-redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_confirmation_redirect_page").closest(f.settingWrap)["message-redirect-page"==e||"redirect-page"==e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_confirmation_redirect_url").closest(f.settingWrap)["message-redirect-url"==e||"redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_confirmation_redirect_query").closest(f.settingWrap)["message-redirect-page"==e||"message-redirect-url"==e||"redirect-page"==e||"redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_confirmation_redirect_delay").closest(f.settingWrap)["message-redirect-page"==e||"message-redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_notification_reset_form").closest(f.settingWrap)["message"==e?"qfbSlideShow":"qfbSlideHide"]()}),n("#qfb-add-confirmation-logic-rule").click(function(){g.get("#qfb-confirmation-logic").find(".qfb-no-logic-rules").remove(),g.get("#qfb-confirmation-logic").find(".qfb-logic-rules").append(a.logic.buildLogicRule(a.logic.getNewLogicRule()))}),n.fn.select2&&g.get("#qfb_confirmation_redirect_page").select2({theme:"qfb",language:{searching:function(){return r.searchingDots},noResults:function(){return r.noResultsFound},inputTooShort:function(e){return r.inputTooShort.replace("%s",e.minimum-e.input.length)},errorLoading:function(){return r.errorLoading},removeAllItems:function(){return r.removeAllItems}},minimumInputLength:1,placeholder:c.pleaseSelect,allowClear:!0,ajax:{url:c.ajaxUrl,dataType:"json",delay:250,data:function(e){return{action:"quform_builder_search_posts",_ajax_nonce:c.searchPostsNonce,search:e.term}},processResults:function(e){return{results:e&&"success"===e.type?e.results:[]}}}}),a.setupContainerTooltips(g.get("#qfb-confirmation-settings-inner"))},showSettings:function(e){var t=b.getConfirmationById(e);null===t&&(t=n.extend(!0,{},c.confirmation)),b.editing=t,b.loadSettings(),n("body").css({overflow:"hidden"}).addClass("qfb-popup-open"),g.get("#qfb-confirmation-settings").show(),g.get("#qfb-confirmation-settings-inner").scrollTop(0)},loadSettings:function(){var e,t=b.editing;g.get("#qfb-confirmation-settings").find(".qfb-setting").hide(),g.get("#qfb_confirmation_name").val(b.getValue(t,"name")).closest(f.settingWrap).show(),g.get("#qfb_confirmation_enabled").prop("checked",b.getValue(t,"enabled")),f.setSelectVal(g.get("#qfb_confirmation_type"),b.getValue(t,"type")).closest(f.settingWrap).show(),g.get("#qfb_confirmation_message").val(b.getValue(t,"message")),window.tinymce&&((e=window.tinymce.get("qfb_confirmation_message"))&&!e.isHidden()&&(e.load(),e.iframeElement&&n(e.iframeElement).height()<100&&e.theme&&e.theme.resizeTo&&e.theme.resizeTo(null,300)),window.switchEditors&&window.getUserSetting&&window.switchEditors.go("qfb_confirmation_message",window.getUserSetting("editor")||"tmce")),g.get("#qfb_confirmation_message_auto_format").prop("checked",b.getValue(t,"messageAutoFormat")),a.loadIconOption(g.get("#qfb_confirmation_message_icon"),b.getValue(t,"messageIcon")),f.setSelectVal(g.get("#qfb_confirmation_message_position"),b.getValue(t,"messagePosition")),g.get("#qfb_confirmation_message_timeout").val(b.getValue(t,"messageTimeout")),g.get("#qfb_confirmation_redirect_page").empty().append(n("<option>",{text:c.pleaseSelect,value:""}));var i,o=b.getValue(t,"redirectPage");o&&n.isNumeric(o)?(i=n("<option>",{text:c.loadingDots,value:o}),n.ajax({type:"GET",url:c.ajaxUrl,dataType:"json",data:{action:"quform_builder_get_post_title",_ajax_nonce:c.getPostTitleNonce,id:o}}).done(function(e){"success"===(e=f.sanitizeResponse(e)).type?b.updateRedirectPageTitle(i,o,e.title):b.updateRedirectPageTitle(i,o,c.errorLoadingPageTitle.replace("%s",o))}).fail(function(){b.updateRedirectPageTitle(i,o,c.errorLoadingPageTitle.replace("%s",o))}),g.get("#qfb_confirmation_redirect_page").append(i)):o="",f.setSelectVal(g.get("#qfb_confirmation_redirect_page"),o).trigger("change"),g.get("#qfb_confirmation_redirect_url").val(b.getValue(t,"redirectUrl")),g.get("#qfb_confirmation_redirect_query").val(b.getValue(t,"redirectQuery")),g.get("#qfb_confirmation_redirect_delay").val(b.getValue(t,"redirectDelay")),1!==t.id&&(g.get("#qfb_confirmation_enabled").closest(f.settingWrap).show(),a.logic.buildLogic([],[{text:c.useThisConfirmationIfAll,value:"all"},{text:c.useThisConfirmationIfAny,value:"any"}],b.getValue(t,"logicRules"),g.get("#qfb-confirmation-logic"),"",b.getValue(t,"logicMatch")),g.get("#qfb-confirmation-logic").closest(f.settingWrap).show()),g.get("#qfb_confirmation_hide_form").prop("checked",b.getValue(t,"hideForm")),f.setSelectVal(g.get("#qfb_notification_reset_form"),b.getValue(t,"resetForm")),"undefined"!=typeof t.id?g.get("#qfb-confirmation-unique-id").val(a.form.id+"_"+t.id).closest(f.settingWrap).show():g.get("#qfb-confirmation-unique-id").val(""),"message"!=t.type&&"message-redirect-page"!=t.type&&"message-redirect-url"!=t.type||g.get("#qfb_confirmation_message").add(g.get("#qfb_confirmation_message_auto_format")).add(g.get("#qfb_confirmation_message_icon")).add(g.get("#qfb_confirmation_message_position")).add(g.get("#qfb_confirmation_message_timeout")).add(g.get("#qfb_confirmation_hide_form")).closest(f.settingWrap).show(),"message-redirect-page"!=t.type&&"redirect-page"!=t.type||g.get("#qfb_confirmation_redirect_page").closest(f.settingWrap).show(),"message-redirect-url"!=t.type&&"redirect-url"!=t.type||g.get("#qfb_confirmation_redirect_url").closest(f.settingWrap).show(),"message-redirect-page"!=t.type&&"message-redirect-url"!=t.type&&"redirect-page"!=t.type&&"redirect-url"!=t.type||g.get("#qfb_confirmation_redirect_query").closest(f.settingWrap).show(),"message-redirect-page"!=t.type&&"message-redirect-url"!=t.type||g.get("#qfb_confirmation_redirect_delay").closest(f.settingWrap).show(),"message"==t.type&&g.get("#qfb_notification_reset_form").closest(f.settingWrap).show()},updateRedirectPageTitle:function(e,t,i){e.remove(),g.get("#qfb_confirmation_redirect_page").append(n("<option>",{text:i,value:t})),f.setSelectVal(g.get("#qfb_confirmation_redirect_page"),t).trigger("change")},updateConfirmationListing:function(e,t){e.find(".qfb-confirmation-name").text(t.name),b.setConfirmationDescription(e,t),e.find(".qfb-confirmation-toggle").prop("checked",t.enabled)},setConfirmationDescription:function(e,t){var i=n('<div class="qfb-settings-row">'),o=n('<div class="qfb-settings-column">').appendTo(i);switch(t.type){case"message":o.append(n('<i class="mdi mdi-message">').attr("title",c.displayAMessage),n('<span class="qfb-confirmation-description-message">').text(n("<div>").html(t.message).text().substr(0,64)));break;case"message-redirect-page":i.addClass("qfb-settings-row-2"),o.append(n('<i class="mdi mdi-message">').attr("title",c.displayAMessage),n('<span class="qfb-confirmation-description-message">').text(n("<div>").html(t.message).text().substr(0,64))),i.append(n('<div class="qfb-settings-column">').append(n('<i class="mdi mdi-arrow_forward">').attr("title",c.redirectTo),b.getRedirectPageTitle(n('<span class="qfb-confirmation-description-redirect-page">'),t.redirectPage)));break;case"message-redirect-url":i.addClass("qfb-settings-row-2"),o.append(n('<i class="mdi mdi-message">').attr("title",c.displayAMessage),n('<span class="qfb-confirmation-description-message">').text(n("<div>").html(t.message).text().substr(0,64))),i.append(n('<div class="qfb-settings-column">').append(n('<i class="mdi mdi-arrow_forward">').attr("title",c.redirectTo),n('<span class="qfb-confirmation-description-redirect-url">').text(t.redirectUrl)));break;case"redirect-page":o.append(n('<i class="mdi mdi-arrow_forward">').attr("title",c.redirectTo),b.getRedirectPageTitle(n('<span class="qfb-confirmation-description-redirect-page">'),t.redirectPage));break;case"redirect-url":o.append(n('<i class="mdi mdi-arrow_forward">').attr("title",c.redirectTo),n('<span class="qfb-confirmation-description-redirect-url">').text(t.redirectUrl));break;case"reload":o.append(n('<i class="mdi mdi-refresh">').attr("title",c.reloadThePage))}e.find(".qfb-confirmation-description").html(i)},getRedirectPageTitle:function(t,i){return t.html(n('<i class="qfb-icon qfb-icon-spinner qfb-icon-spin">')),n.ajax({type:"GET",url:c.ajaxUrl,dataType:"json",data:{action:"quform_builder_get_post_title",_ajax_nonce:c.getPostTitleNonce,id:i}}).done(function(e){"success"===(e=f.sanitizeResponse(e)).type?t.text(e.title):t.text(c.errorLoadingPageTitle.replace("%s",i))}).fail(function(){t.text(c.errorLoadingPageTitle.replace("%s",i))}),t},getPostTitle:function(e){return""},getConfirmationMessageHtml:function(){var e;return!window.tinymce||(e=window.tinymce.get("qfb_confirmation_message"))&&!e.isHidden()&&e.isDirty()&&e.save(),g.get("#qfb_confirmation_message").val()},saveSettings:function(){if(!b.validateSettings())return!1;var e,t=b.editing;return t.name=g.get("#qfb_confirmation_name").val(),t.enabled=g.get("#qfb_confirmation_enabled").is(":checked"),t.type=g.get("#qfb_confirmation_type").val(),t.message=b.getConfirmationMessageHtml(),t.messageAutoFormat=g.get("#qfb_confirmation_message_auto_format").is(":checked"),t.messageIcon=g.get("#qfb_confirmation_message_icon").val(),t.messagePosition=g.get("#qfb_confirmation_message_position").val(),t.messageTimeout=g.get("#qfb_confirmation_message_timeout").val(),t.redirectPage=g.get("#qfb_confirmation_redirect_page").val(),t.redirectUrl=g.get("#qfb_confirmation_redirect_url").val(),t.redirectQuery=g.get("#qfb_confirmation_redirect_query").val(),t.redirectDelay=g.get("#qfb_confirmation_redirect_delay").val(),1!==t.id&&(t.logicAction=!0,t.logicMatch=g.get("#qfb-confirmation-logic").find(".qfb-logic-match").val(),t.logicRules=a.logic.getLogicRules(g.get("#qfb-confirmation-logic"))),t.hideForm=g.get("#qfb_confirmation_hide_form").is(":checked"),t.resetForm=g.get("#qfb_notification_reset_form").val(),"undefined"==typeof t.id?(t.id=a.form.nextConfirmationId++,a.form.confirmations.push(t),(e=n(c.confirmationHtml)).data({id:t.id}),g.get("#qfb-confirmations").append(e.hide()),e.qfbSlideShow()):e=g.get("#qfb-confirmations").find(".qfb-confirmation").filter(function(){return n(this).data("id")===t.id}),b.updateConfirmationListing(e,t),!0},hideSettings:function(){b.editing=null,n(".qtip").hide(),n("body").css({overflow:""}).removeClass("qfb-popup-open"),g.get("#qfb-confirmation-settings-inner").find(".qfb-validation-error").remove(),g.get("#qfb-confirmation-settings").hide()},validateSettings:function(){g.get("#qfb-confirmation-settings-inner").find(".qfb-validation-error").remove();var e=b.editing,t=[];f.isNonEmptyString(g.get("#qfb_confirmation_name").val())||t.push({scrollTarget:g.get("#qfb_confirmation_name").closest(f.settingWrap),show:function(){f.addValidationError(g.get("#qfb_confirmation_name").closest(f.settingInputWrap),r.thisFieldIsRequired)}});var i,o,a=g.get("#qfb_confirmation_type").val();"message"!=a&&"message-redirect-page"!=a&&"message-redirect-url"!=a||(f.isNonEmptyString(b.getConfirmationMessageHtml())||t.push({scrollTarget:g.get("#qfb_confirmation_message").closest(f.settingWrap),show:function(){f.addValidationError(g.get("#qfb_confirmation_message").closest(f.settingInputWrap),r.thisFieldIsRequired)}}),i=g.get("#qfb_confirmation_message_timeout").val(),f.isNonEmptyString(i)&&n.isNumeric(i)&&!(i<0)||t.push({scrollTarget:g.get("#qfb_confirmation_message_timeout").closest(f.settingWrap),show:function(){f.addValidationError(g.get("#qfb_confirmation_message_timeout").closest(f.settingInputWrap),c.thisFieldMustBePositiveNumberOrZero)}})),"message-redirect-page"!=a&&"message-redirect-url"!=a||(o=g.get("#qfb_confirmation_redirect_delay").val(),f.isNonEmptyString(o)&&n.isNumeric(o)&&!(o<0)||t.push({scrollTarget:g.get("#qfb_confirmation_redirect_delay").closest(f.settingWrap),show:function(){f.addValidationError(g.get("#qfb_confirmation_redirect_delay").closest(f.settingInputWrap),c.thisFieldMustBePositiveNumberOrZero)}})),"redirect-page"!=a&&"message-redirect-page"!=a||f.isNonEmptyString(g.get("#qfb_confirmation_redirect_page").val())||t.push({scrollTarget:g.get("#qfb_confirmation_redirect_page").closest(f.settingWrap),show:function(){f.addValidationError(g.get("#qfb_confirmation_redirect_page").closest(f.settingInputWrap),r.thisFieldIsRequired)}}),"redirect-url"!=a&&"message-redirect-url"!=a||f.isNonEmptyString(g.get("#qfb_confirmation_redirect_url").val())||t.push({scrollTarget:g.get("#qfb_confirmation_redirect_url").closest(f.settingWrap),show:function(){f.addValidationError(g.get("#qfb_confirmation_redirect_url").closest(f.settingInputWrap),r.thisFieldIsRequired)}}),1===e.id||g.get("#qfb-confirmation-logic").find(".qfb-logic-rule").length||t.push({scrollTarget:g.get("#qfb-confirmation-logic").closest(f.settingWrap),show:function(){f.addValidationError(g.get("#qfb-confirmation-logic").closest(f.settingInputWrap),c.atLeastOneLogicRuleRequired)}});var l=0,s=t.length;if(0<s){for(;l<s;l++)t[l].show();f.scrollTo(t[0].scrollTarget,g.get("#qfb-confirmation-settings-inner"))}return 0===s},duplicate:function(e){var t,i,o=b.getConfirmationById(e);null!==o&&(t=n.extend(!0,{},o,{id:a.form.nextConfirmationId++}),a.form.confirmations.push(t),(i=n(c.confirmationHtml)).data({id:t.id}),b.updateConfirmationListing(i,t),g.get("#qfb-confirmations").append(i.hide()),i.qfbSlideShow())},getConfirmationById:function(e){if(!e)return null;for(var t=0;t<a.form.confirmations.length;t++)if(e==a.form.confirmations[t].id)return a.form.confirmations[t];return null},checkInvalidLogic:function(){for(var e=0;e<a.form.confirmations.length;e++)a.form.confirmations[e].logicRules=a.logic.removeInvalidLogicRules(a.form.confirmations[e].logicRules)},getValue:function(e,t){return f.getProperty(e,t,f.getProperty(c.confirmation,t))}};return e.builder.confirmations=b,e}(quform=function(e,r,f,l){"use strict";var g=e.core,b=e.builder,d=g.cache,_={editing:null,attachmentSources:[],init:function(){r("#qfb-add-notification").on("click",function(){_.showSettings()}),d.get("#qfb-notifications").on("click",".qfb-notification-action-toggle",function(){var e=r(this).closest(".qfb-notification"),t=_.getNotificationById(e.data("id"));t&&(t.enabled=e.find(".qfb-notification-toggle").is(":checked"))}),d.get("#qfb-notifications").on("click",".qfb-notification-action-settings",function(){_.showSettings(r(this).closest(".qfb-notification").data("id"))}),d.get("#qfb-notifications").on("click",".qfb-notification-action-duplicate",function(){_.duplicate(r(this).closest(".qfb-notification").data("id"))}),d.get("#qfb-notifications").on("click",".qfb-notification-action-remove",function(){var i;confirm(f.notificationConfirmRemove)&&(i=r(this).closest(".qfb-notification")).qfbSlideHide(function(){for(var e=i.data("id"),t=b.form.notifications.length;t--;)b.form.notifications[t].id==e&&b.form.notifications.splice(t,1);i.remove(),0===d.get("#qfb-notifications").find(".qfb-notification").length&&r("#qfb-no-notifications").qfbSlideShow()})}),d.get("#qfb-notification-settings").on("click",".qfb-popup-save-button",function(){_.saveSettings()&&_.hideSettings()}),d.get("#qfb-notification-settings").on("click",".qfb-popup-close-button",_.hideSettings),d.get("#qfb_notification_format").change(function(){var e=d.get("#qfb_notification_format").val();d.get("#qfb_notification_html").closest(g.settingWrap)["html"===e||"multipart"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_notification_auto_format").closest(g.settingWrap)["html"===e||"multipart"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_notification_padding").closest(g.settingWrap)["html"===e||"multipart"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_notification_rtl").closest(g.settingWrap)["html"===e||"multipart"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_notification_text").closest(g.settingWrap)["text"===e||"multipart"===e?"qfbSlideShow":"qfbSlideHide"]()}),r("#qfb-add-recipient").click(function(){d.get("#qfb-notification-recipients").append(_.getRecipientHtml()).find("> .qfb-validation-error").remove()}),d.get("#qfb-notification-settings").on("click",".qfb-recipient .qfb-small-remove-button",function(){_.deleteRecipient(r(this))}),d.get("#qfb-notification-settings").on("click",".qfb-recipient .qfb-small-add-button",function(){r(this).closest(".qfb-recipient").after(_.getRecipientHtml())}),r("#qfb_notification_logic_enabled").click(function(){d.get("#qfb-notification-logic").closest(g.settingWrap)[r(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),r("#qfb-add-notification-logic-rule").click(function(){d.get("#qfb-notification-logic").find(".qfb-no-logic-rules").remove(),d.get("#qfb-notification-logic").find(".qfb-logic-rules").append(b.logic.buildLogicRule(b.logic.getNewLogicRule()))}),r("#qfb_notification_conditionals").click(function(){d.get("#qfb-notification-conditionals-wrap").closest(g.settingWrap)[r(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),r("#qfb-add-conditional").click(function(){d.get("#qfb-notification-conditionals-wrap").find(".qfb-no-conditionals").remove(),d.get("#qfb-notification-conditionals-wrap").append(_.buildConditional(_.getNewConditional()))}),d.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-duplicate",function(){_.duplicateConditional(r(this).closest(".qfb-conditional"))}),d.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-delete",function(){confirm(f.areYouSure)&&(r(this).closest(".qfb-conditional").remove(),0===d.get("#qfb-notification-conditionals-wrap").find(".qfb-conditional").length&&b.buildMessageBox(f.noConditionals,"info","qfb-no-conditionals").hide().appendTo(d.get("#qfb-notification-conditionals-wrap")).fadeIn())}),d.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-add-recipient",function(){r(this).closest(".qfb-conditional").find(".qfb-conditional-recipients").append(_.getRecipientHtml()).find("> .qfb-validation-error").remove()}),d.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-add-logic-rule",function(){r(this).closest(".qfb-conditional").find(".qfb-no-logic-rules").remove(),r(this).closest(".qfb-conditional").find(".qfb-logic-rules").append(b.logic.buildLogicRule(b.logic.getNewLogicRule()))}),r("#qfb-add-notification-attachment").click(function(){d.get("#qfb-notification-attachments-wrap").find(".qfb-no-attachments").remove(),_.addAttachment(_.getNewAttachment())}),d.get("#qfb-notification-attachments-wrap").on("click",".qfb-attachment-remove",function(){r(this).closest(".qfb-attachment").remove(),0===d.get("#qfb-notification-attachments-wrap").find(".qfb-attachment").length&&b.buildMessageBox(f.noAttachments,"info","qfb-no-attachments").hide().appendTo(d.get("#qfb-notification-attachments-wrap")).fadeIn()}),d.get("#qfb-notification-attachments-wrap").on("change",".qfb-attachment-source",function(){var e=r(this),t=e.closest(".qfb-attachment"),i=t.find(".qfb-attachment-element").closest(g.subSettingWrap),o=t.find(".qfb-attachment-browse").closest(g.subSettingWrap);switch(e.val()){default:case"media":o.qfbSlideShow(),i.qfbSlideHide();break;case"element":o.qfbSlideHide(),i.qfbSlideShow()}}),d.get("#qfb-notification-attachments-wrap").on("click",".qfb-attachment-medium-remove",function(){r(this).closest(".qfb-attachment-medium").remove()}),b.setupContainerTooltips(d.get("#qfb-notification-settings-inner"))},showSettings:function(e){var t=_.getNotificationById(e);null===t&&(t=r.extend(!0,{},f.notification)),_.editing=t,_.loadSettings(),r("body").css({overflow:"hidden"}).addClass("qfb-popup-open"),d.get("#qfb-notification-settings").show(),d.get("#qfb-notification-settings-inner").scrollTop(0)},loadSettings:function(){var e,t=_.editing;d.get("#qfb-notification-settings").find(".qfb-setting").hide(),d.get("#qfb_notification_name").val(_.getValue(t,"name")).closest(g.settingWrap).show(),d.get("#qfb_notification_enabled").prop("checked",_.getValue(t,"enabled")).closest(g.settingWrap).show(),d.get("#qfb_notification_subject").val(_.getValue(t,"subject")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_notification_format"),_.getValue(t,"format")).closest(g.settingWrap).show(),d.get("#qfb_notification_html").val(_.getValue(t,"html")),d.get("#qfb_notification_auto_format").prop("checked",_.getValue(t,"autoFormat")),d.get("#qfb_notification_padding").val(_.getValue(t,"padding")),d.get("#qfb_notification_rtl").val(_.getValue(t,"rtl")),d.get("#qfb_notification_text").val(_.getValue(t,"text")),window.tinymce&&((e=window.tinymce.get("qfb_notification_html"))&&!e.isHidden()&&(e.load(),e.iframeElement&&r(e.iframeElement).height()<100&&e.theme&&e.theme.resizeTo&&e.theme.resizeTo(null,300)),window.switchEditors&&window.getUserSetting&&window.switchEditors.go("qfb_notification_html",window.getUserSetting("editor")||"tmce"));for(var i=d.get("#qfb-notification-recipients").empty(),o=_.getValue(t,"recipients"),a=0,l=o.length;a<l;a++)i.append(_.getRecipientHtml(o[a]));i.closest(g.settingWrap).show(),r("#qfb_notification_conditionals").prop("checked",_.getValue(t,"conditional")).closest(g.settingWrap).show(),d.get("#qfb-notification-conditionals-wrap").empty(),_.buildConditionals(_.getValue(t,"conditionals")),d.get("#qfb-notification-from").find(".qfb-recipient-address").val(_.getValue(t,"from.address")).closest(g.settingWrap).show(),d.get("#qfb-notification-from").find(".qfb-recipient-name").val(_.getValue(t,"from.name")),d.get("#qfb_notification_logic_enabled").prop("checked",_.getValue(t,"logicEnabled")).closest(g.settingWrap).show(),b.logic.buildLogic([{text:f.sendThisNotification,value:"1"},{text:f.doNotSendThisNotification,value:"0"}],[{text:f.ifAllOfTheseRulesMatch,value:"all"},{text:f.ifAnyOfTheseRulesMatch,value:"any"}],_.getValue(t,"logicRules"),d.get("#qfb-notification-logic"),_.getValue(t,"logicAction")?"1":"0",_.getValue(t,"logicMatch")),d.get("#qfb-notification-attachments-wrap").empty(),_.loadAttachments(_.getValue(t,"attachments")),d.get("#qfb-notification-attachments-wrap").closest(g.settingWrap).show(),"undefined"!=typeof t.id?r("#qfb-notification-unique-id").val(b.form.id+"_"+t.id).closest(g.settingWrap).show():r("#qfb-notification-unique-id").val("");var s=_.getValue(t,"format");"html"===s?d.get("#qfb_notification_html").add(d.get("#qfb_notification_auto_format")).add(d.get("#qfb_notification_padding")).add(d.get("#qfb_notification_rtl")).closest(g.settingWrap).show():("multipart"===s&&d.get("#qfb_notification_html").add(d.get("#qfb_notification_auto_format")).add(d.get("#qfb_notification_padding")).add(d.get("#qfb_notification_rtl")).closest(g.settingWrap).show(),d.get("#qfb_notification_text").closest(g.settingWrap).show()),_.getValue(t,"conditional")&&d.get("#qfb-notification-conditionals-wrap").closest(g.settingWrap).show(),_.getValue(t,"logicEnabled")&&d.get("#qfb-notification-logic").closest(g.settingWrap).show()},updateNotificationListing:function(e,t){e.find(".qfb-notification-name").text(t.name),e.find(".qfb-notification-subject-text").text(t.subject),e.find(".qfb-notification-toggle").prop("checked",t.enabled)},getNotificationHtml:function(){var e;return!window.tinymce||(e=window.tinymce.get("qfb_notification_html"))&&!e.isHidden()&&e.isDirty()&&e.save(),d.get("#qfb_notification_html").val()},saveSettings:function(){if(!_.validateSettings())return!1;var e,i=_.editing;return i.name=d.get("#qfb_notification_name").val(),i.enabled=d.get("#qfb_notification_enabled").is(":checked"),i.subject=d.get("#qfb_notification_subject").val(),i.format=d.get("#qfb_notification_format").val(),i.html=_.getNotificationHtml(),i.autoFormat=d.get("#qfb_notification_auto_format").is(":checked"),i.padding=d.get("#qfb_notification_padding").val(),i.rtl=d.get("#qfb_notification_rtl").val(),i.text=d.get("#qfb_notification_text").val(),i.recipients=[],d.get("#qfb-notification-recipients").find(".qfb-recipient").each(function(){i.recipients.push(_.getRecipientObjectFromValues(r(this)))}),i.conditional=r("#qfb_notification_conditionals").is(":checked"),i.conditionals=[],d.get("#qfb-notification-conditionals-wrap").find(".qfb-conditional").each(function(){i.conditionals.push(_.getConditionalObjectFromValues(r(this)))}),0===i.conditionals.length&&(i.conditional=!1),i.from={address:d.get("#qfb-notification-from").find(".qfb-recipient-address").val(),name:d.get("#qfb-notification-from").find(".qfb-recipient-name").val()},i.logicEnabled=d.get("#qfb_notification_logic_enabled").is(":checked"),i.logicAction="0"!==d.get("#qfb-notification-logic").find(".qfb-logic-action").val(),i.logicMatch=d.get("#qfb-notification-logic").find(".qfb-logic-match").val(),i.logicRules=b.logic.getLogicRules(d.get("#qfb-notification-logic")),i.attachments=[],d.get("#qfb-notification-attachments-wrap").find(".qfb-attachment").each(function(){var e=r(this),t=_.getNewAttachment();t.source=e.find(".qfb-attachment-source").val(),"media"==t.source?e.find(".qfb-attachment-media .qfb-attachment-medium").each(function(){t.media.push(r(this).data("medium"))}):"element"==t.source&&(t.element=e.find(".qfb-attachment-element").val()),i.attachments.push(t)}),"undefined"==typeof i.id?(i.id=b.form.nextNotificationId++,b.form.notifications.push(i),(e=r(f.notificationHtml)).data({id:i.id}),d.get("#qfb-notifications").append(e.hide()),e.qfbSlideShow()):e=d.get("#qfb-notifications").find(".qfb-notification").filter(function(){return r(this).data("id")===i.id}),_.updateNotificationListing(e,i),!0},hideSettings:function(){0<d.get("#qfb-notifications").find(".qfb-notification").length&&r("#qfb-no-notifications").hide(),_.editing=null,r(".qtip").hide(),r("body").css({overflow:""}).removeClass("qfb-popup-open"),d.get("#qfb-notification-settings-inner").find(".qfb-validation-error").remove(),d.get("#qfb-notification-settings").hide()},validateRecipient:function(e,t){var i=e.find(".qfb-recipient-address"),o=i.val(),a="";""===o?a=l.thisFieldIsRequired:g.isValidEmail(o)||"{"==o.charAt(0)&&"}"==o.charAt(o.length-1)?"{"==o.charAt(0)&&"}"==o.charAt(o.length-1)&&g.isValidEmail(o.slice(1,-1))&&(a=f.emailRemoveBrackets):a=l.invalidEmailAddress,a.length&&t.push({scrollTarget:i.closest(".qfb-recipient"),show:function(){g.addValidationError(i.closest(".qfb-settings-column"),a)}})},validateOneValidRecipient:function(e,t){var i=!1;e.find(".qfb-recipient").each(function(){var e=r(this).find(".qfb-recipient-type").val();"to"!=e&&"cc"!=e&&"bcc"!=e||(i=!0)}),i||t.push({scrollTarget:e,show:function(){g.addValidationError(e,f.atLeastOneToCcBccRequired)}})},validateSettings:function(){d.get("#qfb-notification-settings-inner").find(".qfb-validation-error").remove();var a=[];""===d.get("#qfb_notification_name").val()&&a.push({scrollTarget:d.get("#qfb_notification_name").closest(g.settingWrap),show:function(){g.addValidationError(d.get("#qfb_notification_name").closest(g.settingInputWrap),l.thisFieldIsRequired)}}),""===d.get("#qfb_notification_subject").val()&&a.push({scrollTarget:d.get("#qfb_notification_subject").closest(g.settingWrap),show:function(){g.addValidationError(d.get("#qfb_notification_subject").closest(g.settingInputWrap),l.thisFieldIsRequired)}}),"html"!=d.get("#qfb_notification_format").val()&&"multipart"!=d.get("#qfb_notification_format").val()||""!==_.getNotificationHtml()||a.push({scrollTarget:r("#wp-qfb_notification_html-wrap").closest(g.settingWrap),show:function(){g.addValidationError(d.get("#qfb_notification_html").closest(g.settingInputWrap),l.thisFieldIsRequired)}}),"text"!=d.get("#qfb_notification_format").val()&&"multipart"!=d.get("#qfb_notification_format").val()||""!==d.get("#qfb_notification_text").val()||a.push({scrollTarget:d.get("#qfb_notification_text").closest(g.settingWrap),show:function(){g.addValidationError(d.get("#qfb_notification_text").closest(g.settingInputWrap),l.thisFieldIsRequired)}}),d.get("#qfb-notification-recipients").find(".qfb-recipient").each(function(){_.validateRecipient(r(this),a)}),_.validateOneValidRecipient(d.get("#qfb-notification-recipients"),a),d.get("#qfb-notification-conditionals-wrap").find(".qfb-conditional").each(function(){var e=r(this);e.find(".qfb-recipient").each(function(){_.validateRecipient(r(this),a)}),_.validateOneValidRecipient(e.find(".qfb-conditional-recipients"),a)}),_.validateRecipient(d.get("#qfb-notification-from").find(".qfb-recipient"),a),d.get("#qfb-notification-attachments-wrap").find(".qfb-attachment").each(function(){var e,t,i=r(this),o=i.find(".qfb-attachment-source").val();"media"==o?0===(e=i.find(".qfb-attachment-media")).find(".qfb-attachment-medium").length&&a.push({scrollTarget:d.get("#qfb-notification-attachments-wrap"),show:function(){g.addValidationError(e.closest(g.subSettingInputWrap),f.selectOneFile)}}):"element"!=o||""===(t=i.find(".qfb-attachment-element")).val()&&a.push({scrollTarget:d.get("#qfb-notification-attachments-wrap"),show:function(){g.addValidationError(t.closest(g.subSettingInputWrap),l.thisFieldIsRequired)}})});var e=0,t=a.length;if(0<t){for(;e<t;e++)a[e].show();g.scrollTo(a[0].scrollTarget,d.get("#qfb-notification-settings-inner"))}return 0===t},duplicate:function(e){var t,i,o=_.getNotificationById(e);null!==o&&(t=r.extend(!0,{},o,{id:b.form.nextNotificationId++}),b.form.notifications.push(t),(i=r(f.notificationHtml)).data({id:t.id}),_.updateNotificationListing(i,t),d.get("#qfb-notifications").append(i.hide()),i.qfbSlideShow())},getNotificationById:function(e){if(!e)return null;for(var t=0;t<b.form.notifications.length;t++)if(e==b.form.notifications[t].id)return b.form.notifications[t];return null},getRecipientHtml:function(e){void 0===e&&(e={type:"to",address:"",name:""});var t=r(f.recipientHtml),i=b.uniqid("qfb-"),o=b.uniqid("qfb-");return g.setSelectVal(t.find(".qfb-recipient-type"),e.type),t.find(".qfb-recipient-address").val(e.address).attr("id",i).siblings(".qfb-insert-variable").data("target-id",i),t.find(".qfb-recipient-name").val(e.name).attr("id",o).siblings(".qfb-insert-variable").data("target-id",o),t},deleteRecipient:function(e){e.closest(".qfb-recipient").remove()},checkInvalidLogic:function(){for(var e=0;e<b.form.notifications.length;e++){for(var t=b.form.notifications[e],i=0;i<t.conditionals.length;i++)t.conditionals[i].logicRules=b.logic.removeInvalidLogicRules(t.conditionals[i].logicRules);t.logicRules=b.logic.removeInvalidLogicRules(t.logicRules)}},buildConditionals:function(e){var t=0,i=e.length;if(0<i)for(;t<i;t++)d.get("#qfb-notification-conditionals-wrap").append(_.buildConditional(e[t]));else d.get("#qfb-notification-conditionals-wrap").html(b.buildMessageBox(f.noConditionals,"info","qfb-no-conditionals"))},buildConditional:function(e){if("object"!=typeof e)return null;var t=r('<div class="qfb-conditional qfb-box">');t.append(r('<div class="qfb-conditional-top">').append(r('<span class="qfb-mini-button qfb-button-green qfb-conditional-add-recipient">').text(f.addRecipient).prepend('<i class="mdi mdi-add_circle_outline">'),r('<span class="qfb-conditional-duplicate">').append('<i class="mdi mdi-content_copy">'),r('<span class="qfb-conditional-delete qfb-icon qfb-icon-trash">')));for(var i=r('<div class="qfb-conditional-recipients qfb-cf">'),o=0;o<e.recipients.length;o++)i.append(_.getRecipientHtml(e.recipients[o]));t.append(i);var a=r('<div class="qfb-logic qfb-cf">');if(t.append(a),0<b.logic.sources.length){var l=r('<div class="qfb-logic-top qfb-cf">'),s=r('<select class="qfb-logic-match">');s.append(r("<option>",{text:f.sendToTheseRecipientsIfAll,value:"all"})),s.append(r("<option>",{text:f.sendToTheseRecipientsIfAny,value:"any"})),l.append(s,r('<span class="qfb-button-green qfb-conditional-add-logic-rule">').text(f.addLogicRule).prepend('<i class="mdi mdi-add_circle_outline">')),a.append(l),g.setSelectVal(s,e.logicMatch);var n=r('<div class="qfb-logic-rules qfb-cf">');if(e.logicRules.length)for(var c=0;c<e.logicRules.length;c++)n.append(b.logic.buildLogicRule(e.logicRules[c]));else n.append(b.logic.getNoLogicRulesMessage());a.append(n)}else a.html(b.buildMessageBox(f.noLogicElements,"warning"));return t},getNewConditional:function(){return{recipients:[{type:"to",address:"",name:""}],logicAction:!0,logicMatch:"all",logicRules:[]}},getConditionalObjectFromValues:function(e){var t={recipients:[]};return e.find(".qfb-conditional-recipients").find(".qfb-recipient").each(function(){t.recipients.push(_.getRecipientObjectFromValues(r(this)))}),t.logicAction=!0,t.logicMatch=e.find(".qfb-logic-match").val(),t.logicRules=[],e.find(".qfb-logic-rule").each(function(){t.logicRules.push(b.logic.getLogicRuleObjectFromValues(r(this)))}),t},getRecipientObjectFromValues:function(e){return{type:e.find(".qfb-recipient-type").val(),address:e.find(".qfb-recipient-address").val(),name:e.find(".qfb-recipient-name").val()}},duplicateConditional:function(e){e.after(_.buildConditional(_.getConditionalObjectFromValues(e)))},getNewAttachment:function(){return{source:"media",element:"",media:[]}},getAttachmentMediumHtml:function(e){var t=r('<div class="qfb-attachment-medium qfb-box">').data("medium",e);return e.icon&&t.append(r('<span class="qfb-attachment-medium-icon">').append(r("<img>").attr("src",e.icon))),t.append(r('<span class="qfb-attachment-medium-name">').text(e.filename)),t.append(r('<span class="qfb-attachment-medium-filesize">').text(e.filesizeHumanReadable)),t.append(r('<span class="qfb-attachment-medium-remove qfb-icon qfb-icon-trash"></span>').attr("title",f.remove)),t},addAttachment:function(e){var t=r(f.attachmentHtml),i=t.find(".qfb-attachment-source"),o=t.find(".qfb-attachment-browse").closest(g.subSettingWrap),a=t.find(".qfb-attachment-element"),l=a.closest(g.subSettingWrap),s=t.find(".qfb-attachment-media");if(a.append(r("<option>",{text:f.selectElement,value:""})),_.attachmentSources.length)for(var n=0,c=_.attachmentSources.length;n<c;n++)a.append(r("<option>",{text:b.elements.getShortenedAdminLabel(_.attachmentSources[n]),value:_.attachmentSources[n].id}));else a.append(r("<option>",{text:f.noAttachmentSourcesFound,value:"",disabled:!0}));switch(r.each(e.media,function(e,t){s.append(_.getAttachmentMediumHtml(t))}),e.source){default:case"media":o.show(),l.hide();break;case"element":o.hide(),l.show()}g.setSelectVal(i,e.source),g.setSelectVal(a,e.element),t.find(".qfb-attachment-browse").qfbMediaBrowser({mediaOptions:{title:f.selectFiles,multiple:!0},callback:function(e){var t=e.toJSON(),o=[];r.each(t,function(e,t){var i={id:t.id,filename:t.filename,filesizeHumanReadable:t.filesizeHumanReadable,icon:t.icon};o.push(_.getAttachmentMediumHtml(i))}),o.length&&s.append(o)}}),d.get("#qfb-notification-attachments-wrap").append(t)},addAttachmentSource:function(e){-1!==r.inArray(e.type,f.attachmentSourceTypes)&&_.attachmentSources.push(e)},removeAttachmentSource:function(e){for(var t=_.attachmentSources.length;t--;)_.attachmentSources[t].id==e.id&&_.attachmentSources.splice(t,1)},loadAttachments:function(e){var t=0,i=e.length;if(0<i)for(;t<i;t++)_.addAttachment(e[t]);else d.get("#qfb-notification-attachments-wrap").html(b.buildMessageBox(f.noAttachments,"info","qfb-no-attachments"))},checkInvalidAttachments:function(){for(var e=0;e<b.form.notifications.length;e++)for(var t=b.form.notifications[e].attachments,i=t.length;i--;){var o=t[i];"element"==o.source&&null===b.elements.getElementById(o.element)&&t.splice(i,1)}},getValue:function(e,t){return g.getProperty(e,t,g.getProperty(f.notification,t))}};return e.builder.notifications=_,e}(quform=function(e,s,n,t){"use strict";var c=e.core,r=e.builder,f=c.cache,g={onWindowLoad:function(){f.get("#qfb-add-style").click(function(){g.addStyle({type:"",css:""})}),f.get("#qfb-styles").on("click",".qfb-style-action-settings",function(){var e=s(this).closest(".qfb-style"),t=f.get("#qfb-style-settings").closest(".qfb-style");t.length?t[0]===e[0]?(g.saveStyleSettings(e),g.hideStyleSettings(e)):(g.saveStyleSettings(t),g.hideStyleSettings(t,!0,function(){g.showStyleSettings(e)})):g.showStyleSettings(e)}),f.get("#qfb-styles").on("click",".qfb-style-action-remove",function(){var e=s(this).closest(".qfb-style");f.get("#qfb-style-settings").closest(".qfb-style")[0]===e[0]?g.hideStyleSettings(e,!0,function(){g.removeStyle(e)}):g.removeStyle(e)}),f.get("#qfb_style_type").on("change",function(){var e="",t=f.get("#qfb_style_type").val();c.isNonEmptyString(t)&&n.styles[t]&&(e=n.styles[t].name),f.get("#qfb_style_type").closest(".qfb-style").find(".qfb-style-title").text(e)}),f.get("#qfb-add-global-style").click(function(){g.addGlobalStyle({type:"",css:""})}),f.get("#qfb-global-styles").on("click",".qfb-global-style-action-settings",function(){var e=s(this).closest(".qfb-global-style"),t=f.get("#qfb-global-style-settings").closest(".qfb-global-style");t.length?t[0]===e[0]?(g.saveGlobalStyleSettings(e),g.hideGlobalStyleSettings(e)):(g.saveGlobalStyleSettings(t),g.hideGlobalStyleSettings(t,function(){g.showGlobalStyleSettings(e)})):g.showGlobalStyleSettings(e)}),f.get("#qfb-global-styles").on("click",".qfb-global-style-action-remove",function(){var e=s(this).closest(".qfb-global-style");f.get("#qfb-global-style-settings").closest(".qfb-global-style")[0]===e[0]?g.hideGlobalStyleSettings(e,function(){g.removeGlobalStyle(e)}):g.removeGlobalStyle(e)}),f.get("#qfb_global_style_type").on("change",function(){var e="",t=f.get("#qfb_global_style_type").val();c.isNonEmptyString(t)&&n.globalStyles[t]&&(e=n.globalStyles[t].name),f.get("#qfb_global_style_type").closest(".qfb-global-style").find(".qfb-global-style-title").text(e)}),s.fn.select2&&f.get("#qfb_style_type").add(f.get("#qfb_global_style_type")).select2({theme:"qfb",language:{noResults:function(){return t.noResultsFound}}}),f.get(".qfb-css-helper").click(function(){var e=s(this),t=e.closest(c.settingWrap).find("textarea"),i=e.data("css");t.length&&c.isNonEmptyString(i)&&(c.isNonEmptyString(t.val())&&(i="\n"+i),r.insertAtCursor(t[0],i))})},getStyleHtml:function(e){var t=s(n.styleHtml);return t.data("style",e),c.isNonEmptyString(e.type)&&n.styles[e.type]&&t.find(".qfb-style-title").text(n.styles[e.type].name),t},loadStyles:function(){var e=r.elements.editing,t=0,i=(e.styles||[]).length,o=n.visibleStyles[e.type]||[];if(f.get("#qfb-styles").empty(),0===i)f.get("#qfb-styles-empty").show();else{f.get("#qfb-styles-empty").hide();for(var a=[];t<i;t++)a.push(g.getStyleHtml(e.styles[t]));f.get("#qfb-styles").append(a)}var l=[s("<option>",{value:"",text:n.pleaseSelect})];_.each(n.styles,function(e,t){-1!==s.inArray(t,o)&&l.push(s("<option>",{value:t,text:e.name}))}),f.get("#qfb_style_type").html(l).trigger("change.select2"),l.length&&f.get("#qfb-styles").add("#qfb_style_type").add("#qfb_style_css").closest(c.settingWrap).show()},addStyle:function(e){var t=g.getStyleHtml(e);f.get("#qfb-styles-empty").qfbSlideHide(function(){var e=f.get("#qfb-style-settings").closest(".qfb-style");e.length?(g.saveStyleSettings(e),g.hideStyleSettings(e,!0,function(){t.hide().appendTo(f.get("#qfb-styles")).qfbSlideShow(function(){g.showStyleSettings(t)})})):t.hide().appendTo(f.get("#qfb-styles")).qfbSlideShow(function(){g.showStyleSettings(t)})})},showStyleSettings:function(e){e.append(f.get("#qfb-style-settings").hide()),g.loadStyleSettings(e),f.get("#qfb-style-settings").qfbSlideShow()},hideStyleSettings:function(e,t,i){var o=function(){g.resetStyleSettings(),s.isFunction(i)&&i()};!1===t?o():f.get("#qfb-style-settings").qfbSlideHide(o)},loadStyleSettings:function(e){var t=e.data("style");c.setSelectVal(f.get("#qfb_style_type"),c.getProperty(t,"type","")).trigger("change.select2"),f.get("#qfb_style_css").val(c.getProperty(t,"css","")),c.doAction("loadStyleSettings",t,e)},saveStyleSettings:function(e){var t=e.data("style");t.type=f.get("#qfb_style_type").val(),t.css=f.get("#qfb_style_css").val(),c.doAction("saveStyleSettings",t,e)},removeStyle:function(e){e.qfbSlideHide(function(){e.remove(),0===f.get("#qfb-styles").find(".qfb-style").length&&f.get("#qfb-styles-empty").qfbSlideShow()})},saveStyles:function(){var e=r.elements.editing,t=f.get("#qfb-style-settings").closest(".qfb-style");t.length&&(g.saveStyleSettings(t),g.hideStyleSettings(t,!1)),e.styles=[],f.get("#qfb-styles").find(".qfb-style").each(function(){e.styles.push(s(this).data("style"))})},resetStyleSettings:function(){f.get("#qfb-style-settings").hide().prependTo(f.get("#qfb-styles").parent())},getGlobalStyleHtml:function(e){var t=s(n.globalStyleHtml);return t.data("style",e),c.isNonEmptyString(e.type)&&n.globalStyles[e.type]&&t.find(".qfb-global-style-title").text(n.globalStyles[e.type].name),t},addGlobalStyle:function(e){var t=g.getGlobalStyleHtml(e);f.get("#qfb-global-styles-empty").qfbSlideHide(function(){var e=f.get("#qfb-global-style-settings").closest(".qfb-global-style");e.length?(g.saveGlobalStyleSettings(e),g.hideGlobalStyleSettings(e,function(){t.hide().appendTo(f.get("#qfb-global-styles")).qfbSlideShow(function(){g.showGlobalStyleSettings(t)})})):t.hide().appendTo(f.get("#qfb-global-styles")).qfbSlideShow(function(){g.showGlobalStyleSettings(t)})})},showGlobalStyleSettings:function(e){e.append(f.get("#qfb-global-style-settings").hide()),g.loadGlobalStyleSettings(e),f.get("#qfb-global-style-settings").qfbSlideShow()},hideGlobalStyleSettings:function(e,t){f.get("#qfb-global-style-settings").qfbSlideHide(function(){f.get("#qfb-global-style-settings").hide().prependTo(f.get("#qfb-global-styles").parent()),s.isFunction(t)&&t()})},loadGlobalStyleSettings:function(e){var t=e.data("style");c.setSelectVal(f.get("#qfb_global_style_type"),c.getProperty(t,"type","")).trigger("change.select2"),f.get("#qfb_global_style_css").val(c.getProperty(t,"css","")),c.doAction("loadGlobalStyleSettings",t,e)},saveGlobalStyleSettings:function(e){var t=e.data("style");t.type=f.get("#qfb_global_style_type").val(),t.css=f.get("#qfb_global_style_css").val(),c.doAction("saveGlobalStyleSettings",t,e)},removeGlobalStyle:function(e){e.qfbSlideHide(function(){e.remove(),0===f.get("#qfb-global-styles").find(".qfb-global-style").length&&f.get("#qfb-global-styles-empty").qfbSlideShow()})},updateGlobalStyles:function(){var e=f.get("#qfb-global-style-settings").closest(".qfb-global-style");e.length&&g.saveGlobalStyleSettings(e),r.form.styles=[],f.get("#qfb-global-styles").find(".qfb-global-style").each(function(){r.form.styles.push(s(this).data("style"))})}};return e.builder.styles=g,e}(quform=function(e,l,s){"use strict";var n=e.core,c=e.builder,r=n.cache,f={init:function(){r.get("#qfb-validators").on("click",".qfb-validator-action-settings",function(){var e=l(this).closest(".qfb-validator"),t=r.get("#qfb-validator-settings").closest(".qfb-validator");t.length?t[0]===e[0]?(f.saveValidatorSettings(e),f.hideValidatorSettings(e)):(f.saveValidatorSettings(t),f.hideValidatorSettings(t,!0,function(){f.showValidatorSettings(e)})):f.showValidatorSettings(e)}),r.get("#qfb-validators").on("click",".qfb-validator-action-remove",function(){var e=l(this).closest(".qfb-validator");r.get("#qfb-validator-settings").closest(".qfb-validator")[0]===e[0]?f.hideValidatorSettings(e,!0,function(){f.removeValidator(e)}):f.removeValidator(e)}),r.get(".qfb-add-validator").click(function(){var e=l(this).data("type");n.isNonEmptyString(e)&&s.validators[e]&&s.validators[e].config&&(l(".qtip").hide(),f.addValidator(l.extend(!0,{},s.validators[e].config)))})},getValidatorHtml:function(e){var t=l(s.validatorHtml);return t.data("validator",e).find(".qfb-validator-title").text(s.validators[e.type].name),t},loadValidators:function(){var e=c.elements.editing,t=0,i=(c.elements.getValue(e,"validators")||[]).length,o=s.visibleValidators[e.type]||[];if(r.get(".qfb-add-validator").hide(),r.get("#qfb-validators").empty(),0===i)r.get("#qfb-validators-empty").show();else{r.get("#qfb-validators-empty").hide();for(var a=[];t<i;t++)a.push(f.getValidatorHtml(e.validators[t]));r.get("#qfb-validators").append(a)}0<r.get(".qfb-add-validator").filter(function(){return-1!==l.inArray(l(this).data("type"),o)}).show().length?r.get("#qfb-validators").closest(n.settingWrap).show():r.get("#qfb-validators").closest(n.settingWrap).hide()},addValidator:function(e){var t=f.getValidatorHtml(e);r.get("#qfb-validators-empty").qfbSlideHide(function(){t.hide().appendTo(r.get("#qfb-validators")).qfbSlideShow()})},showValidatorSettings:function(e){e.append(r.get("#qfb-validator-settings").hide()),f.loadValidatorSettings(e),r.get("#qfb-validator-settings").qfbSlideShow()},hideValidatorSettings:function(e,t,i){var o=function(){r.get("#qfb-validator-settings").prependTo(r.get("#qfb-validators").parent()),l.isFunction(i)&&i()};!1===t?(r.get("#qfb-validator-settings").hide(),o()):r.get("#qfb-validator-settings").qfbSlideHide(o)},loadValidatorSettings:function(e){var t=e.data("validator");switch(r.get("#qfb-validator-settings").find(".qfb-setting").hide(),t.type){case"alpha":l("#qfb_v_allow_white_space").prop("checked",f.getValue(t,"allowWhiteSpace")).closest(n.settingWrap).show(),l("#qfb_v_message_notAlpha").val(f.getValue(t,"messages.notAlpha")).closest(n.settingWrap).show();break;case"alphaNumeric":l("#qfb_v_allow_white_space").prop("checked",f.getValue(t,"allowWhiteSpace")).closest(n.settingWrap).show(),l("#qfb_v_message_notAlphaNumeric").val(f.getValue(t,"messages.notAlphaNumeric")).closest(n.settingWrap).show();break;case"digits":l("#qfb_v_allow_white_space").prop("checked",f.getValue(t,"allowWhiteSpace")).closest(n.settingWrap).show(),l("#qfb_v_message_notDigits").val(f.getValue(t,"messages.notDigits")).closest(n.settingWrap).show();break;case"duplicate":l("#qfb_v_message_isDuplicate").val(f.getValue(t,"messages.isDuplicate")).closest(n.settingWrap).show();break;case"email":l("#qfb_v_message_emailAddressInvalidFormat").val(f.getValue(t,"messages.emailAddressInvalidFormat")).closest(n.settingWrap).show();break;case"greaterThan":l("#qfb_v_greater_than_min").val(f.getValue(t,"min")).closest(n.settingWrap).show(),l("#qfb_v_greater_than_inclusive").prop("checked",f.getValue(t,"inclusive")).closest(n.settingWrap).show(),l("#qfb_v_message_notGreaterThan").val(f.getValue(t,"messages.notGreaterThan")).closest(n.settingWrap).show(),l("#qfb_v_message_notGreaterThanInclusive").val(f.getValue(t,"messages.notGreaterThanInclusive")).closest(n.settingWrap).show();break;case"identical":l("#qfb_v_token").val(f.getValue(t,"token")).closest(n.settingWrap).show(),l("#qfb_v_message_notSame").val(f.getValue(t,"messages.notSame")).closest(n.settingWrap).show();break;case"inArray":l("#qfb_v_haystack").val(f.getValue(t,"haystack").join("\n")).closest(n.settingWrap).show(),l("#qfb_v_in_array_invert").prop("checked",f.getValue(t,"invert")).closest(n.settingWrap).show(),l("#qfb_v_message_notInArray").val(f.getValue(t,"messages.notInArray")).closest(n.settingWrap).show();break;case"length":l("#qfb_v_length_min").val(f.getValue(t,"min")).closest(n.settingWrap).show(),l("#qfb_v_length_max").val(f.getValue(t,"max")).closest(n.settingWrap).show(),l("#qfb_v_message_lengthTooShort").val(f.getValue(t,"messages.lengthTooShort")).closest(n.settingWrap).show(),l("#qfb_v_message_lengthTooLong").val(f.getValue(t,"messages.lengthTooLong")).closest(n.settingWrap).show();break;case"lessThan":l("#qfb_v_less_than_max").val(f.getValue(t,"max")).closest(n.settingWrap).show(),l("#qfb_v_less_than_inclusive").prop("checked",f.getValue(t,"inclusive")).closest(n.settingWrap).show(),l("#qfb_v_message_notLessThan").val(f.getValue(t,"messages.notLessThan")).closest(n.settingWrap).show(),l("#qfb_v_message_notLessThanInclusive").val(f.getValue(t,"messages.notLessThanInclusive")).closest(n.settingWrap).show();break;case"regex":l("#qfb_v_pattern").val(f.getValue(t,"pattern")).closest(n.settingWrap).show(),l("#qfb_v_invert").prop("checked",f.getValue(t,"invert")).closest(n.settingWrap).show(),l("#qfb_v_message_regexNotMatch").val(f.getValue(t,"messages.regexNotMatch")).closest(n.settingWrap).show()}l("#qfb-v-error-message-headings").show(),n.doAction("loadValidatorSettings",t,e)},saveValidatorSettings:function(e){var t=e.data("validator");switch(t.type){case"alpha":t.allowWhiteSpace=l("#qfb_v_allow_white_space").is(":checked"),t.messages={notAlpha:l("#qfb_v_message_notAlpha").val()};break;case"alphaNumeric":t.allowWhiteSpace=l("#qfb_v_allow_white_space").is(":checked"),t.messages={notAlphaNumeric:l("#qfb_v_message_notAlphaNumeric").val()};break;case"digits":t.allowWhiteSpace=l("#qfb_v_allow_white_space").is(":checked"),t.messages={notDigits:l("#qfb_v_message_notDigits").val()};break;case"duplicate":t.messages={isDuplicate:l("#qfb_v_message_isDuplicate").val()};break;case"email":t.messages={emailAddressInvalidFormat:l("#qfb_v_message_emailAddressInvalidFormat").val()};break;case"greaterThan":t.min=l("#qfb_v_greater_than_min").val(),t.inclusive=l("#qfb_v_greater_than_inclusive").is(":checked"),t.messages={notGreaterThan:l("#qfb_v_message_notGreaterThan").val(),notGreaterThanInclusive:l("#qfb_v_message_notGreaterThanInclusive").val()};break;case"identical":t.token=l("#qfb_v_token").val(),t.messages={notSame:l("#qfb_v_message_notSame").val()};break;case"inArray":t.haystack=l("#qfb_v_haystack").val().split("\n"),t.invert=l("#qfb_v_in_array_invert").is(":checked"),t.messages={notInArray:l("#qfb_v_message_notInArray").val()};break;case"length":t.min=l("#qfb_v_length_min").val(),t.max=l("#qfb_v_length_max").val(),t.messages={lengthTooShort:l("#qfb_v_message_lengthTooShort").val(),lengthTooLong:l("#qfb_v_message_lengthTooLong").val()};break;case"lessThan":t.max=l("#qfb_v_less_than_max").val(),t.inclusive=l("#qfb_v_less_than_inclusive").is(":checked"),t.messages={notLessThan:l("#qfb_v_message_notLessThan").val(),notLessThanInclusive:l("#qfb_v_message_notLessThanInclusive").val()};break;case"regex":t.pattern=l("#qfb_v_pattern").val(),t.invert=l("#qfb_v_invert").is(":checked"),t.messages={regexNotMatch:l("#qfb_v_message_regexNotMatch").val()}}n.doAction("saveValidatorSettings",t,e)},removeValidator:function(e){e.qfbSlideHide(function(){e.remove(),0===r.get("#qfb-validators").find(".qfb-validator").length&&r.get("#qfb-validators-empty").qfbSlideShow()})},saveValidators:function(){var e=c.elements.editing,t=r.get("#qfb-validator-settings").closest(".qfb-validator");t.length&&(f.saveValidatorSettings(t),f.hideValidatorSettings(t,!1)),e.validators=[],r.get("#qfb-validators").find(".qfb-validator").each(function(){e.validators.push(l(this).data("validator"))})},resetValidatorSettings:function(){r.get("#qfb-validator-settings").hide().prependTo(r.get("#qfb-validators").parent())},getValue:function(e,t){return n.getProperty(e,t,n.getProperty(s.validators[e.type].config,t))}};return e.builder.validators=f,e}(quform=function(e,l,s){"use strict";var n=e.core,c=e.builder,r=n.cache,f={init:function(){r.get("#qfb-filters").on("click",".qfb-filter-action-settings",function(){var e=l(this).closest(".qfb-filter"),t=r.get("#qfb-filter-settings").closest(".qfb-filter");t.length?t[0]===e[0]?(f.saveFilterSettings(e),f.hideFilterSettings(e)):(f.saveFilterSettings(t),f.hideFilterSettings(t,!0,function(){f.showFilterSettings(e)})):f.showFilterSettings(e)}),r.get("#qfb-filters").on("click",".qfb-filter-action-remove",function(){var e=l(this).closest(".qfb-filter");r.get("#qfb-filter-settings").closest(".qfb-filter")[0]===e[0]?f.hideFilterSettings(e,!0,function(){f.removeFilter(e)}):f.removeFilter(e)}),r.get(".qfb-add-filter").click(function(){var e=l(this).data("type");n.isNonEmptyString(e)&&s.filters[e]&&s.filters[e].config&&(l(".qtip").hide(),f.addFilter(l.extend(!0,{},s.filters[e].config)))})},getFilterHtml:function(e){var t=l(s.filterHtml);return t.data("filter",e).find(".qfb-filter-title").text(s.filters[e.type].name),"trim"==e.type&&t.find(".qfb-filter-action-settings").hide(),t},loadFilters:function(){var e=c.elements.editing,t=0,i=(c.elements.getValue(e,"filters")||[]).length,o=s.visibleFilters[e.type]||[];if(r.get(".qfb-add-filter").hide(),r.get("#qfb-filters").empty(),0===i)r.get("#qfb-filters-empty").show();else{r.get("#qfb-filters-empty").hide();for(var a=[];t<i;t++)a.push(f.getFilterHtml(e.filters[t]));r.get("#qfb-filters").append(a)}0<r.get(".qfb-add-filter").filter(function(){return-1!==l.inArray(l(this).data("type"),o)}).show().length?r.get("#qfb-filters").closest(n.settingWrap).show():r.get("#qfb-filters").closest(n.settingWrap).hide()},addFilter:function(e){var t=f.getFilterHtml(e);r.get("#qfb-filters-empty").qfbSlideHide(function(){t.hide().appendTo(r.get("#qfb-filters")).qfbSlideShow()})},showFilterSettings:function(e){e.append(r.get("#qfb-filter-settings").hide()),f.loadFilterSettings(e),r.get("#qfb-filter-settings").qfbSlideShow()},hideFilterSettings:function(e,t,i){var o=function(){r.get("#qfb-filter-settings").prependTo(r.get("#qfb-filters").parent()),l.isFunction(i)&&i()};!1===t?(r.get("#qfb-filter-settings").hide(),o()):r.get("#qfb-filter-settings").qfbSlideHide(o)},loadFilterSettings:function(e){var t=e.data("filter");switch(r.get("#qfb-filter-settings").find(".qfb-setting").hide(),t.type){case"alpha":case"alphaNumeric":case"digits":l("#qfb_f_allow_white_space").prop("checked",f.getValue(t,"allowWhiteSpace")).closest(n.settingWrap).show();break;case"stripTags":l("#qfb_f_allowable_tags").val(f.getValue(t,"allowableTags")).closest(n.settingWrap).show();break;case"regex":l("#qfb_f_pattern").val(f.getValue(t,"pattern")).closest(n.settingWrap).show()}n.doAction("loadFilterSettings",t,e)},saveFilterSettings:function(e){var t=e.data("filter");switch(t.type){case"alpha":case"alphaNumeric":case"digits":t.allowWhiteSpace=l("#qfb_f_allow_white_space").is(":checked");break;case"stripTags":t.allowableTags=l("#qfb_f_allowable_tags").val();break;case"regex":t.pattern=l("#qfb_f_pattern").val()}n.doAction("saveFilterSettings",t,e)},removeFilter:function(e){e.qfbSlideHide(function(){e.remove(),0===r.get("#qfb-filters").find(".qfb-filter").length&&r.get("#qfb-filters-empty").qfbSlideShow()})},saveFilters:function(){var e=c.elements.editing,t=r.get("#qfb-filter-settings").closest(".qfb-filter");t.length&&(f.saveFilterSettings(t),f.hideFilterSettings(t,!1)),e.filters=[],r.get("#qfb-filters").find(".qfb-filter").each(function(){e.filters.push(l(this).data("filter"))})},resetFilterSettings:function(){r.get("#qfb-filter-settings").hide().prependTo(r.get("#qfb-filters").parent())},getValue:function(e,t){return n.getProperty(e,t,n.getProperty(s.filters[e.type].config,t))}};return e.builder.filters=f,e}(quform=function(e,u,p){"use strict";var m=e.core,q=e.builder,h={sources:[],addSource:function(e){-1!==u.inArray(e.type,p.logicSourceTypes)&&h.sources.push(e)},removeSource:function(e){for(var t=h.sources.length;t--;)h.sources[t].id==e.id&&h.sources.splice(t,1)},buildLogic:function(e,t,i,o,a,l){if(0===q.logic.sources.length||1===q.logic.sources.length&&null!==q.elements.editing&&q.logic.sources[0].id==q.elements.editing.id)o.html(q.buildMessageBox(p.noLogicElements,"warning"));else{o.empty();var s=u('<div class="qfb-logic-top qfb-settings-row">'),n=u('<div class="qfb-settings-column">'),c=u('<div class="qfb-settings-column">');if(e.length){s.addClass("qfb-settings-row-2");for(var r=u('<select class="qfb-logic-action">'),f=0;f<e.length;f++)r.append(u("<option>",e[f]));m.setSelectVal(r,a),s.append(n.append(r))}for(var g=u('<select class="qfb-logic-match">'),b=0;b<t.length;b++)g.append(u("<option>",t[b]));m.setSelectVal(g,l),s.append(c.append(g)),o.append(s);var d=u('<div class="qfb-logic-rules qfb-cf">');if(i.length)for(var _=0;_<i.length;_++)d.append(h.buildLogicRule(i[_]));else d.append(h.getNoLogicRulesMessage());o.append(d)}},buildLogicRule:function(e){if(0===q.logic.sources.length||"object"!=typeof e||null!==q.elements.editing&&1===q.logic.sources.length&&q.logic.sources[0].id==q.elements.editing.id)return null;for(var t=u(p.logicRuleHtml).data("rule",e),i=u('<select class="qfb-logic-rule-element">'),o=0;o<q.logic.sources.length;o++)null!==q.elements.editing&&q.logic.sources[o].id==q.elements.editing.id||i.append(u("<option>",{text:q.elements.getShortenedAdminLabel(q.logic.sources[o]),value:q.logic.sources[o].id}));m.setSelectVal(i,e.elementId),t.find(".qfb-logic-rule-column-element").html(i);var a=u('<select class="qfb-logic-rule-operator">');return a.append(u("<option>",{text:p.is,value:"eq"})),a.append(u("<option>",{text:p.isNot,value:"neq"})),a.append(u("<option>",{text:p.isEmpty,value:"empty"})),a.append(u("<option>",{text:p.isNotEmpty,value:"not_empty"})),a.append(u("<option>",{text:p.greaterThan,value:"gt"})),a.append(u("<option>",{text:p.lessThan,value:"lt"})),a.append(u("<option>",{text:p.contains,value:"contains"})),a.append(u("<option>",{text:p.startsWith,value:"starts_with"})),a.append(u("<option>",{text:p.endsWith,value:"ends_with"})),m.setSelectVal(a,e.operator),t.find(".qfb-logic-rule-column-operator").html(a),t.find(".qfb-logic-rule-column-value").html(h.buildLogicRuleValues(i.val(),e)),t.on("change",".qfb-logic-rule-element, .qfb-logic-rule-operator",function(){var e={elementId:t.find(".qfb-logic-rule-element").val(),operator:t.find(".qfb-logic-rule-operator").val(),value:"",optionId:null};t.find(".qfb-logic-rule-column-value").html(h.buildLogicRuleValues(i.val(),e))}),t.find(".qfb-small-add-button").click(function(){u(this).closest(".qfb-logic-rule").after(h.buildLogicRule(h.getNewLogicRule()))}),t.find(".qfb-small-remove-button").click(function(){var e=u(this).closest(".qfb-logic-rules");u(this).closest(".qfb-logic-rule").remove(),0===e.find(".qfb-logic-rule").length&&h.getNoLogicRulesMessage().hide().appendTo(e).fadeIn()}),t},buildLogicRuleValues:function(e,t){var i=q.elements.getElementById(e);if("empty"===t.operator||"not_empty"===t.operator)a=u('<input class="qfb-logic-rule-value" type="hidden">');else if("select"!==i.type&&"radio"!==i.type&&"checkbox"!==i.type&&"multiselect"!==i.type||"eq"!==t.operator&&"neq"!==t.operator)a=u('<input class="qfb-logic-rule-value" type="text">').attr("placeholder",p.enterValue).val(t.value);else{for(var o=0,a=u('<select class="qfb-logic-rule-value">');o<i.options.length;o++)if("select"!==i.type&&"multiselect"!==i.type||"undefined"==typeof i.options[o].options)a.append(u("<option>",{text:h.getShortenedOptionLabel(i.options[o]),value:i.options[o].id}));else{for(var l=u("<optgroup>",{label:q.shorten(i.options[o].label)}),s=0;s<i.options[o].options.length;s++)l.append(u("<option>",{text:h.getShortenedOptionLabel(i.options[o].options[s]),value:i.options[o].options[s].id}));a.append(l)}m.setSelectVal(a,t.optionId)}return a},getShortenedOptionLabel:function(e){return 0<e.label.length?q.shorten(e.label):q.shorten(e.value)},getLogicRules:function(e){var t=[];return e.find(".qfb-logic-rule").each(function(){t.push(h.getLogicRuleObjectFromValues(u(this)))}),t},getLogicRuleObjectFromValues:function(e){var t,i,o=e.find(".qfb-logic-rule-value"),a=e.find(".qfb-logic-rule-element").val(),l=o.val(),s=null;return o.is("select")&&(!(t=q.elements.getElementById(a))||(i=q.options.getElementOptionById(t,l))&&(s=l,l=i.value)),{elementId:a,operator:e.find(".qfb-logic-rule-operator").val(),optionId:s,value:l}},getNewLogicRule:function(){return{elementId:"",operator:"eq",value:"",optionId:null}},getNoLogicRulesMessage:function(){return q.buildMessageBox(p.noLogicRules,"info","qfb-no-logic-rules")},checkInvalidLogic:function(){q.elements.checkInvalidLogic(),q.notifications.checkInvalidLogic(),q.confirmations.checkInvalidLogic()},removeInvalidLogicRules:function(e){for(var t=e.length;t--;){var i,o=q.elements.getElementById(e[t].elementId);null!==o?"eq"!=e[t].operator&&"neq"!=e[t].operator||!e[t].optionId||(null!==(i=q.options.getElementOptionById(o,e[t].optionId))?e[t].value!=i.value&&(e[t].value=i.value):e.splice(t,1)):e.splice(t,1)}return e}};return e.builder.logic=h,e}(quform=function(e,b,n){"use strict";var a=e.core,d=e.builder,_=a.cache,u={editing:null,nextOptionId:0,onWindowLoad:function(){_.get("#qfb-options").sortable({items:"> .qfb-option, > .qfb-optgroup",handle:"> .qfb-option-right > .qfb-option-actions > .qfb-option-action-move, > .qfb-optgroup-top > .qfb-optgroup-right > .qfb-optgroup-actions > .qfb-optgroup-action-move",placeholder:"qfb-sortable-option-placeholder",connectWith:".qfb-optgroup-options"}),b("#qfb-add-option-button").on("click",function(){_.get("#qfb-options").append(u.getOptionHtml(u.createOption())),u.checkOptionsEmpty()}),_.get("#qfb-options").on("click",".qfb-option-action-set-default",function(){var e=d.elements.editing,t=b(this).closest(".qfb-option");"checkbox"==e.type||"multiselect"==e.type?t.toggleClass("qfb-option-default"):t.hasClass("qfb-option-default")?t.removeClass("qfb-option-default"):(t.closest(".qfb-options-list").find(".qfb-option-default").removeClass("qfb-option-default"),t.addClass("qfb-option-default"))}),_.get("#qfb_customise_values").click(u.customiseOptionValues),_.get("#qfb-options").on("keyup blur",".qfb-option-label",function(){var e=b(this),t=e.val(),i=e.closest(".qfb-option"),o=i.data("option");o.label=t,_.get("#qfb_customise_values").is(":checked")||(i.find(".qfb-option-value").val(t),o.value=t)}),_.get("#qfb-options").on("keyup blur",".qfb-option-value",function(){var e,t,i,o;_.get("#qfb_customise_values").is(":checked")&&(t=(e=b(this)).val(),o=(i=e.closest(".qfb-option")).data("option"),i.find(".qfb-option-value").val(t),o.value=t)}),_.get("#qfb-options").on("click",".qfb-option-action-add",function(){b(this).closest(".qfb-option").after(u.getOptionHtml(u.createOption())),u.checkOptionsEmpty()}),_.get("#qfb-options").on("click",".qfb-option-action-duplicate",function(){var e=b(this).closest(".qfb-option"),t=e.data("option"),i=b.extend(!0,{},t,{id:u.nextOptionId++});e.after(u.getOptionHtml(i))}),_.get("#qfb-options").on("click",".qfb-option-action-remove",function(){b(this).closest(".qfb-option").remove(),u.checkOptionsEmpty()}),_.get("#qfb-add-optgroup-button").on("click",function(){"select"!=d.elements.editing.type&&"multiselect"!=d.elements.editing.type||(_.get("#qfb-options").append(u.getOptgroupHtml(u.createOptgroup())),u.checkOptionsEmpty())}),_.get("#qfb-options").on("click",".qfb-optgroup-action-remove",function(){var e=b(this).closest(".qfb-optgroup");e.find(".qfb-optgroup-options > .qfb-option").length&&!confirm(n.confirmRemoveOptgroup)||(e.remove(),u.checkOptionsEmpty())}),_.get("#qfb-options").on("click",".qfb-optgroup-action-add",function(){b(this).closest(".qfb-optgroup").find(".qfb-optgroup-options").append(u.getOptionHtml(u.createOption()))}),_.get("#qfb-options").on("click",".qfb-option-action-settings",function(){u.showSettings(b(this).closest(".qfb-option").data("option"))}),_.get("#qfb-option-settings").find(".qfb-popup-save-button").click(function(){u.saveSettings(),u.hideSettings()}),_.get("#qfb-option-settings").find(".qfb-popup-close-button").click(function(){u.hideSettings()}),b.each(["#qfb_option_image","#qfb_option_image_selected"],function(e,i){_.get(i+"_browse").qfbMediaBrowser({callback:function(e){try{_.get(i).val(e.first().toJSON().url)}catch(t){}}})}),_.get("#qfb-name-prefix-options").sortable({axis:"y",items:"> .qfb-option",handle:"> .qfb-option-right > .qfb-option-actions > .qfb-option-action-move",placeholder:"qfb-sortable-option-placeholder"}),_.get("#qfb_customise_name_prefix_values").click(u.customiseNamePrefixOptionValues),_.get("#qfb-name-prefix-options").on("keyup blur",".qfb-option-label",function(){var e=b(this);_.get("#qfb_customise_name_prefix_values").is(":checked")||e.closest(".qfb-option").find(".qfb-option-value").val(e.val())}),b("#qfb-add-name-prefix-option-button").click(function(){_.get("#qfb-name-prefix-options").append(u.getNamePrefixOptionHtml(u.createNamePrefixOption())),u.checkNamePrefixOptionsEmpty()}),_.get("#qfb-name-prefix-options").on("click",".qfb-option-action-add",function(){b(this).closest(".qfb-option").after(u.getNamePrefixOptionHtml(u.createNamePrefixOption()))}),_.get("#qfb-name-prefix-options").on("click",".qfb-option-action-set-default",function(){var e=b(this).closest(".qfb-option");e.hasClass("qfb-option-default")?e.removeClass("qfb-option-default"):(_.get("#qfb-name-prefix-options").find(".qfb-option-default").removeClass("qfb-option-default"),e.addClass("qfb-option-default"))}),_.get("#qfb-name-prefix-options").on("click",".qfb-option-action-remove",function(){b(this).closest(".qfb-option").remove(),u.checkNamePrefixOptionsEmpty()}),_.get("#qfb-add-bulk-options-button").click(u.showBulkOptions),_.get("#qfb-insert-bulk-options").click(u.insertBulkOptions),_.get("#qfb-close-bulk-options").click(u.closeBulkOptions),_.get(".qfb-add-bulk-option-button").click(u.loadBulkOptions),d.setupContainerTooltips(_.get("#qfb-bulk-options").find("> .qfb-popup-content"))},loadOptions:function(){var e,t=d.elements.editing,i=0,o=[];for(u.nextOptionId=t.nextOptionId,b.isArray(t.options)||(t.options=[]),e=t.options.length;i<e;i++)"undefined"==typeof t.options[i].options?o.push(u.getOptionHtml(b.extend({},t.options[i],!0))):o.push(u.getOptgroupHtml(b.extend({},t.options[i],!0)));_.get("#qfb-options").html(o),u.setDefaultOption(),u.checkOptionsEmpty(),_.get("#qfb-add-optgroup-button")["select"==t.type||"multiselect"==t.type?"show":"hide"](),_.get("#qfb_customise_values").prop("checked",t.customiseValues),u.customiseOptionValues(_.get("#qfb-options")),_.get("#qfb-options").closest(a.settingWrap).show()},saveOptions:function(){var e=d.elements.editing,c=_.get("#qfb_customise_values").is(":checked"),r="checkbox"==e.type||"multiselect"==e.type,f=r?[]:"",g=[];_.get("#qfb-options").find("> .qfb-option, > .qfb-optgroup").each(function(){var e,t,a,i,o,l,s,n=b(this);n.hasClass("qfb-optgroup")?(t=(e=n).data("optgroup"),a=[],e.find(".qfb-optgroup-options").find("> .qfb-option").each(function(){var e=b(this),t=e.data("option"),i=e.find(".qfb-option-label").val(),o=c?e.find(".qfb-option-value").val():i;t.label=i,t.value=o,a.push(t),e.hasClass("qfb-option-default")&&(r?f.push(o):f=o)}),t.label=e.find(".qfb-optgroup-label").val(),t.options=a,g.push(t)):(o=(i=n).data("option"),l=i.find(".qfb-option-label").val(),s=c?i.find(".qfb-option-value").val():l,o.label=l,o.value=s,g.push(o),i.hasClass("qfb-option-default")&&(r?f.push(s):f=s))}),e.options=g,e.nextOptionId=u.nextOptionId,e.defaultValue=f,e.customiseValues=c,d.logic.checkInvalidLogic()},getElementOptionById:function(e,t){for(var i=0;i<e.options.length;i++)if("undefined"==typeof e.options[i].options){if(e.options[i].id==t)return e.options[i]}else for(var o=0;o<e.options[i].options.length;o++)if(e.options[i].options[o].id==t)return e.options[i].options[o];return null},createOption:function(){var e=d.elements.editing;return b.extend(!0,{id:u.nextOptionId++},n.defaultOptions[e.type])},getOptionHtml:function(e){var t=d.elements.editing,i=b(n[t.type+"OptionHtml"]),o=i.find(".qfb-option-value");return i.find(".qfb-option-label").val(u.getOptionValue(e,"label")),o.val(u.getOptionValue(e,"value")),_.get("#qfb_customise_values").is(":checked")||o.prop({readOnly:!0,tabIndex:-1}).attr("title",n.enableCustomizeValuesToChange),i.data("option",e),i},createOptgroup:function(){var e=d.elements.editing;return b.extend(!0,{id:u.nextOptionId++},n.defaultOptgroups[e.type])},getOptgroupHtml:function(e){var t=b(n.optgroupHtml),i=b('<div class="qfb-optgroup-options">'),o=u.getOptgroupValue(e,"options"),a=[];t.find(".qfb-optgroup-label").val(u.getOptgroupValue(e,"label"));for(var l=0,s=o.length;l<s;l++)a.push(u.getOptionHtml(o[l]));return t.append(i.html(a)),i.sortable({items:"> .qfb-option",handle:"> .qfb-option-right > .qfb-option-actions > .qfb-option-action-move",placeholder:"qfb-sortable-option-placeholder",connectWith:"#qfb-options, .qfb-optgroup-options",receive:function(e,t){b(t.item).hasClass("qfb-optgroup")&&(b(t.sender).sortable("cancel"),alert(n.nestingOptgroupError))}}),t.data("optgroup",e),t},customiseOptionValues:function(){_.get("#qfb_customise_values").is(":checked")?_.get("#qfb-options").find(".qfb-option-value").prop({readOnly:!1,tabIndex:0}).removeAttr("title"):_.get("#qfb-options").find(".qfb-option").each(function(){var e=b(this);e.find(".qfb-option-value").val(e.find(".qfb-option-label").val()).prop({readOnly:!0,tabIndex:-1}).attr("title",n.enableCustomizeValuesToChange)})},checkOptionsEmpty:function(){var e=_.get("#qfb-options").closest(a.settingWrap);_.get("#qfb-options").find("> .qfb-option, > .qfb-optgroup").length?(e.find(".qfb-options-empty").hide(),e.find(".qfb-options-inner").fadeIn()):(e.find(".qfb-options-inner").hide(),e.find(".qfb-options-empty").fadeIn())},setDefaultOption:function(){var t,i=d.elements.editing;"checkbox"==i.type||"multiselect"==i.type?_.get("#qfb-options").find(".qfb-option").each(function(){var e=b(this),t=e.data("option");-1!==b.inArray(t.value,i.defaultValue)&&e.addClass("qfb-option-default")}):(t=b(),_.get("#qfb-options").find(".qfb-option").each(function(){var e=b(this);e.data("option").value==i.defaultValue&&(t=t.add(e))}),t.last().addClass("qfb-option-default"))},loadNamePrefixOptions:function(){var e,t=d.elements.editing,i=d.elements.getValue(t,"prefixOptions"),o=d.elements.getValue(t,"prefixCustomiseValues"),a=[],l=0;for(u.nextOptionId=d.elements.getValue(t,"prefixNextOptionId"),b.isArray(i)||(i=[]),e=i.length;l<e;l++)a.push(u.getNamePrefixOptionHtml(b.extend({},i[l],!0)));_.get("#qfb-name-prefix-options").html(a),u.setDefaultNamePrefixOption(),u.checkNamePrefixOptionsEmpty(),_.get("#qfb_customise_name_prefix_values").prop("checked",o),u.customiseNamePrefixOptionValues()},saveNamePrefixOptions:function(){var e=d.elements.editing,a=_.get("#qfb_customise_name_prefix_values").is(":checked"),l="",s=[];_.get("#qfb-name-prefix-options").find("> .qfb-option").each(function(){var e=b(this),t=e.data("option"),i=e.find(".qfb-option-label").val(),o=a?e.find(".qfb-option-value").val():i;t.label=i,t.value=o,s.push(t),e.hasClass("qfb-option-default")&&(l=o)}),e.prefixOptions=s,e.prefixNextOptionId=u.nextOptionId,e.prefixDefaultValue=l,e.prefixCustomiseValues=a},createNamePrefixOption:function(){return b.extend(!0,{id:u.nextOptionId++},n.defaultOptions.select)},getNamePrefixOptionHtml:function(e){var t=b(n.selectOptionHtml),i=t.find(".qfb-option-value");return t.find(".qfb-option-label").val(u.getNamePrefixOptionValue(e,"label")),i.val(u.getNamePrefixOptionValue(e,"value")),_.get("#qfb_customise_name_prefix_values").is(":checked")||i.prop({readOnly:!0,tabIndex:-1}).attr("title",n.enableCustomizeValuesToChange),t.data("option",e),t},setDefaultNamePrefixOption:function(){var t=d.elements.editing,i=b();_.get("#qfb-name-prefix-options").find(".qfb-option").each(function(){var e=b(this);e.data("option").value==t.defaultValue&&(i=i.add(e))}),i.last().addClass("qfb-option-default")},checkNamePrefixOptionsEmpty:function(){var e=_.get("#qfb-name-prefix-options").closest(a.subSettingWrap);_.get("#qfb-name-prefix-options").find("> .qfb-option").length?(e.find(".qfb-options-empty").hide(),e.find(".qfb-options-inner").fadeIn()):(e.find(".qfb-options-inner").hide(),e.find(".qfb-options-empty").fadeIn())},customiseNamePrefixOptionValues:function(){_.get("#qfb_customise_name_prefix_values").is(":checked")?_.get("#qfb-name-prefix-options").find(".qfb-option-value").prop({readOnly:!1,tabIndex:0}).removeAttr("title"):_.get("#qfb-name-prefix-options").find(".qfb-option").each(function(){var e=b(this);e.find(".qfb-option-value").val(e.find(".qfb-option-label").val()).prop({readOnly:!0,tabIndex:-1}).attr("title",n.enableCustomizeValuesToChange)})},showBulkOptions:function(){_.get("#qfb-bulk-options").show()},closeBulkOptions:function(){_.get("#qfb_bulk_options_textarea").val(""),b("#qfb_bulk_options_clear").prop("checked",!1),_.get("#qfb-bulk-options").hide()},loadBulkOptions:function(){var i,o,e=b(this).data("key");e&&("existing"==e?(i=[],o=_.get("#qfb_customise_values").is(":checked"),_.get("#qfb-options").find("> .qfb-option, > .qfb-optgroup").each(function(){var e,t=b(this);t.hasClass("qfb-optgroup")?(i.push('[optgroup label="'+t.find(".qfb-optgroup-label").val()+'"]'),t.find(".qfb-optgroup-options > .qfb-option").each(function(){var e=b(this),t=e.find(".qfb-option-label").val();o&&(t+="|"+e.find(".qfb-option-value").val()),i.push(t)}),i.push("[/optgroup]")):(e=t.find(".qfb-option-label").val(),o&&(e+="|"+t.find(".qfb-option-value").val()),i.push(e))}),_.get("#qfb_bulk_options_textarea").val(i.join("\n"))):"object"==typeof n.bulkOptions[e]&&_.get("#qfb_bulk_options_textarea").val(n.bulkOptions[e].options.join("\n")))},insertBulkOptions:function(){var e=_.get("#qfb_bulk_options_textarea").val();if(e.length){b("#qfb_bulk_options_clear").is(":checked")&&_.get("#qfb-options").empty(),e=e.split("\n");for(var t=_.get("#qfb-options"),i=!1,o=0;o<e.length;o++){var a,l,s,n,c,r=e[o],f=new RegExp('^\\[optgroup label="(.*)"\\]$').exec(r),g="[/optgroup]"==r;null!==f?(a=u.getOptgroupHtml({label:f[1]}),_.get("#qfb-options").append(a),t=a.find(".qfb-optgroup-options")):g?t=_.get("#qfb-options"):(l=u.createOption(),-1<r.indexOf("|")?(n=(s=r.split("|"))[0],c=s[1],i=!0):n=c=r,l.label=n,l.value=c,t.append(u.getOptionHtml(l)))}i&&(_.get("#qfb_customise_values").prop("checked",!0),u.customiseOptionValues())}u.checkOptionsEmpty(),u.closeBulkOptions()},showSettings:function(e){u.editing=e,u.loadSettings(e),_.get("body").css({overflow:"hidden"}).addClass("qfb-popup-open"),_.get("#qfb-option-settings").show(),_.get("#qfb-option-settings").find(".qfb-popup-content").scrollTop(0)},loadSettings:function(e){_.get("#qfb_option_label").val(u.getOptionValue(e,"label")),_.get("#qfb_option_value").val(u.getOptionValue(e,"value")).closest(a.settingWrap)[_.get("#qfb_customise_values").is(":checked")?"show":"hide"](),_.get("#qfb_option_image").val(u.getOptionValue(e,"image")),_.get("#qfb_option_image_selected").val(u.getOptionValue(e,"imageSelected")),_.get("#qfb_option_width").val(u.getOptionValue(e,"width")),_.get("#qfb_option_height").val(u.getOptionValue(e,"height")),d.loadIconOption(_.get("#qfb_option_icon"),u.getOptionValue(e,"icon")),d.loadIconOption(_.get("#qfb_option_icon_selected"),u.getOptionValue(e,"iconSelected"))},saveSettings:function(){var e=u.editing;e.label=_.get("#qfb_option_label").val(),e.value=_.get("#qfb_option_value").val(),e.image=_.get("#qfb_option_image").val(),e.imageSelected=_.get("#qfb_option_image_selected").val(),e.width=_.get("#qfb_option_width").val(),e.height=_.get("#qfb_option_height").val(),e.icon=_.get("#qfb_option_icon").val(),e.iconSelected=_.get("#qfb_option_icon_selected").val();var t=_.get("#qfb-options").find(".qfb-option").filter(function(){return e.id==b(this).data("option").id});t.find(".qfb-option-label").val(e.label),t.find(".qfb-option-value").val(_.get("#qfb_customise_values").is(":checked")?e.value:e.label)},hideSettings:function(){u.editing=null,b(".qtip").hide(),_.get("body").css({overflow:""}).removeClass("qfb-popup-open"),_.get("#qfb-option-settings").hide()},getOptionValue:function(e,t){return a.getProperty(e,t,a.getProperty(n.defaultOptions[d.elements.editing.type],t))},getNamePrefixOptionValue:function(e,t){return a.getProperty(e,t,a.getProperty(n.defaultOptions.select,t))},getOptgroupValue:function(e,t){return a.getProperty(e,t,a.getProperty(n.defaultOptgroups[d.elements.editing.type],t))}};return e.builder.options=u,e}(quform=function(e,u,f,t){"use strict";var p,g=e.core,b=e.builder,d=g.cache,i=u(window),o=["#qfb-element-settings-tabs","#qfb-description-tabs","#qfb-name-tabs","#qfb-custom-class-tabs","#qfb-sub-label-tabs","#qfb-name-prefix-sub-label-tabs","#qfb-name-prefix-custom-class-tabs","#qfb-name-first-sub-label-tabs","#qfb-name-first-custom-class-tabs","#qfb-name-middle-sub-label-tabs","#qfb-name-middle-custom-class-tabs","#qfb-name-last-sub-label-tabs","#qfb-name-last-custom-class-tabs","#qfb-name-suffix-sub-label-tabs","#qfb-name-suffix-custom-class-tabs"].join(","),s=!1,a={items:"> .qfb-element",handle:"> .qfb-element-inner > .qfb-element-type-icon, > .qfb-row-actions > .qfb-row-action-move",placeholder:"qfb-sortable-placeholder",connectWith:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",start:q,stop:h,appendTo:"#qfb-edit-form",helper:m,tolerance:"pointer",cursorAt:{top:-5,left:-5}},n={items:"> .qfb-element-column",handle:"> .qfb-column-actions > .qfb-column-action-move > i",placeholder:"qfb-sortable-column-placeholder",start:function(){u(this).sortable("instance").cancelHelperRemoval=!1},containment:"parent",stop:h,helper:m,tolerance:"pointer",cursorAt:{top:-5,left:-5}},c={items:"> .qfb-element",handle:"> .qfb-element-inner > .qfb-element-type-icon, > .qfb-row-actions > .qfb-row-action-move",placeholder:"qfb-sortable-placeholder",connectWith:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",start:q,stop:h,appendTo:"#qfb-edit-form",helper:m,tolerance:"pointer",cursorAt:{top:-5,left:-5}},l={items:"> .qfb-element",handle:"> .qfb-element-inner > .qfb-element-type-icon, > .qfb-row-actions > .qfb-row-action-move",placeholder:"qfb-sortable-placeholder",connectWith:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",start:q,stop:h,appendTo:"#qfb-edit-form",helper:m,tolerance:"pointer",cursorAt:{top:-5,left:-5}};function r(e){var t=e.data("id");u(".qfb-current-page").removeClass("qfb-current-page k-state-active"),e.addClass("qfb-current-page k-state-active"),u(".qfb-element-page").hide().filter(function(){return u(this).data("id")===t}).show()}function m(e,t){var i=t.data("type"),o=p.getElementById(t.data("id")),a=u('<div class="qfb-sortable-helper">'),l=u('<div class="qfb-sortable-helper-inner qfb-cf">').appendTo(a),s="";return g.isNonEmptyString(i)&&f.elements[i]&&(g.isNonEmptyString(f.elements[i].icon)&&l.append(u('<div class="qfb-sortable-helper-icon">').append(f.elements[i].icon)),g.isNonEmptyString(f.elements[i].name)&&(s=f.elements[i].name)),o&&g.isNonEmptyString(g.getProperty(o,"label"))&&(s=g.getProperty(o,"label")),l.append(u('<div class="qfb-sortable-helper-label">').text(s)),a.css({width:"auto",height:"auto"}),a}function q(){s=!0,u(this).sortable("instance").cancelHelperRemoval=!1}function h(e,t){s=!1;var i,o,a,l=t.item;l.hasClass("qfb-sortable-add-helper")&&(i=l.data("type"),o=l.index(),a=p.getElementById(l.closest(".qfb-element").data("id")),u(".qtip").hide(),l.remove(),i&&f.elements.hasOwnProperty(i)&&a&&p.addElement(i,a,o)),p.sortElements(),b.refreshPreview()}function v(e){for(var t,i=0,o=e.elements.length;i<o;i++)(t=e.elements[i]).id=b.form.nextElementId++,p.insertElement(t,e,t.position,!0),"group"!=t.type&&"row"!=t.type&&"column"!=t.type||v(t)}function y(e){var t=e?"qfbSlideShow":"show",i=e?"qfbSlideHide":"hide";d.get("#qfb_enhanced_upload_enabled").is(":checked")?(d.get("#qfb_enhanced_upload_style").add(d.get("#qfb_button_icon")).add(d.get("#qfb_button_icon_position")).add(d.get("#qfb_upload_list_layout")).add(d.get("#qfb_upload_list_size")).closest(g.settingWrap)[t](),"dropzone"==d.get("#qfb_enhanced_upload_style").val()?(d.get("#qfb_button_icon").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.dropzoneIcon),d.get("#qfb_button_icon_position").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.dropzoneIconPosition),d.get("#qfb_button_style").add(d.get("#qfb_button_size")).add(d.get("#qfb_button_width")).add(d.get("#qfb_button_width_custom")).closest(g.settingWrap)[i]()):(d.get("#qfb_button_icon").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.buttonIcon),d.get("#qfb_button_icon_position").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.buttonIconPosition),d.get("#qfb_button_style").add(d.get("#qfb_button_size")).add(d.get("#qfb_button_width")).closest(g.settingWrap)[t](),"custom"==d.get("#qfb_button_width").val()&&d.get("#qfb_button_width_custom").closest(g.settingWrap)[t]())):d.get("#qfb_enhanced_upload_style").add(d.get("#qfb_button_style")).add(d.get("#qfb_button_size")).add(d.get("#qfb_button_width")).add(d.get("#qfb_button_width_custom")).add(d.get("#qfb_button_icon")).add(d.get("#qfb_button_icon_position")).add(d.get("#qfb_upload_list_layout")).add(d.get("#qfb_upload_list_size")).closest(g.settingWrap)[i]()}function w(e){var t=e?"qfbSlideShow":"show",i=e?"qfbSlideHide":"hide";"v3"===d.get("#qfb_recaptcha_version").val()?(d.get("#qfb_recaptcha_size").add(d.get("#qfb_recaptcha_type")).add(d.get("#qfb_recaptcha_lang")).closest(g.settingWrap)[i](),d.get("#qfb_recaptcha_threshold").add(d.get("#qfb_recaptcha_badge")).closest(g.settingWrap)[t]()):(d.get("#qfb_recaptcha_size").add(d.get("#qfb_recaptcha_type")).add(d.get("#qfb_recaptcha_lang")).closest(g.settingWrap)[t](),d.get("#qfb_recaptcha_threshold").closest(g.settingWrap)[i](),"invisible"===d.get("#qfb_recaptcha_size").val()?d.get("#qfb_recaptcha_badge").closest(g.settingWrap)[t]():d.get("#qfb_recaptcha_badge").closest(g.settingWrap)[i]())}return p={cache:[],datepickers:{},timepickers:{},enhancedUploaders:{},enhancedSelects:{},recaptchas:[],editing:null,columnWidths:{1:100,2:50,3:33.33333333,4:25,5:20,6:16.66666666,7:14.28571428,8:12.5,9:11.11111111,10:10,11:9.09090909,12:8.333333333,13:7.692307692,14:7.142857142,15:6.666666666,16:6.25,17:5.882352941,18:5.555555555,19:5.263157894,20:5},init:function(){d.get("#qfb-page-tabs-nav-wrap").kendoTabStrip(),d.get("#qfb-add-elements-list").kendoTabStrip(),i.on("resize.quform",_.debounce(function(){d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").resize(!0),d.get("#qfb-add-elements-list").data("kendoTabStrip").resize(!0)},250)),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-tab-nav",function(){this!==u(".qfb-current-page")[0]&&(r(u(this)),b.refreshPreview())}),d.get("#qfb-page-tabs-nav").sortable({items:"> .qfb-page-tab-nav",delay:150,axis:"x",stop:function(){p.updatePageTabNavLabels(),p.sortElements(),b.refreshPreview()}}),d.get("#qfb-page-tabs-nav").on("mouseenter",".qfb-page-tab-nav",function(){s&&this!==u(".qfb-current-page")[0]&&(r(u(this)),b.refreshPreview())}),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-action-settings",function(e){e.stopPropagation(),p.showSettings(u(this).closest(".qfb-page-tab-nav").data("id"))}),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-action-duplicate",function(e){e.stopPropagation(),p.duplicatePage(u(this).closest(".qfb-page-tab-nav").data("id"))}),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-action-remove",function(e){e.stopPropagation(),u(".qtip").hide();var t=p.getElementById(u(this).closest(".qfb-page-tab-nav").data("id"));t&&p.removePage(t)}),u(".qfb-element-page > .qfb-child-elements").sortable(a),u(".qfb-element-row > .qfb-child-elements").sortable(n),u(".qfb-element-column > .qfb-child-elements").sortable(c),u(".qfb-element-group > .qfb-child-elements").sortable(l),u(o).tctabs(".qfb-tabs-panel",{tabs:"> .qfb-tabs-nav > li",current:"qfb-current-tab"}),u("#qfb-add-page").click(function(){var e=p.addElement("page");return p.addElement("submit",e,0),p.sortElements(),b.refreshPreview(),!1}),d.get(".qfb-add-element-button").click(function(){p.addElement(u(this).data("type")),p.sortElements(),b.refreshPreview()}),d.get(".qfb-add-element-button").draggable({connectToSortable:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",helper:function(){var e=u(this).data("type"),t=u("<div>").addClass("qfb-sortable-add-helper");return g.isNonEmptyString(e)&&f.elements[e]&&(g.isNonEmptyString(f.elements[e].icon)&&t.append(f.elements[e].icon),g.isNonEmptyString(f.elements[e].name)&&t.append(u("<span>").text(f.elements[e].name)),t.data("type",e)),t},delay:100,scroll:!1,start:function(){s=!1,"object"==typeof document.selection&&document.selection.empty();var e=u(".qfb-child-elements").sortable("option","scroll",!1);setTimeout(function(){e.sortable("option","scroll",!0)},1e3)},appendTo:u("#qfb-edit-form"),cursorAt:{top:-5,left:-5},stop:function(){s=!1}}).disableSelection().on("mousedown",function(){b.activateTabs(0)}),d.get("#qfb-elements").on("click",".qfb-element-action-settings",function(e){e.stopPropagation(),p.showSettings(u(this).closest(".qfb-element").data("id"))}),d.get("#qfb-element-settings").on("click",".qfb-popup-save-button",function(e){e.stopPropagation(),p.saveSettings()&&p.hideSettings(!0)}),d.get("#qfb-element-settings").on("click",".qfb-popup-close-button",function(e){e.stopPropagation(),p.hideSettings()}),d.get("#qfb-elements").on("click",".qfb-row-action-settings",function(e){e.stopPropagation(),p.showSettings(u(this).closest(".qfb-element-row").data("id"))}),d.get("#qfb_row_column_count").add(d.get("#qfb_row_column_size")).change(function(){8<d.get("#qfb_row_column_count").val()?d.get("#qfb-row-column-customise").closest(g.settingWrap).qfbSlideHide(function(){p.populateColumnWidthCustomise()}):(p.populateColumnWidthCustomise(),d.get("#qfb-row-column-customise").closest(g.settingWrap).qfbSlideShow())}),d.get("#qfb-elements").on("click",".qfb-row-action-add-column",function(){var e,t=p.getElementById(u(this).closest(".qfb-element-row").data("id"));!t||(e=p.getRowLayout(t)).length<20&&(e.push(""),p.setRowLayout(t,e),p.sortElements(),b.refreshPreview())}),d.get("#qfb-elements").on("click",".qfb-row-action-remove-column",function(){var e,t=p.getElementById(u(this).closest(".qfb-element-row").data("id"));!t||1<(e=p.getRowLayout(t)).length&&(e.pop(),p.setRowLayout(t,e),p.sortElements(),b.refreshPreview())}),d.get("#qfb-elements").on("click",".qfb-row-action-remove",function(){var e=p.getElementById(u(this).closest(".qfb-element-row").data("id"));e&&confirm(f.confirmRemoveRow)&&p.removeElement(e)}),d.get("#qfb-elements").on("click",".qfb-row-action-duplicate",function(){p.duplicateElement(p.getElementById(u(this).closest(".qfb-element-row").data("id")))}),d.get("#qfb-elements").on("click",".qfb-column-action-remove",function(){var e=u(this),t=p.getElementById(e.closest(".qfb-element-column").data("id")),i=p.getElementById(e.closest(".qfb-element-row").data("id"));t&&i&&p.removeColumn(t,i)}),d.get("#qfb-elements").on("click",".qfb-column-action-duplicate",function(){p.duplicateElement(p.getElementById(u(this).closest(".qfb-element-column").data("id")))}),d.get("#qfb-elements").on("click",".qfb-element-group-empty-add-row",function(){p.addElement("row",p.getElementById(u(this).closest(".qfb-element-group").data("id"))),p.sortElements(),b.refreshPreview()}),u("#qfb-element-settings-prev").click(function(){p.jumpSettings(-1)})[0].onselectstart=function(){return!1},u("#qfb-element-settings-next").click(function(){p.jumpSettings(1)})[0].onselectstart=function(){return!1},d.get("#qfb_label").on("keyup blur",function(){var e=p.editing;e&&(p.setElementSettingsLabel(e),"page"!=e.type&&"group"!=e.type||d.get("#qfb_show_label_in_email").add(d.get("#qfb_show_label_in_entry")).closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_label").val())?"show":"hide"]())}),d.get("#qfb_required").click(function(){d.get("#qfb_message_required").closest(g.settingWrap)[u(this).is(":checked")?"show":"hide"](),p.checkTranslationTabVisibility()}),d.get("#qfb_admin_label").on("keyup blur",function(){var e=p.editing;e&&p.setElementSettingsLabel(e)}),d.get("#qfb_label_position").change(function(){d.get("#qfb_label_width").closest(g.settingWrap)["left"==u(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_tooltip").on("keyup blur",function(){d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap)[u(this).val().length?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_options_layout").add(d.get("#qfb_options_layout_responsive_columns")).change(function(){d.get("#qfb_options_layout_responsive_columns").closest(g.settingWrap)[u.isNumeric(d.get("#qfb_options_layout").val())?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_options_layout_responsive_columns_custom").closest(g.settingWrap)[u.isNumeric(d.get("#qfb_options_layout").val())&&"custom"==d.get("#qfb_options_layout_responsive_columns").val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_options_style").change(function(){d.get("#qfb_options_button_style").add(d.get("#qfb_options_button_size")).add(d.get("#qfb_options_button_width")).add(d.get("#qfb_options_button_icon_position")).closest(g.settingWrap)["button"==d.get("#qfb_options_style").val()?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_options_button_width_custom").closest(g.settingWrap)["custom"==d.get("#qfb_options_button_width").val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_options_button_width").change(function(){d.get("#qfb_options_button_width_custom").closest(g.settingWrap)["custom"==u(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_responsive_columns").change(function(){d.get("#qfb_responsive_columns_custom").closest(g.settingWrap)["custom"==u(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_name_responsive_columns").change(function(){d.get("#qfb_name_responsive_columns_custom").closest(g.settingWrap)["custom"==u(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_enhanced_upload_enabled").add(d.get("#qfb_enhanced_upload_style")).change(function(){y(!0)}),d.get("#qfb_recaptcha_version").add(d.get("#qfb_recaptcha_size")).change(function(){w(!0)}),d.get("#qfb_field_width").add(d.get("#qfb_group_field_width")).add(d.get("#qfb_page_field_width")).change(function(){d.get("#qfb_field_width_custom").closest(g.settingWrap)["custom"==u(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_button_width").change(function(){d.get("#qfb_button_width_custom").closest(g.settingWrap)["custom"==u(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_enhanced_select_enabled").click(function(){"select"===p.editing.type?(d.get("#qfb_enhanced_select_search").closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")&&d.get("#qfb_enhanced_select_search").is(":checked")?"show":"hide"]()):"multiselect"===p.editing.type&&d.get("#qfb_enhanced_select_placeholder").add(d.get("#qfb_enhanced_select_no_results_found")).closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")?"show":"hide"](),p.checkTranslationTabVisibility()}),d.get("#qfb_enhanced_select_search").change(function(){"select"==p.editing.type&&(d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")&&d.get("#qfb_enhanced_select_search").is(":checked")?"show":"hide"](),p.checkTranslationTabVisibility())}),d.get("#qfb_none_option").click(function(){d.get("#qfb_none_option_text").closest(g.settingWrap)[u(this).is(":checked")?"show":"hide"](),p.checkTranslationTabVisibility()}),d.get("#qfb_date_min").on("keyup blur",function(){d.get("#qfb_message_dateTooEarly").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_date_min").val())?"show":"hide"](),p.checkTranslationTabVisibility()}),d.get("#qfb_date_max").on("keyup blur",function(){d.get("#qfb_message_dateTooLate").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_date_max").val())?"show":"hide"](),p.checkTranslationTabVisibility()}),d.get("#qfb_time_min").on("keyup blur",function(){d.get("#qfb_message_timeTooEarly").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_time_min").val())?"show":"hide"](),p.checkTranslationTabVisibility()}),d.get("#qfb_time_max").on("keyup blur",function(){d.get("#qfb_message_timeTooLate").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_time_max").val())?"show":"hide"](),p.checkTranslationTabVisibility()}),d.get("#qfb_name_prefix_enabled").add(d.get("#qfb_name_prefix_required")).add(d.get("#qfb_name_prefix_none_option")).add(d.get("#qfb_name_first_enabled")).add(d.get("#qfb_name_first_required")).add(d.get("#qfb_name_middle_enabled")).add(d.get("#qfb_name_middle_required")).add(d.get("#qfb_name_last_enabled")).add(d.get("#qfb_name_last_required")).add(d.get("#qfb_name_suffix_enabled")).add(d.get("#qfb_name_suffix_required")).click(function(){d.get("#qfb_name_prefix_enabled").is(":checked")&&d.get("#qfb_name_prefix_required").is(":checked")||d.get("#qfb_name_first_enabled").is(":checked")&&d.get("#qfb_name_first_required").is(":checked")||d.get("#qfb_name_middle_enabled").is(":checked")&&d.get("#qfb_name_middle_required").is(":checked")||d.get("#qfb_name_last_enabled").is(":checked")&&d.get("#qfb_name_last_required").is(":checked")||d.get("#qfb_name_suffix_enabled").is(":checked")&&d.get("#qfb_name_suffix_required").is(":checked")?d.get("#qfb_message_required").closest(g.settingWrap).show():d.get("#qfb_message_required").closest(g.settingWrap).hide(),d.get("#qfb_name_prefix_none_option_text").closest(g.settingWrap)[d.get("#qfb_name_prefix_none_option").is(":checked")&&d.get("#qfb_name_prefix_enabled").is(":checked")?"show":"hide"](),p.checkTranslationTabVisibility()}),d.get("#qfb_dynamic_default_value").click(function(){d.get("#qfb_dynamic_key").closest(g.settingWrap)[u(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_max_length").on("keyup blur",function(){d.get("#qfb_message_lengthTooLong").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_max_length").val())?"show":"hide"](),p.checkTranslationTabVisibility()}),d.get("#qfb_show_in_email").click(function(){d.get("#qfb_plain_text_content").closest(g.settingWrap)[u(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_group_style").change(function(){u("#qfb_border_color, #qfb_background_color").closest(g.settingWrap)["bordered"===u(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_upload_minimum_files").on("keyup blur",function(){var e=u(this).val();u.isNumeric(e)&&0<e&&d.get("#qfb_required").prop("checked",!0)}),d.get("#qfb_save_to_server").click(function(){d.get("#qfb_save_path").add(d.get("#qfb_add_to_media_library")).closest(g.settingWrap)[u(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_logic_enabled").click(function(){d.get("#qfb-logic").closest(g.settingWrap)[d.get("#qfb_logic_enabled").is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),u("#qfb-add-logic-rule").click(function(){d.get("#qfb-logic").find(".qfb-logic-rules").append(b.logic.buildLogicRule(b.logic.getNewLogicRule())),d.get("#qfb-logic").find(".qfb-no-logic-rules").remove()}),d.get("#qfb_submit_button_type").change(function(){var e=u(this).val();d.get("#qfb_submit_button_text").add(d.get("#qfb_submit_button_icon")).add(d.get("#qfb_submit_button_icon_position")).closest(g.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_submit_button_image").closest(g.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_submit_button_html").closest(g.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_next_button_type").change(function(){var e=u(this).val();d.get("#qfb_next_button_text").add(d.get("#qfb_next_button_icon")).add(d.get("#qfb_next_button_icon_position")).closest(g.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_next_button_image").closest(g.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_next_button_html").closest(g.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_back_button_type").change(function(){var e=u(this).val();d.get("#qfb_back_button_text").add(d.get("#qfb_back_button_icon")).add(d.get("#qfb_back_button_icon_position")).closest(g.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_back_button_image").closest(g.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_back_button_html").closest(g.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),u.each(["#qfb_submit_button_image","#qfb_next_button_image","#qfb_back_button_image"],function(e,i){d.get(i+"_browse").qfbMediaBrowser({callback:function(e){try{d.get(i).val(e.first().toJSON().url)}catch(t){}}})}),d.get("#qfb-elements").on("click",".qfb-element-action-collapse",function(){return p.collapseGroup(u(this).closest(".qfb-element"),u(this)),!1}),d.get("#qfb-elements").on("click",".qfb-element-action-duplicate",function(){return p.duplicateElement(p.getElementById(u(this).closest(".qfb-element").data("id"))),!1}),d.get("#qfb-elements").on("click",".qfb-element-action-remove",function(){var e=p.getElementById(u(this).closest(".qfb-element").data("id")),t="confirmRemoveElement";if("group"==e.type?t="confirmRemoveGroup":"submit"==e.type&&(t="confirmRemoveSubmit"),e&&confirm(f[t]))return p.removeElement(e),!1}),d.get("#qfb-elements").on("click",".qfb-element-action-required",function(){var e=u(this).closest(".qfb-element"),t=p.getElementById(e.data("id"));return t.required=!t.required,p.setRequiredClass(e,t),b.refreshPreview(),!1}),u.fn.select2&&d.get("#qfb_date_locale").add(d.get("#qfb_time_locale")).select2({theme:"qfb",language:{noResults:function(){return t.noResultsFound}}}),b.setupContainerTooltips(d.get("#qfb-element-settings-tabs")),p.buildCache(),p.initElements(),p.checkEmptyGroups(),u(".qfb-preview-label-content").editable(function(e){return p.savePreviewLabel(e,p.getElementById(u(this).closest(".qfb-element").data("id"))),this.editing=!1},{event:"click.editable",onblur:"submit",onreset:function(e,t){t.revert=g.htmlEntities(t.revert)},placeholder:"",select:!0})},initElements:function(){var a=function(e){for(var t=0,i=e.length;t<i;t++){var o=e[t];p.addToFeatureCaches(o),b.addInsertVariableElement(o),b.logic.addSource(o),b.notifications.addAttachmentSource(o),"group"!=o.type&&"page"!=o.type&&"row"!=o.type&&"column"!=o.type||a(o.elements)}};a(b.form.elements)},insertPage:function(e){b.activateTabs(0);var t=u(f.pageHtml),i=t.find("> .qfb-child-elements");i.attr("id","qfb-child-elements-"+e.id),t.attr("id","qfb-element-"+e.id).data("id",e.id).data("type",e.type).hide(),b.form.elements.push(e),p.cache.push(e);var o=u(f.pageTabNavHtml);o.data("id",e.id),d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").insertBefore(o,d.get("#qfb-add-page-tab")),p.updatePageTabNavLabel(e),d.get("#qfb-elements").append(t),i.sortable(a),b.checkPageButtonSettings(),r(o)},createElement:function(e){var t=null;return e&&f.elements[e]&&f.elements[e].config&&(t=u.extend(!0,{id:b.form.nextElementId++},f.elements[e].config)),t},addElement:function(e,t,i){var o,a,l,s,n=p.createElement(e);return n?(t=t||p.getElementById(u(".qfb-current-page").data("id")),u.isNumeric(i)||(a=(o=t).elements.length,l=a-1,s=a,"page"==o.type&&0<a&&"submit"==o.elements[l].type&&(s=l),i=s),p.insertElement(n,t,i),n):null},insertElement:function(e,t,i,o){switch(e.type){case"page":p.insertPage(e);break;case"row":p.insertRow(e,t,i,o);break;case"column":p.insertColumn(e,t,i,o);break;case"group":p.insertGroup(e,t,i,o);break;default:p.insertField(e,t,i,o)}},insertField:function(t,e,i,o){b.activateTabs(0);var a=u(f.elementHtml);return a.attr("id","qfb-element-"+t.id).data("id",t.id).data("type",t.type).removeClass("qfb-element-text").addClass("qfb-element-"+t.type).find(".qfb-preview-label-content").attr("id","qfb-plc-"+t.id).text(t.label).end().find(".qfb-element-type-icon").html(f.elements[t.type].icon).end().hide(),p.setRequiredClass(a,t),p.insertChild(a,e,i),!0===o?a.show():(a.fadeIn(50),e.elements.splice(i,0,t)),p.cache.push(t),u("#qfb-plc-"+t.id).editable(function(e){return p.savePreviewLabel(e,t),this.editing=!1},{event:"click.editable",onblur:"submit",onreset:function(e,t){t.revert=g.htmlEntities(t.revert)},placeholder:"",select:!0}),p.addToFeatureCaches(t),b.addInsertVariableElement(t),b.logic.addSource(t),b.notifications.addAttachmentSource(t),t},insertGroup:function(t,e,i,o){b.activateTabs(0);var a=u(f.groupHtml);a.find("> .qfb-child-elements").attr("id","qfb-child-elements-"+t.id),a.attr("id","qfb-element-"+t.id).data("id",t.id).data("type","group").removeClass("qfb-element-text").addClass("qfb-element-group").find(".qfb-preview-label-content").attr("id","qfb-plc-"+t.id).text(t.label).end().hide(),p.insertChild(a,e,i),u("#qfb-child-elements-"+t.id).sortable(l),!0===o?a.show():(a.fadeIn(50),e.elements.splice(i,0,t)),p.cache.push(t),u("#qfb-plc-"+t.id).editable(function(e){return p.savePreviewLabel(e,t),this.editing=!1},{event:"click.editable",onblur:"submit",onreset:function(e,t){t.revert=g.htmlEntities(t.revert)},placeholder:"",select:!0})},insertRow:function(e,t,i,o){var a=u(f.rowHtml),l=a.find("> .qfb-child-elements").attr("id","qfb-child-elements-"+e.id);return a.attr("id","qfb-element-"+e.id).data("id",e.id),p.insertChild(a,t,i),o||t.elements.splice(i,0,e),p.cache.push(e),l.sortable(n),0===e.elements.length&&(p.addElement("column",e),p.addElement("column",e)),p.setRowColumnClass(e),e},insertColumn:function(e,t,i,o){var a=u(f.columnHtml),l=a.find("> .qfb-child-elements").attr("id","qfb-child-elements-"+e.id);return a.attr("id","qfb-element-"+e.id).data("id",e.id),p.insertChild(a,t,i),o||t.elements.splice(i,0,e),p.cache.push(e),l.sortable(c),e},insertChild:function(e,t,i){var o=u("#qfb-child-elements-"+t.id);0<i&&i<t.elements.length?o.find("> .qfb-element:nth-child("+i+")").after(e):0===i?o.prepend(e):o.append(e),e.addClass("qfb-element-highlight"),setTimeout(function(){e.removeClass("qfb-element-highlight")},1400)},removeElement:function(i,o){(i.parentId?p.getElementById(i.parentId).elements:b.form.elements).splice(i.position,1),u("#qfb-element-"+i.id).qfbSlideHide(function(){u(this).remove();var e=[i];"group"!=i.type&&"page"!=i.type&&"row"!=i.type&&"column"!=i.type||(e=e.concat(p.getElementChildren(i)));for(var t=0;t<e.length;t++)p.removeFromFeatureCaches(e[t]),b.removeInsertVariableElement(e[t]),b.logic.removeSource(e[t]),b.notifications.removeAttachmentSource(e[t]),p.removeFromCache(e[t]);b.checkPageButtonSettings(),b.logic.checkInvalidLogic(),b.notifications.checkInvalidAttachments(),"function"==typeof o&&o(),p.sortElements(),b.refreshPreview()})},removePage:function(e){var t,i,o;1!=b.form.elements.length?confirm(f.confirmRemovePage)&&(i=(t=u(".qfb-page-tab-nav")).filter(function(){return u(this).data("id")===e.id}),r((o=t.index(i))==t.length-1?t.eq(o-1):t.eq(o+1)),i.remove(),p.updatePageTabNavLabels(),p.removeElement(e)):alert(f.atLeastOnePage)},removeColumn:function(e,t){confirm(f.confirmRemoveColumn)&&(1===t.elements.length?p.removeElement(t):p.removeElement(e,function(){p.setRowLayout(t,p.getRowLayout(t))}))},getElementChildren:function(e){var l=function(e){var t=[];if("group"==e.type||"page"==e.type||"row"==e.type||"column"==e.type)for(var i,o=0,a=e.elements.length;o<a;o++){e.elements[o].parentId==e.id&&(t.push(e.elements[o]),"group"!=e.elements[o].type&&"page"!=e.elements[o].type&&"row"!=e.elements[o].type&&"column"!=e.elements[o].type||(i=l(e.elements[o])).length&&(t=t.concat(i)))}return t};return l(e)},checkInvalidLogic:function(){var o=function(e){for(var t=0,i=e.length;t<i;t++)"object"==typeof e[t].logicRules&&(e[t].logicRules=b.logic.removeInvalidLogicRules(e[t].logicRules)),"group"!=e[t].type&&"page"!=e[t].type&&"row"!=e[t].type&&"column"!=e[t].type||o(e[t].elements)};o(b.form.elements)},duplicatePage:function(e){var t,i=p.getElementById(e);i&&((t=u.extend(!0,{},i)).id=b.form.nextElementId++,p.insertPage(t),v(t)),p.sortElements(),b.refreshPreview()},duplicateElement:function(e){if(e){var t=u.extend(!0,{},e),i=p.getElementById(e.parentId);switch(t.id=b.form.nextElementId++,t.position++,e.type){case"row":p.insertRow(t,i,t.position),v(t);break;case"column":p.insertColumn(t,i,t.position),p.setRowColumnClass(i),v(t);break;case"group":p.insertGroup(t,i,t.position),v(t);break;default:p.insertField(t,i,t.position)}p.sortElements(),b.refreshPreview()}},showSettings:function(e){var t=p.getElementById(e);u(o).each(function(){u(this).data("tabs").click(0)}),p.editing=t,p.loadSettings(t);var i=f.elementSettings;"page"==t.type?i=f.pageSettings:"group"==t.type?i=f.groupSettings:"row"==t.type&&(i=f.rowSettings),d.get("#qfb-element-settings-title").text(i),d.get("#qfb-element-settings-element-icon").html(f.elements[t.type].icon),d.get("#qfb-element-settings-element-label").text(p.getAdminLabel(t)),u(".qfb-element-highlight").removeClass("qfb-element-highlight"),d.get("#qfb-element-"+t.id).addClass("qfb-element-highlight"),d.get("body").css({overflow:"hidden"}).addClass("qfb-popup-open"),d.get("#qfb-element-settings").show(),d.get("#qfb-element-settings-tabs").scrollTop(0)},jumpSettings:function(e){for(var t=0,i=p.cache.length;t<i&&p.editing.id!==p.cache[t].id;t++);var o=t+e;if(o<0?o=i-1:i-1<o&&(o=0),"column"==p.cache[o].type)return e=e<0?e-1:e+1,void p.jumpSettings(e);p.saveSettings()&&p.showSettings(p.cache[o].id)},hideSettings:function(e){!0===e&&b.refreshPreview(),u(".qfb-element-highlight").addClass("qfb-element-highlight-last"),setTimeout(function(){u(".qfb-element-highlight").removeClass("qfb-element-highlight qfb-element-highlight-last")},1400),b.styles.resetStyleSettings(),b.filters.resetFilterSettings(),b.validators.resetValidatorSettings(),p.editing=null,u(".qtip").hide(),d.get("body").css({overflow:""}).removeClass("qfb-popup-open"),d.get("#qfb-element-settings").hide()},loadSettings:function(e){d.get("#qfb-element-settings").find(".qfb-setting").hide(),d.get("#qfb-file-field-width-description").add(d.get("#qfb-button-label-hint")).hide(),d.get("#qfb_button_icon").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.buttonIcon),d.get("#qfb_button_icon_position").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.buttonIconPosition);var t=[];switch(e.type){case"text":case"textarea":case"email":case"date":case"time":case"password":case"captcha":case"group":case"page":t.push(new Option(f.inherit,"inherit")),t.push(new Option(f.field,"field"))}t.push(new Option(f.icon,"icon")),d.get("#qfb_tooltip_type").html(t);var i=[];switch(i.push(new Option(f.inherit,"inherit")),i.push(new Option(f.above,"")),i.push(new Option(f.left,"left")),e.type){case"text":case"textarea":case"email":case"date":case"time":case"password":case"captcha":case"group":case"page":i.push(new Option(f.inside,"inside"))}d.get("#qfb_label_position").html(i);var o,a=[new Option(f.everyone,"")];switch("captcha"!=e.type&&"recaptcha"!=e.type&&(a.push(new Option(f.adminOnly,"admin-only")),a.push(new Option(f.loggedInUsersOnly,"logged-in-only"))),a.push(new Option(f.loggedOutUsersOnly,"logged-out-only")),d.get("#qfb_visibility").html(a),u("#qfb-element-settings-tabs").find("> ul > li").show(),d.get("#qfb-custom-class-tabs").find("> ul").show(),e.type){case"text":case"textarea":case"email":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(p.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(p.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",p.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),p.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),p.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),p.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(p.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(p.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(p.getValue(e,"fieldWidthCustom")),"textarea"===e.type&&d.get("#qfb_enable_editor").prop("checked",p.getValue(e,"enableEditor")).closest(g.settingWrap).show(),d.get("#qfb_custom_class").val(p.getValue(e,"customClass")).closest(g.settingWrap).show(),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(p.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(p.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(p.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(p.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(p.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),p.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),p.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),p.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(p.getValue(e,"labelWidth")),p.loadLogic(),"textarea"===e.type?d.get("#qfb_default_value_textarea").val(p.getValue(e,"defaultValue")).closest(g.settingWrap).show():d.get("#qfb_default_value").val(p.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",p.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(p.getValue(e,"dynamicKey")),d.get("#qfb_max_length").val(p.getValue(e,"maxLength")).closest(g.settingWrap).show(),d.get("#qfb_read_only").prop("checked",p.getValue(e,"readOnly")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",p.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",p.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),b.filters.loadFilters(),b.validators.loadValidators(),d.get("#qfb_message_required").val(p.getValue(e,"messageRequired")),"email"==e.type&&d.get("#qfb_message_emailAddressInvalidFormat").val(p.getValue(e,"messageEmailAddressInvalidFormat")).closest(g.settingWrap).show(),d.get("#qfb_message_lengthTooLong").val(p.getValue(e,"messageLengthTooLong")),"custom"==p.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"left"==p.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),p.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),p.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"maxLength"))&&d.get("#qfb_message_lengthTooLong").closest(g.settingWrap).show();break;case"select":case"checkbox":case"radio":case"multiselect":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),b.options.loadOptions(),"select"==e.type&&d.get("#qfb_none_option").prop("checked",p.getValue(e,"noneOption")).closest(g.settingWrap).show(),d.get("#qfb_description").val(p.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(p.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",p.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),p.getValue(e,"labelIcon")).closest(g.settingWrap).show(),"select"!=e.type&&"multiselect"!=e.type||(d.get("#qfb_field_size").val(p.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(p.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(p.getValue(e,"fieldWidthCustom")),d.get("#qfb_enhanced_select_enabled").prop("checked",p.getValue(e,"enhancedSelectEnabled")).closest(g.settingWrap).show(),"select"==e.type&&d.get("#qfb_enhanced_select_search").prop("checked",p.getValue(e,"enhancedSelectSearch"))),"radio"!=e.type&&"checkbox"!=e.type||(g.setSelectVal(d.get("#qfb_options_layout"),p.getValue(e,"optionsLayout")).closest(g.settingWrap).show(),d.get("#qfb_options_layout_responsive_columns").val(p.getValue(e,"optionsLayoutResponsiveColumns")),d.get("#qfb_options_layout_responsive_columns_custom").val(p.getValue(e,"optionsLayoutResponsiveColumnsCustom")),g.setSelectVal(d.get("#qfb_options_style"),p.getValue(e,"optionsStyle")).closest(g.settingWrap).show(),d.get("#qfb_options_button_style").val(p.getValue(e,"optionsButtonStyle")),d.get("#qfb_options_button_size").val(p.getValue(e,"optionsButtonSize")),d.get("#qfb_options_button_width").val(p.getValue(e,"optionsButtonWidth")),d.get("#qfb_options_button_width_custom").val(p.getValue(e,"optionsButtonWidthCustom")),d.get("#qfb_options_button_icon_position").val(p.getValue(e,"optionsButtonIconPosition"))),d.get("#qfb_custom_class").val(p.getValue(e,"customClass")).closest(g.settingWrap).show(),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),"multiselect"===e.type&&d.get("#qfb_size_attribute").val(p.getValue(e,"sizeAttribute")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_sub_label").val(p.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(p.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(p.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(p.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),p.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),p.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),p.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(p.getValue(e,"labelWidth")),p.loadLogic(),d.get("#qfb_in_array_validator").prop("checked",p.getValue(e,"inArrayValidator")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",p.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(p.getValue(e,"dynamicKey")),"select"!=e.type&&"radio"!=e.type||d.get("#qfb_submit_on_choice").prop("checked",p.getValue(e,"submitOnChoice")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",p.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",p.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(p.getValue(e,"messageRequired")),"select"==e.type&&d.get("#qfb_none_option_text").val(p.getValue(e,"noneOptionText")),"select"!=e.type&&"multiselect"!=e.type||("multiselect"==e.type&&d.get("#qfb_enhanced_select_placeholder").val(p.getValue(e,"enhancedSelectPlaceholder")),d.get("#qfb_enhanced_select_no_results_found").val(p.getValue(e,"enhancedSelectNoResultsFound"))),"custom"==p.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"radio"!=e.type&&"checkbox"!=e.type||(u.isNumeric(p.getValue(e,"optionsLayout"))&&(d.get("#qfb_options_layout_responsive_columns").closest(g.settingWrap).show(),"custom"==p.getValue(e,"optionsLayoutResponsiveColumns")&&d.get("#qfb_options_layout_responsive_columns_custom").closest(g.settingWrap).show()),"button"==p.getValue(e,"optionsStyle")&&(d.get("#qfb_options_button_style").add(d.get("#qfb_options_button_size")).add(d.get("#qfb_options_button_width")).add(d.get("#qfb_options_button_icon_position")).closest(g.settingWrap).show(),"custom"==p.getValue(e,"optionsButtonWidth")&&d.get("#qfb_options_button_width_custom").closest(g.settingWrap).show())),"select"==e.type&&p.getValue(e,"enhancedSelectEnabled")&&d.get("#qfb_enhanced_select_search").closest(g.settingWrap).show(),"select"===e.type?p.getValue(e,"enhancedSelectEnabled")&&p.getValue(e,"enhancedSelectSearch")&&d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap).show():"multiselect"===e.type&&p.getValue(e,"enhancedSelectEnabled")&&(d.get("#qfb_enhanced_select_placeholder").closest(g.settingWrap).show(),d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap).show()),"left"==p.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),p.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),p.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),"select"==e.type&&p.getValue(e,"noneOption")&&d.get("#qfb_none_option_text").closest(g.settingWrap).show();break;case"file":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(p.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(p.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",p.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),p.getValue(e,"labelIcon")).closest(g.settingWrap).show(),d.get("#qfb_enhanced_upload_enabled").prop("checked",p.getValue(e,"enhancedUploadEnabled")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_enhanced_upload_style"),p.getValue(e,"enhancedUploadStyle")).closest(g.settingWrap).show(),d.get("#qfb_button_style").val(p.getValue(e,"buttonStyle")).closest(g.settingWrap).show(),d.get("#qfb_button_size").val(p.getValue(e,"buttonSize")).closest(g.settingWrap).show(),d.get("#qfb_button_width").val(p.getValue(e,"buttonWidth")).closest(g.settingWrap).show(),d.get("#qfb_button_width_custom").val(p.getValue(e,"buttonWidthCustom")),b.loadIconOption(d.get("#qfb_button_icon"),p.getValue(e,"buttonIcon")).closest(g.settingWrap).show(),d.get("#qfb_button_icon_position").val(p.getValue(e,"buttonIconPosition")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_upload_list_layout"),p.getValue(e,"uploadListLayout")).closest(g.settingWrap).show(),d.get("#qfb_upload_list_size").val(p.getValue(e,"uploadListSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(p.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb-file-field-width-description").show(),d.get("#qfb_field_width_custom").val(p.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(p.getValue(e,"customClass")).closest(g.settingWrap).show(),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_sub_label").val(p.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(p.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(p.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(p.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),p.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),p.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),p.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(p.getValue(e,"labelWidth")),p.loadLogic(),d.get("#qfb_upload_minimum_files").val(p.getValue(e,"minimumNumberOfFiles")).closest(g.settingWrap).show(),d.get("#qfb_upload_maximum_files").val(p.getValue(e,"maximumNumberOfFiles")).closest(g.settingWrap).show(),d.get("#qfb_upload_allowed_extensions").val(p.getValue(e,"allowedExtensions")).closest(g.settingWrap).show(),d.get("#qfb_upload_maximum_size").val(p.getValue(e,"maximumFileSize")).closest(g.settingWrap).show(),d.get("#qfb_save_to_server").prop("checked",p.getValue(e,"saveToServer")).closest(g.settingWrap).show(),d.get("#qfb_save_path").val(p.getValue(e,"savePath")),d.get("#qfb_add_to_media_library").prop("checked",p.getValue(e,"addToMediaLibrary")),d.get("#qfb_show_in_email").prop("checked",p.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",p.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),d.get("#qfb_browse_text").val(p.getValue(e,"browseText")).closest(g.settingWrap).show(),d.get("#qfb_message_required").val(p.getValue(e,"messageFileUploadRequired")),d.get("#qfb_message_fileNumRequired").val(p.getValue(e,"messageFileNumRequired")).closest(g.settingWrap).show(),d.get("#qfb_message_fileTooMany").val(p.getValue(e,"messageFileTooMany")).closest(g.settingWrap).show(),d.get("#qfb_message_fileTooBigFilename").val(p.getValue(e,"messageFileTooBigFilename")).closest(g.settingWrap).show(),d.get("#qfb_message_fileTooBig").val(p.getValue(e,"messageFileTooBig")).closest(g.settingWrap).show(),d.get("#qfb_message_fileNotAllowedTypeFilename").val(p.getValue(e,"messageNotAllowedTypeFilename")).closest(g.settingWrap).show(),d.get("#qfb_message_fileNotAllowedType").val(p.getValue(e,"messageNotAllowedType")).closest(g.settingWrap).show(),"custom"==p.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),y(),"custom"==p.getValue(e,"buttonWidth")&&d.get("#qfb_button_width_custom").closest(g.settingWrap).show(),p.getValue(e,"saveToServer")&&d.get("#qfb_save_path").add(d.get("#qfb_add_to_media_library")).closest(g.settingWrap).show(),"left"==p.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),p.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show();break;case"captcha":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(p.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(p.getValue(e,"descriptionAbove")),b.loadIconOption(d.get("#qfb_label_icon"),p.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),p.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),p.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(p.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(p.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(p.getValue(e,"fieldWidthCustom")),d.get("#qfb_captcha_length").val(p.getValue(e,"captchaLength")).closest(g.settingWrap).show(),d.get("#qfb_captcha_width").val(p.getValue(e,"captchaWidth")).closest(g.settingWrap).show(),d.get("#qfb_captcha_height").val(p.getValue(e,"captchaHeight")).closest(g.settingWrap).show(),d.get("#qfb_captcha_bg_color").val(p.getValue(e,"captchaBgColor")).blur().closest(g.settingWrap).show(),d.get("#qfb_captcha_text_color").val(p.getValue(e,"captchaTextColor")).blur().closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_captcha_font"),p.getValue(e,"captchaFont")).closest(g.settingWrap).show(),d.get("#qfb_captcha_min_font_size").val(p.getValue(e,"captchaMinFontSize")).closest(g.settingWrap).show(),d.get("#qfb_captcha_max_font_size").val(p.getValue(e,"captchaMaxFontSize")).closest(g.settingWrap).show(),d.get("#qfb_captcha_min_angle").val(p.getValue(e,"captchaMinAngle")).closest(g.settingWrap).show(),d.get("#qfb_captcha_max_angle").val(p.getValue(e,"captchaMaxAngle")).closest(g.settingWrap).show(),d.get("#qfb_captcha_retina").prop("checked",p.getValue(e,"captchaRetina")).closest(g.settingWrap).show(),d.get("#qfb_custom_class").val(p.getValue(e,"customClass")).closest(g.settingWrap).show(),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(p.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(p.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(p.getValue(e,"subLabelAbove")),d.get("#qfb_tooltip").val(p.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),p.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),p.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),p.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(p.getValue(e,"labelWidth")),p.loadLogic(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),d.get("#qfb_message_required").val(p.getValue(e,"messageRequired")).closest(g.settingWrap).show(),d.get("#qfb_message_captchaNotMatch").val(p.getValue(e,"messageCaptchaNotMatch")).closest(g.settingWrap).show(),"custom"==p.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"left"==p.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show();break;case"recaptcha":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(p.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(p.getValue(e,"descriptionAbove")),g.setSelectVal(d.get("#qfb_recaptcha_version"),p.getValue(e,"recaptchaVersion")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_size"),p.getValue(e,"recaptchaSize")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_type"),p.getValue(e,"recaptchaType")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_theme"),p.getValue(e,"recaptchaTheme")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_badge"),p.getValue(e,"recaptchaBadge")),g.setSelectVal(d.get("#qfb_recaptcha_lang"),p.getValue(e,"recaptchaLang")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_threshold"),p.getValue(e,"recaptchaThreshold")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),p.getValue(e,"labelIcon")).closest(g.settingWrap).show(),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),d.get("#qfb-custom-class-tabs").find("> ul").hide().end().data("tabs").click(1),b.styles.loadStyles(),d.get("#qfb_sub_label").val(p.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(p.getValue(e,"subLabelAbove")),d.get("#qfb_tooltip").val(p.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),p.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),p.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),p.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(p.getValue(e,"labelWidth")),p.loadLogic(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),d.get("#qfb_message_required").val(p.getValue(e,"messageRequired")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaMissingInputSecret").val(p.getValue(e,"messageRecaptchaMissingInputSecret")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaInvalidInputSecret").val(p.getValue(e,"messageRecaptchaInvalidInputSecret")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaMissingInputResponse").val(p.getValue(e,"messageRecaptchaMissingInputResponse")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaInvalidInputResponse").val(p.getValue(e,"messageRecaptchaInvalidInputResponse")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaError").val(p.getValue(e,"messageRecaptchaError")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaScoreTooLow").val(p.getValue(e,"messageRecaptchaScoreTooLow")).closest(g.settingWrap).show(),w();break;case"html":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_html_content").val(p.getValue(e,"content")).closest(g.settingWrap).show(),d.get("#qfb_html_auto_format").prop("checked",p.getValue(e,"autoFormat")).closest(g.settingWrap).show(),window.tinymce&&((o=window.tinymce.get("qfb_html_content"))&&!o.isHidden()&&(o.load(),o.iframeElement&&u(o.iframeElement).height()<100&&o.theme&&o.theme.resizeTo&&o.theme.resizeTo(null,300)),window.switchEditors&&window.getUserSetting&&window.switchEditors.go("qfb_html_content",window.getUserSetting("editor")||"tmce")),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),d.get("#qfb-custom-class-tabs").find("> ul").hide().end().data("tabs").click(1),b.styles.loadStyles(),p.loadLogic(),d.get("#qfb_show_in_email").prop("checked",p.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_plain_text_content").val(p.getValue(e,"plainTextContent")),d.get("#qfb_show_in_entry").prop("checked",p.getValue(e,"showInEntry")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),p.getValue(e,"showInEmail")&&d.get("#qfb_plain_text_content").closest(g.settingWrap).show();break;case"date":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(p.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(p.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",p.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),p.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),p.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),p.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(p.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(p.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(p.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(p.getValue(e,"customClass")).closest(g.settingWrap).show(),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(p.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(p.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(p.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(p.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(p.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),p.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),p.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),p.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(p.getValue(e,"labelWidth")),p.loadLogic(),d.get("#qfb_default_value_date").val(p.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",p.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(p.getValue(e,"dynamicKey")),d.get("#qfb_date_min").val(p.getValue(e,"dateMin")).closest(g.settingWrap).show(),d.get("#qfb_date_max").val(p.getValue(e,"dateMax")),g.setSelectVal(d.get("#qfb_date_view_start"),p.getValue(e,"dateViewStart")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_date_view_depth"),p.getValue(e,"dateViewDepth")).closest(g.settingWrap).show(),d.get("#qfb_date_show_footer").prop("checked",p.getValue(e,"dateShowFooter")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_date_locale"),p.getValue(e,"dateLocale")).trigger("change.select2").closest(g.settingWrap).show(),d.get("#qfb_date_format_js").val(p.getValue(e,"dateFormatJs")).closest(g.settingWrap).show(),d.get("#qfb_date_format").val(p.getValue(e,"dateFormat")).closest(g.settingWrap).show(),d.get("#qfb_date_auto_open").prop("checked",p.getValue(e,"dateAutoOpen")).closest(g.settingWrap).show(),d.get("#qfb_read_only").prop("checked",p.getValue(e,"readOnly")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",p.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",p.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(p.getValue(e,"messageRequired")),d.get("#qfb_message_dateInvalidDate").val(p.getValue(e,"messageDateInvalidDate")).closest(g.settingWrap).show(),d.get("#qfb_message_dateTooEarly").val(p.getValue(e,"messageDateTooEarly")),d.get("#qfb_message_dateTooLate").val(p.getValue(e,"messageDateTooLate")),"custom"==p.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),"left"==p.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),p.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),p.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"dateMin"))&&d.get("#qfb_message_dateTooEarly").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"dateMax"))&&d.get("#qfb_message_dateTooLate").closest(g.settingWrap).show();break;case"time":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(p.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(p.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",p.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),p.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),p.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),p.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(p.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(p.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(p.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(p.getValue(e,"customClass")).closest(g.settingWrap).show(),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(p.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(p.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(p.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(p.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(p.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),p.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),p.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),p.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(p.getValue(e,"labelWidth")),p.loadLogic(),d.get("#qfb_default_value_time").val(p.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",p.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(p.getValue(e,"dynamicKey")),d.get("#qfb_time_min").val(p.getValue(e,"timeMin")).closest(g.settingWrap).show(),d.get("#qfb_time_max").val(p.getValue(e,"timeMax")).closest(g.settingWrap).show(),d.get("#qfb_time_interval").val(p.getValue(e,"timeInterval")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_time_locale"),p.getValue(e,"timeLocale")).trigger("change.select2").closest(g.settingWrap).show(),d.get("#qfb_time_format_js").val(p.getValue(e,"timeFormatJs")).closest(g.settingWrap).show(),d.get("#qfb_time_format").val(p.getValue(e,"timeFormat")).closest(g.settingWrap).show(),d.get("#qfb_time_auto_open").prop("checked",p.getValue(e,"timeAutoOpen")).closest(g.settingWrap).show(),d.get("#qfb_read_only").prop("checked",p.getValue(e,"readOnly")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",p.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",p.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(p.getValue(e,"messageRequired")),d.get("#qfb_message_timeInvalidTime").val(p.getValue(e,"messageTimeInvalidTime")).closest(g.settingWrap).show(),d.get("#qfb_message_timeTooEarly").val(p.getValue(e,"messageTimeTooEarly")),d.get("#qfb_message_timeTooLate").val(p.getValue(e,"messageTimeTooLate")),"custom"==p.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),"left"==p.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),p.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),p.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"timeMin"))&&d.get("#qfb_message_timeTooEarly").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"timeMax"))&&d.get("#qfb_message_timeTooLate").closest(g.settingWrap).show();break;case"password":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(p.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(p.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",p.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),p.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),p.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),p.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(p.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(p.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(p.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(p.getValue(e,"customClass")).closest(g.settingWrap).show(),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(p.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(p.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(p.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(p.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(p.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),p.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),p.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),p.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(p.getValue(e,"labelWidth")),p.loadLogic(),d.get("#qfb_max_length").val(p.getValue(e,"maxLength")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",p.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",p.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(p.getValue(e,"messageRequired")),d.get("#qfb_message_lengthTooLong").val(p.getValue(e,"messageLengthTooLong")),"custom"==p.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"left"==p.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),p.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"maxLength"))&&d.get("#qfb_message_lengthTooLong").closest(g.settingWrap).show();break;case"hidden":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_custom_class").val(p.getValue(e,"customClass")).closest(g.settingWrap).show(),d.get("#qfb-custom-class-tabs").find("> ul").hide(),d.get("#qfb_default_value").val(p.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",p.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(p.getValue(e,"dynamicKey")),d.get("#qfb_show_in_email").prop("checked",p.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",p.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),p.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show();break;case"name":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(p.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(p.getValue(e,"descriptionAbove")),d.get("#qfb_name_prefix_enabled").prop("checked",p.getValue(e,"prefixEnabled")),d.get("#qfb_name_prefix_required").prop("checked",p.getValue(e,"prefixRequired")),b.options.loadNamePrefixOptions(),d.get("#qfb_name_prefix_none_option").prop("checked",p.getValue(e,"prefixNoneOption")),d.get("#qfb_name_prefix_none_option_text").val(p.getValue(e,"prefixNoneOptionText")),d.get("#qfb_name_prefix_sub_label").val(p.getValue(e,"prefixSubLabel")),d.get("#qfb_name_prefix_sub_label_above").val(p.getValue(e,"prefixSubLabelAbove")),d.get("#qfb_name_prefix_custom_class").val(p.getValue(e,"prefixCustomClass")),d.get("#qfb_name_prefix_custom_element_class").val(p.getValue(e,"prefixCustomElementClass")),d.get("#qfb_name_first_enabled").prop("checked",p.getValue(e,"firstEnabled")),d.get("#qfb_name_first_required").prop("checked",p.getValue(e,"firstRequired")),d.get("#qfb_name_first_placeholder").val(p.getValue(e,"firstPlaceholder")),d.get("#qfb_name_first_sub_label").val(p.getValue(e,"firstSubLabel")),d.get("#qfb_name_first_sub_label_above").val(p.getValue(e,"firstSubLabelAbove")),d.get("#qfb_name_first_default_value").val(p.getValue(e,"firstDefaultValue")),d.get("#qfb_name_first_custom_class").val(p.getValue(e,"firstCustomClass")),d.get("#qfb_name_first_custom_element_class").val(p.getValue(e,"firstCustomElementClass")),d.get("#qfb_name_middle_enabled").prop("checked",p.getValue(e,"middleEnabled")),d.get("#qfb_name_middle_required").prop("checked",p.getValue(e,"middleRequired")),d.get("#qfb_name_middle_placeholder").val(p.getValue(e,"middlePlaceholder")),d.get("#qfb_name_middle_sub_label").val(p.getValue(e,"middleSubLabel")),d.get("#qfb_name_middle_sub_label_above").val(p.getValue(e,"middleSubLabelAbove")),d.get("#qfb_name_middle_default_value").val(p.getValue(e,"middleDefaultValue")),d.get("#qfb_name_middle_custom_class").val(p.getValue(e,"middleCustomClass")),d.get("#qfb_name_middle_custom_element_class").val(p.getValue(e,"middleCustomElementClass")),d.get("#qfb_name_last_enabled").prop("checked",p.getValue(e,"lastEnabled")),d.get("#qfb_name_last_required").prop("checked",p.getValue(e,"lastRequired")),d.get("#qfb_name_last_placeholder").val(p.getValue(e,"lastPlaceholder")),d.get("#qfb_name_last_sub_label").val(p.getValue(e,"lastSubLabel")),d.get("#qfb_name_last_sub_label_above").val(p.getValue(e,"lastSubLabelAbove")),d.get("#qfb_name_last_default_value").val(p.getValue(e,"lastDefaultValue")),d.get("#qfb_name_last_custom_class").val(p.getValue(e,"lastCustomClass")),d.get("#qfb_name_last_custom_element_class").val(p.getValue(e,"lastCustomElementClass")),d.get("#qfb_name_suffix_enabled").prop("checked",p.getValue(e,"suffixEnabled")),d.get("#qfb_name_suffix_required").prop("checked",p.getValue(e,"suffixRequired")),d.get("#qfb_name_suffix_placeholder").val(p.getValue(e,"suffixPlaceholder")),d.get("#qfb_name_suffix_sub_label").val(p.getValue(e,"suffixSubLabel")),d.get("#qfb_name_suffix_sub_label_above").val(p.getValue(e,"suffixSubLabelAbove")),d.get("#qfb_name_suffix_default_value").val(p.getValue(e,"suffixDefaultValue")),d.get("#qfb_name_suffix_custom_class").val(p.getValue(e,"suffixCustomClass")),d.get("#qfb_name_suffix_custom_element_class").val(p.getValue(e,"suffixCustomElementClass")),d.get("#qfb-name-tabs").closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),p.getValue(e,"labelIcon")).closest(g.settingWrap).show(),d.get("#qfb_field_size").val(p.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(p.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(p.getValue(e,"fieldWidthCustom")),d.get("#qfb_name_responsive_columns").val(p.getValue(e,"responsiveColumns")).closest(g.settingWrap).show(),d.get("#qfb_name_responsive_columns_custom").val(p.getValue(e,"responsiveColumnsCustom")),d.get("#qfb_custom_class").val(p.getValue(e,"customClass")).closest(g.settingWrap).show(),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_sub_label").val(p.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(p.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(p.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(p.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),p.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),p.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),p.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(p.getValue(e,"labelWidth")),p.loadLogic(),d.get("#qfb_dynamic_default_value").prop("checked",p.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(p.getValue(e,"dynamicKey")),d.get("#qfb_show_in_email").prop("checked",p.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",p.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(p.getValue(e,"messageRequired")),"custom"==p.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"custom"===p.getValue(e,"responsiveColumns")&&d.get("#qfb_name_responsive_columns_custom").closest(g.settingWrap).show(),"left"==p.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(p.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),p.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),p.getValue(e,"prefixEnabled")&&p.getValue(e,"prefixNoneOption")&&d.get("#qfb_name_prefix_none_option_text").closest(g.settingWrap).show(),(d.get("#qfb_name_prefix_enabled").is(":checked")&&d.get("#qfb_name_prefix_required").is(":checked")||d.get("#qfb_name_first_enabled").is(":checked")&&d.get("#qfb_name_first_required").is(":checked")||d.get("#qfb_name_middle_enabled").is(":checked")&&d.get("#qfb_name_middle_required").is(":checked")||d.get("#qfb_name_last_enabled").is(":checked")&&d.get("#qfb_name_last_required").is(":checked")||d.get("#qfb_name_suffix_enabled").is(":checked")&&d.get("#qfb_name_suffix_required").is(":checked"))&&d.get("#qfb_message_required").closest(g.settingWrap).show();break;case"group":case"page":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),"group"==e.type&&(d.get("#qfb_group_title").val(p.getValue(e,"title")).closest(g.settingWrap).show(),d.get("#qfb_group_title_tag").val(p.getValue(e,"titleTag")),d.get("#qfb_group_description").val(p.getValue(e,"description")).closest(g.settingWrap).show()),"page"==e.type&&(d.get("#qfb_page_title").val(p.getValue(e,"title")).closest(g.settingWrap).show(),d.get("#qfb_page_title_tag").val(p.getValue(e,"titleTag")),d.get("#qfb_page_description").val(p.getValue(e,"description")).closest(g.settingWrap).show()),"group"==e.type&&(d.get("#qfb_group_field_size").val(p.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_group_field_width").val(p.getValue(e,"fieldWidth")).closest(g.settingWrap).show()),"page"==e.type&&(d.get("#qfb_page_field_size").val(p.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_page_field_width").val(p.getValue(e,"fieldWidth")).closest(g.settingWrap).show()),d.get("#qfb_field_width_custom").val(p.getValue(e,"fieldWidthCustom")),g.setSelectVal(d.get("#qfb_group_style"),p.getValue(e,"groupStyle")).closest(g.settingWrap).show(),d.get("#qfb_border_color").val(p.getValue(e,"borderColor")).blur(),d.get("#qfb_background_color").val(p.getValue(e,"backgroundColor")).blur(),"group"==e.type&&(d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),d.get("#qfb-custom-class-tabs").find("> ul").hide().end().data("tabs").click(1)),b.styles.loadStyles(),g.setSelectVal(d.get("#qfb_tooltip_type"),p.getValue(e,"tooltipType")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_event"),p.getValue(e,"tooltipEvent")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_label_position"),p.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(p.getValue(e,"labelWidth")),d.get("#qfb_show_label_in_email").prop("checked",p.getValue(e,"showLabelInEmail")).closest(g.settingWrap).show(),d.get("#qfb_show_label_in_entry").prop("checked",p.getValue(e,"showLabelInEntry")).closest(g.settingWrap).show();var l="group"==e.type?"showThisGroup":"showThisPage",s="group"==e.type?"hideThisGroup":"hideThisPage";p.loadLogic(f[l],f[s]),"group"===e.type&&g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show(),"custom"==p.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"bordered"===p.getValue(e,"groupStyle")&&(d.get("#qfb_border_color").closest(g.settingWrap).show(),d.get("#qfb_background_color").closest(g.settingWrap).show()),"left"==p.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show();break;case"submit":d.get("#qfb_label").val(p.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb-button-label-hint").show(),g.setSelectVal(d.get("#qfb_submit_button_type"),p.getValue(e,"submitType")),d.get("#qfb_submit_button_text").val(p.getValue(e,"submitText")),b.loadIconOption(d.get("#qfb_submit_button_icon"),p.getValue(e,"submitIcon")),d.get("#qfb_submit_button_icon_position").val(p.getValue(e,"submitIconPosition")),d.get("#qfb_submit_button_image").val(p.getValue(e,"submitImage")),d.get("#qfb_submit_button_html").val(p.getValue(e,"submitHtml")),g.setSelectVal(d.get("#qfb_next_button_type"),p.getValue(e,"nextType")),d.get("#qfb_next_button_text").val(p.getValue(e,"nextText")),b.loadIconOption(d.get("#qfb_next_button_icon"),p.getValue(e,"nextIcon")),d.get("#qfb_next_button_icon_position").val(p.getValue(e,"nextIconPosition")),d.get("#qfb_next_button_image").val(p.getValue(e,"nextImage")),d.get("#qfb_next_button_html").val(p.getValue(e,"nextHtml")),g.setSelectVal(d.get("#qfb_back_button_type"),p.getValue(e,"backType")),b.loadIconOption(d.get("#qfb_back_button_icon"),p.getValue(e,"backIcon")),d.get("#qfb_back_button_icon_position").val(p.getValue(e,"backIconPosition")),d.get("#qfb_back_button_text").val(p.getValue(e,"backText")),d.get("#qfb_back_button_image").val(p.getValue(e,"backImage")),d.get("#qfb_back_button_html").val(p.getValue(e,"backHtml")),d.get("#qfb_button_style").val(p.getValue(e,"buttonStyle")).closest(g.settingWrap).show(),d.get("#qfb_button_size").val(p.getValue(e,"buttonSize")).closest(g.settingWrap).show(),d.get("#qfb_button_width").val(p.getValue(e,"buttonWidth")).closest(g.settingWrap).show(),d.get("#qfb_button_width_custom").val(p.getValue(e,"buttonWidthCustom")),d.get("#qfb_custom_element_class").val(p.getValue(e,"customElementClass")).closest(g.settingWrap).show(),d.get("#qfb-custom-class-tabs").find("> ul").hide().end().data("tabs").click(1),b.styles.loadStyles(),p.loadLogic(),g.setSelectVal(d.get("#qfb_visibility"),p.getValue(e,"visibility")).closest(g.settingWrap).show();var n=b.isMultiPageForm(),c=p.isOnLastPage(e);n&&!c||(d.get("#qfb_submit_button_type").closest(g.settingWrap).show(),"default"===p.getValue(e,"submitType")?d.get("#qfb_submit_button_text").add(d.get("#qfb_submit_button_icon")).add(d.get("#qfb_submit_button_icon_position")).closest(g.settingWrap).show():"image"===p.getValue(e,"submitType")?d.get("#qfb_submit_button_image").closest(g.settingWrap).show():"html"===p.getValue(e,"submitType")&&d.get("#qfb_submit_button_html").closest(g.settingWrap).show()),n&&!c&&(d.get("#qfb_next_button_type").closest(g.settingWrap).show(),"default"===p.getValue(e,"nextType")?d.get("#qfb_next_button_text").add(d.get("#qfb_next_button_icon")).add(d.get("#qfb_next_button_icon_position")).closest(g.settingWrap).show():"image"===p.getValue(e,"nextType")?d.get("#qfb_next_button_image").closest(g.settingWrap).show():"html"===p.getValue(e,"nextType")&&d.get("#qfb_next_button_html").closest(g.settingWrap).show()),n&&!p.isOnFirstPage(e)&&(d.get("#qfb_back_button_type").closest(g.settingWrap).show(),"default"===p.getValue(e,"backType")?d.get("#qfb_back_button_text").add(d.get("#qfb_back_button_icon")).add(d.get("#qfb_back_button_icon_position")).closest(g.settingWrap).show():"image"===p.getValue(e,"backType")?d.get("#qfb_back_button_image").closest(g.settingWrap).show():"html"===p.getValue(e,"backType")&&d.get("#qfb_back_button_html").closest(g.settingWrap).show()),"custom"==p.getValue(e,"buttonWidth")&&d.get("#qfb_button_width_custom").closest(g.settingWrap).show();break;case"row":g.setSelectVal(d.get("#qfb_row_column_size"),p.getValue(e,"columnSize")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_row_column_count"),e.elements.length).closest(g.settingWrap).show(),p.populateColumnWidthCustomise(),e.elements.length<=8&&d.get("#qfb-row-column-customise").closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_responsive_columns"),p.getValue(e,"responsiveColumns")).closest(g.settingWrap).show(),d.get("#qfb_responsive_columns_custom").val(p.getValue(e,"responsiveColumnsCustom")),"custom"==p.getValue(e,"responsiveColumns")&&d.get("#qfb_responsive_columns_custom").closest(g.settingWrap).show()}d.get("#qfb-element-unique-id").val(b.form.id+"_"+e.id).closest(g.settingWrap).show();var r=d.get("#qfb-element-settings-tabs-nav").find("> li");d.get("#qfb-element-settings-tabs").find("> .qfb-tabs-panel").each(function(e){var t=u(this).find("> .qfb-element-settings-inner > .qfb-settings > .qfb-setting"),i=!1;t.each(function(){if("block"==u(this).css("display"))return!(i=!0)}),i||r.eq(e).hide()})},saveSettings:function(){var e,t=p.editing;switch(d.get("#qfb-element-settings").find(".qfb-validation-error").remove(),d.get("#qfb-element-settings").find(".qfb-field-error").removeClass("qfb-field-error"),t.type){case"text":case"textarea":case"email":t.label=d.get("#qfb_label").val(),t.description=d.get("#qfb_description").val(),t.descriptionAbove=d.get("#qfb_description_above").val(),t.required=d.get("#qfb_required").is(":checked"),t.labelIcon=d.get("#qfb_label_icon").val(),t.fieldIconLeft=d.get("#qfb_field_icon_left").val(),t.fieldIconRight=d.get("#qfb_field_icon_right").val(),t.fieldSize=d.get("#qfb_field_size").val(),t.fieldWidth=d.get("#qfb_field_width").val(),t.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),"textarea"===t.type&&(t.enableEditor=d.get("#qfb_enable_editor").is(":checked")),t.customClass=d.get("#qfb_custom_class").val(),t.customElementClass=d.get("#qfb_custom_element_class").val(),b.styles.saveStyles(),t.placeholder=d.get("#qfb_placeholder").val(),t.subLabel=d.get("#qfb_sub_label").val(),t.subLabelAbove=d.get("#qfb_sub_label_above").val(),t.adminLabel=d.get("#qfb_admin_label").val(),t.tooltip=d.get("#qfb_tooltip").val(),t.tooltipType=d.get("#qfb_tooltip_type").val(),t.tooltipEvent=d.get("#qfb_tooltip_event").val(),t.labelPosition=d.get("#qfb_label_position").val(),t.labelWidth=d.get("#qfb_label_width").val(),p.saveLogic(),"textarea"===t.type?t.defaultValue=d.get("#qfb_default_value_textarea").val():t.defaultValue=d.get("#qfb_default_value").val(),t.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),t.dynamicKey=d.get("#qfb_dynamic_key").val(),t.maxLength=d.get("#qfb_max_length").val(),t.readOnly=d.get("#qfb_read_only").is(":checked"),t.showInEmail=d.get("#qfb_show_in_email").is(":checked"),t.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),t.visibility=d.get("#qfb_visibility").val(),b.filters.saveFilters(),b.validators.saveValidators(),t.messageRequired=d.get("#qfb_message_required").val(),t.messageLengthTooLong=d.get("#qfb_message_lengthTooLong").val(),"email"==t.type&&(t.messageEmailAddressInvalidFormat=d.get("#qfb_message_emailAddressInvalidFormat").val());break;case"select":case"checkbox":case"radio":case"multiselect":t.label=d.get("#qfb_label").val(),b.options.saveOptions(),"select"==t.type&&(t.noneOption=d.get("#qfb_none_option").is(":checked")),t.description=d.get("#qfb_description").val(),t.descriptionAbove=d.get("#qfb_description_above").val(),t.required=d.get("#qfb_required").is(":checked"),t.labelIcon=d.get("#qfb_label_icon").val(),"select"!=t.type&&"multiselect"!=t.type||(t.fieldSize=d.get("#qfb_field_size").val(),t.fieldWidth=d.get("#qfb_field_width").val(),t.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),t.enhancedSelectEnabled=d.get("#qfb_enhanced_select_enabled").is(":checked"),"select"==t.type&&(t.enhancedSelectSearch=d.get("#qfb_enhanced_select_search").is(":checked")),d.get("#qfb_enhanced_select_enabled").is(":checked")?p.enhancedSelects[t.id]=!0:delete p.enhancedSelects[t.id]),"radio"!=t.type&&"checkbox"!=t.type||(t.optionsLayout=d.get("#qfb_options_layout").val(),t.optionsLayoutResponsiveColumns=d.get("#qfb_options_layout_responsive_columns").val(),t.optionsLayoutResponsiveColumnsCustom=d.get("#qfb_options_layout_responsive_columns_custom").val(),t.optionsStyle=d.get("#qfb_options_style").val(),t.optionsButtonStyle=d.get("#qfb_options_button_style").val(),t.optionsButtonSize=d.get("#qfb_options_button_size").val(),t.optionsButtonWidth=d.get("#qfb_options_button_width").val(),t.optionsButtonWidthCustom=d.get("#qfb_options_button_width_custom").val(),t.optionsButtonIconPosition=d.get("#qfb_options_button_icon_position").val()),t.customClass=d.get("#qfb_custom_class").val(),t.customElementClass=d.get("#qfb_custom_element_class").val(),"multiselect"===t.type&&(t.sizeAttribute=d.get("#qfb_size_attribute").val()),b.styles.saveStyles(),t.subLabel=d.get("#qfb_sub_label").val(),t.subLabelAbove=d.get("#qfb_sub_label_above").val(),t.adminLabel=d.get("#qfb_admin_label").val(),t.tooltip=d.get("#qfb_tooltip").val(),t.tooltipType=d.get("#qfb_tooltip_type").val(),t.tooltipEvent=d.get("#qfb_tooltip_event").val(),t.labelPosition=d.get("#qfb_label_position").val(),t.labelWidth=d.get("#qfb_label_width").val(),p.saveLogic(),t.inArrayValidator=d.get("#qfb_in_array_validator").is(":checked"),t.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),t.dynamicKey=d.get("#qfb_dynamic_key").val(),"select"!=t.type&&"radio"!=t.type||(t.submitOnChoice=d.get("#qfb_submit_on_choice").is(":checked")),t.showInEmail=d.get("#qfb_show_in_email").is(":checked"),t.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),t.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),t.messageRequired=d.get("#qfb_message_required").val(),"select"==t.type&&(t.noneOptionText=d.get("#qfb_none_option_text").val()),"select"!=t.type&&"multiselect"!=t.type||("multiselect"==t.type&&(t.enhancedSelectPlaceholder=d.get("#qfb_enhanced_select_placeholder").val()),t.enhancedSelectNoResultsFound=d.get("#qfb_enhanced_select_no_results_found").val());break;case"file":t.label=d.get("#qfb_label").val(),t.description=d.get("#qfb_description").val(),t.descriptionAbove=d.get("#qfb_description_above").val(),t.required=d.get("#qfb_required").is(":checked"),t.labelIcon=d.get("#qfb_label_icon").val(),t.enhancedUploadEnabled=d.get("#qfb_enhanced_upload_enabled").is(":checked"),t.enhancedUploadEnabled?p.enhancedUploaders[t.id]=!0:delete p.enhancedUploaders[t.id],t.enhancedUploadStyle=d.get("#qfb_enhanced_upload_style").val(),t.buttonStyle=d.get("#qfb_button_style").val(),t.buttonSize=d.get("#qfb_button_size").val(),t.buttonWidth=d.get("#qfb_button_width").val(),t.buttonWidthCustom=d.get("#qfb_button_width_custom").val(),t.buttonIcon=d.get("#qfb_button_icon").val(),t.buttonIconPosition=d.get("#qfb_button_icon_position").val(),t.uploadListLayout=d.get("#qfb_upload_list_layout").val(),t.uploadListSize=d.get("#qfb_upload_list_size").val(),t.fieldWidth=d.get("#qfb_field_width").val(),t.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),t.customClass=d.get("#qfb_custom_class").val(),t.customElementClass=d.get("#qfb_custom_element_class").val(),b.styles.saveStyles(),t.subLabel=d.get("#qfb_sub_label").val(),t.subLabelAbove=d.get("#qfb_sub_label_above").val(),t.adminLabel=d.get("#qfb_admin_label").val(),t.tooltip=d.get("#qfb_tooltip").val(),t.tooltipType=d.get("#qfb_tooltip_type").val(),t.tooltipEvent=d.get("#qfb_tooltip_event").val(),t.labelPosition=d.get("#qfb_label_position").val(),t.labelWidth=d.get("#qfb_label_width").val(),p.saveLogic(),t.minimumNumberOfFiles=d.get("#qfb_upload_minimum_files").val(),t.maximumNumberOfFiles=d.get("#qfb_upload_maximum_files").val(),t.allowedExtensions=d.get("#qfb_upload_allowed_extensions").val(),t.maximumFileSize=d.get("#qfb_upload_maximum_size").val(),t.saveToServer=d.get("#qfb_save_to_server").is(":checked"),t.savePath=d.get("#qfb_save_path").val(),t.addToMediaLibrary=d.get("#qfb_add_to_media_library").is(":checked"),t.showInEmail=d.get("#qfb_show_in_email").is(":checked"),t.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),t.visibility=d.get("#qfb_visibility").val(),t.browseText=d.get("#qfb_browse_text").val(),t.messageFileUploadRequired=d.get("#qfb_message_required").val(),t.messageFileNumRequired=d.get("#qfb_message_fileNumRequired").val(),t.messageFileTooMany=d.get("#qfb_message_fileTooMany").val(),t.messageFileTooBigFilename=d.get("#qfb_message_fileTooBigFilename").val(),t.messageFileTooBig=d.get("#qfb_message_fileTooBig").val(),t.messageNotAllowedTypeFilename=d.get("#qfb_message_fileNotAllowedTypeFilename").val(),t.messageNotAllowedType=d.get("#qfb_message_fileNotAllowedType").val();break;case"captcha":t.label=d.get("#qfb_label").val(),t.description=d.get("#qfb_description").val(),t.descriptionAbove=d.get("#qfb_description_above").val(),t.labelIcon=d.get("#qfb_label_icon").val(),t.fieldIconLeft=d.get("#qfb_field_icon_left").val(),t.fieldIconRight=d.get("#qfb_field_icon_right").val(),t.fieldSize=d.get("#qfb_field_size").val(),t.fieldWidth=d.get("#qfb_field_width").val(),t.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),t.captchaLength=d.get("#qfb_captcha_length").val(),t.captchaWidth=d.get("#qfb_captcha_width").val(),t.captchaHeight=d.get("#qfb_captcha_height").val(),t.captchaBgColor=d.get("#qfb_captcha_bg_color").val(),t.captchaBgColorRgba=tinycolor(t.captchaBgColor).toRgb(),t.captchaTextColor=d.get("#qfb_captcha_text_color").val(),t.captchaTextColorRgba=tinycolor(t.captchaTextColor).toRgb(),t.captchaFont=d.get("#qfb_captcha_font").val(),t.captchaMinFontSize=d.get("#qfb_captcha_min_font_size").val(),t.captchaMaxFontSize=d.get("#qfb_captcha_max_font_size").val(),t.captchaMinAngle=d.get("#qfb_captcha_min_angle").val(),t.captchaMaxAngle=d.get("#qfb_captcha_max_angle").val(),t.captchaRetina=d.get("#qfb_captcha_retina").is(":checked"),t.customClass=d.get("#qfb_custom_class").val(),t.customElementClass=d.get("#qfb_custom_element_class").val(),b.styles.saveStyles(),t.placeholder=d.get("#qfb_placeholder").val(),t.subLabel=d.get("#qfb_sub_label").val(),t.subLabelAbove=d.get("#qfb_sub_label_above").val(),t.tooltip=d.get("#qfb_tooltip").val(),t.tooltipType=d.get("#qfb_tooltip_type").val(),t.tooltipEvent=d.get("#qfb_tooltip_event").val(),t.labelPosition=d.get("#qfb_label_position").val(),t.labelWidth=d.get("#qfb_label_width").val(),p.saveLogic(),t.visibility=d.get("#qfb_visibility").val(),t.messageRequired=d.get("#qfb_message_required").val(),t.messageCaptchaNotMatch=d.get("#qfb_message_captchaNotMatch").val();break;case"recaptcha":t.label=d.get("#qfb_label").val(),t.description=d.get("#qfb_description").val(),t.descriptionAbove=d.get("#qfb_description_above").val(),t.recaptchaVersion=d.get("#qfb_recaptcha_version").val(),t.recaptchaSize=d.get("#qfb_recaptcha_size").val(),t.recaptchaType=d.get("#qfb_recaptcha_type").val(),t.recaptchaTheme=d.get("#qfb_recaptcha_theme").val(),t.recaptchaBadge=d.get("#qfb_recaptcha_badge").val(),t.recaptchaLang=d.get("#qfb_recaptcha_lang").val(),t.recaptchaThreshold=d.get("#qfb_recaptcha_threshold").val(),t.labelIcon=d.get("#qfb_label_icon").val(),t.customElementClass=d.get("#qfb_custom_element_class").val(),b.styles.saveStyles(),t.subLabel=d.get("#qfb_sub_label").val(),t.subLabelAbove=d.get("#qfb_sub_label_above").val(),t.tooltip=d.get("#qfb_tooltip").val(),t.tooltipType=d.get("#qfb_tooltip_type").val(),t.tooltipEvent=d.get("#qfb_tooltip_event").val(),t.labelPosition=d.get("#qfb_label_position").val(),t.labelWidth=d.get("#qfb_label_width").val(),p.saveLogic(),t.visibility=d.get("#qfb_visibility").val(),t.messageRequired=d.get("#qfb_message_required").val(),t.messageRecaptchaMissingInputSecret=d.get("#qfb_message_recaptchaMissingInputSecret").val(),t.messageRecaptchaInvalidInputSecret=d.get("#qfb_message_recaptchaInvalidInputSecret").val(),t.messageRecaptchaMissingInputResponse=d.get("#qfb_message_recaptchaMissingInputResponse").val(),t.messageRecaptchaInvalidInputResponse=d.get("#qfb_message_recaptchaInvalidInputResponse").val(),t.messageRecaptchaError=d.get("#qfb_message_recaptchaError").val(),t.messageRecaptchaScoreTooLow=d.get("#qfb_message_recaptchaScoreTooLow").val();break;case"html":t.label=d.get("#qfb_label").val(),!window.tinymce||(e=window.tinymce.get("qfb_html_content"))&&!e.isHidden()&&e.isDirty()&&e.save(),t.content=d.get("#qfb_html_content").val(),t.autoFormat=d.get("#qfb_html_auto_format").is(":checked"),t.customElementClass=d.get("#qfb_custom_element_class").val(),b.styles.saveStyles(),p.saveLogic(),t.showInEmail=d.get("#qfb_show_in_email").is(":checked"),t.plainTextContent=d.get("#qfb_plain_text_content").val(),t.showInEntry=d.get("#qfb_show_in_entry").is(":checked"),t.visibility=d.get("#qfb_visibility").val();break;case"date":t.label=d.get("#qfb_label").val(),t.description=d.get("#qfb_description").val(),t.descriptionAbove=d.get("#qfb_description_above").val(),t.required=d.get("#qfb_required").is(":checked"),t.labelIcon=d.get("#qfb_label_icon").val(),t.fieldIconLeft=d.get("#qfb_field_icon_left").val(),t.fieldIconRight=d.get("#qfb_field_icon_right").val(),t.fieldSize=d.get("#qfb_field_size").val(),t.fieldWidth=d.get("#qfb_field_width").val(),t.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),t.customClass=d.get("#qfb_custom_class").val(),t.customElementClass=d.get("#qfb_custom_element_class").val(),b.styles.saveStyles(),t.placeholder=d.get("#qfb_placeholder").val(),t.subLabel=d.get("#qfb_sub_label").val(),t.subLabelAbove=d.get("#qfb_sub_label_above").val(),t.adminLabel=d.get("#qfb_admin_label").val(),t.tooltip=d.get("#qfb_tooltip").val(),t.tooltipType=d.get("#qfb_tooltip_type").val(),t.tooltipEvent=d.get("#qfb_tooltip_event").val(),t.labelPosition=d.get("#qfb_label_position").val(),t.labelWidth=d.get("#qfb_label_width").val(),p.saveLogic(),t.defaultValue=d.get("#qfb_default_value_date").val(),t.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),t.dynamicKey=d.get("#qfb_dynamic_key").val(),t.dateMin=d.get("#qfb_date_min").val(),t.dateMax=d.get("#qfb_date_max").val(),t.dateViewStart=d.get("#qfb_date_view_start").val(),t.dateViewDepth=d.get("#qfb_date_view_depth").val(),t.dateShowFooter=d.get("#qfb_date_show_footer").is(":checked"),t.dateLocale=d.get("#qfb_date_locale").val(),p.datepickers[t.id]=t.dateLocale,t.dateFormatJs=d.get("#qfb_date_format_js").val(),t.dateFormat=d.get("#qfb_date_format").val(),t.dateAutoOpen=d.get("#qfb_date_auto_open").is(":checked"),t.readOnly=d.get("#qfb_read_only").is(":checked"),t.showInEmail=d.get("#qfb_show_in_email").is(":checked"),t.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),t.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),t.messageRequired=d.get("#qfb_message_required").val(),t.messageDateInvalidDate=d.get("#qfb_message_dateInvalidDate").val(),t.messageDateTooEarly=d.get("#qfb_message_dateTooEarly").val(),t.messageDateTooLate=d.get("#qfb_message_dateTooLate").val(),t.dateLocale&&-1===u.inArray(t.dateLocale,f.loadedPreviewLocales)&&b.loadPreviewLocale(t.dateLocale,function(){f.loadedPreviewLocales.push(t.dateLocale)});break;case"time":t.label=d.get("#qfb_label").val(),t.description=d.get("#qfb_description").val(),t.descriptionAbove=d.get("#qfb_description_above").val(),t.required=d.get("#qfb_required").is(":checked"),t.labelIcon=d.get("#qfb_label_icon").val(),t.fieldIconLeft=d.get("#qfb_field_icon_left").val(),t.fieldIconRight=d.get("#qfb_field_icon_right").val(),t.fieldSize=d.get("#qfb_field_size").val(),t.fieldWidth=d.get("#qfb_field_width").val(),t.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),t.customClass=d.get("#qfb_custom_class").val(),t.customElementClass=d.get("#qfb_custom_element_class").val(),b.styles.saveStyles(),t.placeholder=d.get("#qfb_placeholder").val(),t.subLabel=d.get("#qfb_sub_label").val(),t.subLabelAbove=d.get("#qfb_sub_label_above").val(),t.adminLabel=d.get("#qfb_admin_label").val(),t.tooltip=d.get("#qfb_tooltip").val(),t.tooltipType=d.get("#qfb_tooltip_type").val(),t.tooltipEvent=d.get("#qfb_tooltip_event").val(),t.labelPosition=d.get("#qfb_label_position").val(),t.labelWidth=d.get("#qfb_label_width").val(),p.saveLogic(),t.defaultValue=d.get("#qfb_default_value_time").val(),t.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),t.dynamicKey=d.get("#qfb_dynamic_key").val(),t.timeMin=d.get("#qfb_time_min").val(),t.timeMax=d.get("#qfb_time_max").val(),t.timeInterval=d.get("#qfb_time_interval").val(),t.timeLocale=d.get("#qfb_time_locale").val(),p.timepickers[t.id]=t.timeLocale,t.timeFormatJs=d.get("#qfb_time_format_js").val(),t.timeFormat=d.get("#qfb_time_format").val(),t.timeAutoOpen=d.get("#qfb_time_auto_open").is(":checked"),t.readOnly=d.get("#qfb_read_only").is(":checked"),t.showInEmail=d.get("#qfb_show_in_email").is(":checked"),t.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),t.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),t.messageRequired=d.get("#qfb_message_required").val(),t.messageTimeInvalidTime=d.get("#qfb_message_timeInvalidTime").val(),t.messageTimeTooEarly=d.get("#qfb_message_timeTooEarly").val(),t.messageTimeTooLate=d.get("#qfb_message_timeTooLate").val(),t.timeLocale&&-1===u.inArray(t.timeLocale,f.loadedPreviewLocales)&&b.loadPreviewLocale(t.timeLocale,function(){f.loadedPreviewLocales.push(t.timeLocale)});break;case"password":t.label=d.get("#qfb_label").val(),t.description=d.get("#qfb_description").val(),t.descriptionAbove=d.get("#qfb_description_above").val(),t.required=d.get("#qfb_required").is(":checked"),t.labelIcon=d.get("#qfb_label_icon").val(),t.fieldIconLeft=d.get("#qfb_field_icon_left").val(),t.fieldIconRight=d.get("#qfb_field_icon_right").val(),t.fieldSize=d.get("#qfb_field_size").val(),t.fieldWidth=d.get("#qfb_field_width").val(),t.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),t.customClass=d.get("#qfb_custom_class").val(),t.customElementClass=d.get("#qfb_custom_element_class").val(),b.styles.saveStyles(),t.placeholder=d.get("#qfb_placeholder").val(),t.subLabel=d.get("#qfb_sub_label").val(),t.subLabelAbove=d.get("#qfb_sub_label_above").val(),t.adminLabel=d.get("#qfb_admin_label").val(),t.tooltip=d.get("#qfb_tooltip").val(),t.tooltipType=d.get("#qfb_tooltip_type").val(),t.tooltipEvent=d.get("#qfb_tooltip_event").val(),t.labelPosition=d.get("#qfb_label_position").val(),t.labelWidth=d.get("#qfb_label_width").val(),p.saveLogic(),t.maxLength=d.get("#qfb_max_length").val(),t.showInEmail=d.get("#qfb_show_in_email").is(":checked"),t.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),t.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),t.messageRequired=d.get("#qfb_message_required").val(),t.messageLengthTooLong=d.get("#qfb_message_lengthTooLong").val();break;case"hidden":t.label=d.get("#qfb_label").val(),t.customClass=d.get("#qfb_custom_class").val(),t.defaultValue=d.get("#qfb_default_value").val(),t.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),t.dynamicKey=d.get("#qfb_dynamic_key").val(),t.showInEmail=d.get("#qfb_show_in_email").is(":checked"),t.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),t.visibility=d.get("#qfb_visibility").val();break;case"name":t.label=d.get("#qfb_label").val(),t.description=d.get("#qfb_description").val(),t.descriptionAbove=d.get("#qfb_description_above").val(),t.prefixEnabled=d.get("#qfb_name_prefix_enabled").is(":checked"),t.prefixRequired=d.get("#qfb_name_prefix_required").is(":checked"),b.options.saveNamePrefixOptions(),t.prefixNoneOption=d.get("#qfb_name_prefix_none_option").is(":checked"),t.prefixSubLabel=d.get("#qfb_name_prefix_sub_label").val(),t.prefixSubLabelAbove=d.get("#qfb_name_prefix_sub_label_above").val(),t.prefixCustomClass=d.get("#qfb_name_prefix_custom_class").val(),t.prefixCustomElementClass=d.get("#qfb_name_prefix_custom_element_class").val(),t.firstEnabled=d.get("#qfb_name_first_enabled").is(":checked"),t.firstRequired=d.get("#qfb_name_first_required").is(":checked"),t.firstPlaceholder=d.get("#qfb_name_first_placeholder").val(),t.firstSubLabel=d.get("#qfb_name_first_sub_label").val(),t.firstSubLabelAbove=d.get("#qfb_name_first_sub_label_above").val(),t.firstDefaultValue=d.get("#qfb_name_first_default_value").val(),t.firstCustomClass=d.get("#qfb_name_first_custom_class").val(),t.firstCustomElementClass=d.get("#qfb_name_first_custom_element_class").val(),t.middleEnabled=d.get("#qfb_name_middle_enabled").is(":checked"),t.middleRequired=d.get("#qfb_name_middle_required").is(":checked"),t.middlePlaceholder=d.get("#qfb_name_middle_placeholder").val(),t.middleSubLabel=d.get("#qfb_name_middle_sub_label").val(),t.middleSubLabelAbove=d.get("#qfb_name_middle_sub_label_above").val(),t.middleDefaultValue=d.get("#qfb_name_middle_default_value").val(),t.middleCustomClass=d.get("#qfb_name_middle_custom_class").val(),t.middleCustomElementClass=d.get("#qfb_name_middle_custom_element_class").val(),t.lastEnabled=d.get("#qfb_name_last_enabled").is(":checked"),t.lastRequired=d.get("#qfb_name_last_required").is(":checked"),t.lastPlaceholder=d.get("#qfb_name_last_placeholder").val(),t.lastSubLabel=d.get("#qfb_name_last_sub_label").val(),t.lastSubLabelAbove=d.get("#qfb_name_last_sub_label_above").val(),t.lastDefaultValue=d.get("#qfb_name_last_default_value").val(),t.lastCustomClass=d.get("#qfb_name_last_custom_class").val(),t.lastCustomElementClass=d.get("#qfb_name_last_custom_element_class").val(),t.suffixEnabled=d.get("#qfb_name_suffix_enabled").is(":checked"),t.suffixRequired=d.get("#qfb_name_suffix_required").is(":checked"),t.suffixPlaceholder=d.get("#qfb_name_suffix_placeholder").val(),t.suffixSubLabel=d.get("#qfb_name_suffix_sub_label").val(),t.suffixSubLabelAbove=d.get("#qfb_name_suffix_sub_label_above").val(),t.suffixDefaultValue=d.get("#qfb_name_suffix_default_value").val(),t.suffixCustomClass=d.get("#qfb_name_suffix_custom_class").val(),t.suffixCustomElementClass=d.get("#qfb_name_suffix_custom_element_class").val(),t.labelIcon=d.get("#qfb_label_icon").val(),t.fieldSize=d.get("#qfb_field_size").val(),t.fieldWidth=d.get("#qfb_field_width").val(),t.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),t.responsiveColumns=d.get("#qfb_name_responsive_columns").val(),t.responsiveColumnsCustom=d.get("#qfb_name_responsive_columns_custom").val(),t.customClass=d.get("#qfb_custom_class").val(),t.customElementClass=d.get("#qfb_custom_element_class").val(),b.styles.saveStyles(),t.subLabel=d.get("#qfb_sub_label").val(),t.subLabelAbove=d.get("#qfb_sub_label_above").val(),t.adminLabel=d.get("#qfb_admin_label").val(),t.tooltip=d.get("#qfb_tooltip").val(),t.tooltipType=d.get("#qfb_tooltip_type").val(),t.tooltipEvent=d.get("#qfb_tooltip_event").val(),t.labelPosition=d.get("#qfb_label_position").val(),t.labelWidth=d.get("#qfb_label_width").val(),p.saveLogic(),t.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),t.dynamicKey=d.get("#qfb_dynamic_key").val(),t.showInEmail=d.get("#qfb_show_in_email").is(":checked"),t.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),t.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),t.prefixNoneOptionText=d.get("#qfb_name_prefix_none_option_text").val(),t.messageRequired=d.get("#qfb_message_required").val();break;case"group":case"page":t.label=d.get("#qfb_label").val(),"page"==t.type&&p.updatePageTabNavLabel(t),"group"==t.type&&(t.title=d.get("#qfb_group_title").val(),t.titleTag=d.get("#qfb_group_title_tag").val(),t.description=d.get("#qfb_group_description").val()),"page"==t.type&&(t.title=d.get("#qfb_page_title").val(),t.titleTag=d.get("#qfb_page_title_tag").val(),t.description=d.get("#qfb_page_description").val()),"group"==t.type&&(t.fieldSize=d.get("#qfb_group_field_size").val(),t.fieldWidth=d.get("#qfb_group_field_width").val()),"page"==t.type&&(t.fieldSize=d.get("#qfb_page_field_size").val(),t.fieldWidth=d.get("#qfb_page_field_width").val()),t.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),t.groupStyle=d.get("#qfb_group_style").val(),t.borderColor=d.get("#qfb_border_color").val(),t.backgroundColor=d.get("#qfb_background_color").val(),"group"==t.type&&(t.customElementClass=d.get("#qfb_custom_element_class").val()),b.styles.saveStyles(),t.tooltipType=d.get("#qfb_tooltip_type").val(),t.tooltipEvent=d.get("#qfb_tooltip_event").val(),t.labelPosition=d.get("#qfb_label_position").val(),t.labelWidth=d.get("#qfb_label_width").val(),t.showLabelInEmail=d.get("#qfb_show_label_in_email").is(":checked"),t.showLabelInEntry=d.get("#qfb_show_label_in_entry").is(":checked"),p.saveLogic(),"group"===t.type&&(t.visibility=d.get("#qfb_visibility").val());break;case"submit":t.label=d.get("#qfb_label").val(),b.isMultiPageForm()&&!p.isOnLastPage(t)?(t.submitType=d.get("#qfb_next_button_type").val(),t.submitText=d.get("#qfb_next_button_text").val(),t.submitIcon=d.get("#qfb_next_button_icon").val(),t.submitIconPosition=d.get("#qfb_next_button_icon_position").val(),t.submitImage=d.get("#qfb_next_button_image").val(),t.submitHtml=d.get("#qfb_next_button_html").val(),t.nextType=d.get("#qfb_next_button_type").val(),t.nextText=d.get("#qfb_next_button_text").val(),t.nextIcon=d.get("#qfb_next_button_icon").val(),t.nextIconPosition=d.get("#qfb_next_button_icon_position").val(),t.nextImage=d.get("#qfb_next_button_image").val(),t.nextHtml=d.get("#qfb_next_button_html").val()):(t.submitType=d.get("#qfb_submit_button_type").val(),t.submitText=d.get("#qfb_submit_button_text").val(),t.submitIcon=d.get("#qfb_submit_button_icon").val(),t.submitIconPosition=d.get("#qfb_submit_button_icon_position").val(),t.submitImage=d.get("#qfb_submit_button_image").val(),t.submitHtml=d.get("#qfb_submit_button_html").val(),t.nextType=d.get("#qfb_submit_button_type").val(),t.nextText=d.get("#qfb_submit_button_text").val(),t.nextIcon=d.get("#qfb_submit_button_icon").val(),t.nextIconPosition=d.get("#qfb_submit_button_icon_position").val(),t.nextImage=d.get("#qfb_submit_button_image").val(),t.nextHtml=d.get("#qfb_submit_button_html").val()),t.backType=d.get("#qfb_back_button_type").val(),t.backText=d.get("#qfb_back_button_text").val(),t.backIcon=d.get("#qfb_back_button_icon").val(),t.backIconPosition=d.get("#qfb_back_button_icon_position").val(),t.backImage=d.get("#qfb_back_button_image").val(),t.backHtml=d.get("#qfb_back_button_html").val(),t.buttonStyle=d.get("#qfb_button_style").val(),t.buttonSize=d.get("#qfb_button_size").val(),t.buttonWidth=d.get("#qfb_button_width").val(),t.buttonWidthCustom=d.get("#qfb_button_width_custom").val(),t.customElementClass=d.get("#qfb_custom_element_class").val(),b.styles.saveStyles(),p.saveLogic(),t.visibility=d.get("#qfb_visibility").val();break;case"row":if(!p.saveRowSettings())return!1}return p.updateElementLabel(t),p.setRequiredClass(u("#qfb-element-"+t.id),t),!0},loadLogic:function(e,t){e=e||f.showThisField,t=t||f.hideThisField;var i=p.editing;b.logic.buildLogic([{text:e,value:"1"},{text:t,value:"0"}],[{text:f.ifAllOfTheseRulesMatch,value:"all"},{text:f.ifAnyOfTheseRulesMatch,value:"any"}],p.getValue(i,"logicRules"),d.get("#qfb-logic"),p.getValue(i,"logicAction")?"1":"0",p.getValue(i,"logicMatch")),d.get("#qfb_logic_enabled").prop("checked",p.getValue(i,"logicEnabled")).closest(g.settingWrap).show(),p.getValue(i,"logicEnabled")&&d.get("#qfb-logic").closest(g.settingWrap).show()},saveLogic:function(){var e=p.editing;e.logicEnabled=d.get("#qfb_logic_enabled").is(":checked"),e.logicAction="0"!==d.get("#qfb-logic").find(".qfb-logic-action").val(),e.logicMatch=d.get("#qfb-logic").find(".qfb-logic-match").val(),e.logicRules=b.logic.getLogicRules(d.get("#qfb-logic"))},saveRowSettings:function(){var e=p.editing,t=u("#qfb_row_column_count").val(),i=u.isNumeric(t)?parseInt(t,10):1,o=[],a=0,l=!1,i=g.clamp(i,1,20),s=p.columnWidths[i];return u(".qfb-row-column-width").each(function(){var e=u(this).val();g.isNonEmptyString(e)?u.isNumeric(e)?(e=parseFloat(e),a+=e,o.push(g.toString(e))):(l=!0,u(this).addClass("qfb-field-error")):(a+=s,o.push(""))}),l?(g.addValidationError(d.get("#qfb-row-column-customise").closest(g.settingInputWrap),f.columnWidthMustBeNumeric),!1):100<a?(g.addValidationError(d.get("#qfb-row-column-customise").closest(g.settingInputWrap),f.columnWidthTotalTooHigh),!1):(e.columnSize=d.get("#qfb_row_column_size").val(),e.responsiveColumns=d.get("#qfb_responsive_columns").val(),e.responsiveColumnsCustom=d.get("#qfb_responsive_columns_custom").val(),p.setRowLayout(e,o),!0)},getRowLayout:function(e){for(var t=[],i=0;i<e.elements.length;i++)t.push(e.elements[i].width);return t},setRowLayout:function(e,t){var i=t.length,o=u("#qfb-child-elements-"+e.id).find("> .qfb-element-column").length;if(o<i)for(var a=0;a<i;a++)o-1<a&&p.addElement("column",e);else if(i<o){for(var l=[],s=u(),n=0;n<e.elements.length;n++)if(i-1<n){var c=e.elements[n];if(c.elements.length)for(var r=0;r<c.elements.length;r++)l.push(c.elements[r]),s=s.add(u("#qfb-element-"+c.elements[r].id).detach());u("#qfb-element-"+c.id).remove()}e.elements.splice(i,o-i);for(var f=e.elements[e.elements.length-1],g=u("#qfb-child-elements-"+f.id),b=0;b<l.length;b++)f.elements.push(l[b]);g.append(s)}p.setRowColumnClass(e);for(var d=0;d<t.length;d++)e.elements[d].width=t[d]},setRowColumnClass:function(e){u("#qfb-child-elements-"+e.id).removeClass("qfb-0-columns qfb-1-columns qfb-2-columns qfb-3-columns qfb-4-columns qfb-5-columns qfb-6-columns qfb-7-columns qfb-8-columns qfb-9-columns qfb-10-columns qfb-11-columns qfb-12-columns qfb-13-columns qfb-14-columns qfb-15-columns qfb-16-columns qfb-17-columns qfb-18-columns qfb-19-columns qfb-20-columns").addClass("qfb-"+e.elements.length+"-columns")},populateColumnWidthCustomise:function(){var e,t=p.editing,i=u("#qfb_row_column_count").val(),o=[],i=u.isNumeric(i)?parseInt(i,10):1;i=g.clamp(i,1,20),e=p.columnWidths[i];for(var a=0;a<i;a++){var l,s=u("<input>",{type:"text","class":"qfb-row-column-width",title:f.columnNumber.replace("%d",g.toString(a+1)),placeholder:e,inputmode:"numeric"});t&&"object"==typeof t.elements[a]&&(l=g.toString(t.elements[a].width),g.isNonEmptyString(l)&&i<=8?s.val(l):s.val("")),o.push(s)}d.get("#qfb-row-column-customise").html(o)},savePreviewLabel:function(e,t){t.label=e,p.updateElementLabel(t),b.refreshPreview()},updateElementLabel:function(e){u("#qfb-plc-"+e.id).text(e.label),b.updateInsertVariableElement(e)},getAdminLabel:function(e){return"string"==typeof e.adminLabel&&0<e.adminLabel.length?e.adminLabel:"string"==typeof e.label&&0<e.label.length?e.label:""},getShortenedAdminLabel:function(e){var t=b.shorten(p.getAdminLabel(e)),i=b.form.id+"_"+e.id;return f.adminLabelElementId.replace("%1$s",t).replace("%2$s",i)},setElementSettingsLabel:function(e){var t,i;i=-1<u.inArray(e.type,["text","textarea","email","select","checkbox","radio","multiselect","file","date","time","password","name"])?(t=d.get("#qfb_admin_label").val(),g.isNonEmptyString(t)?t:d.get("#qfb_label").val()):d.get("#qfb_label").val(),d.get("#qfb-element-settings-element-label").text(i)},updatePageTabNavLabel:function(o){u(".qfb-page-tab-nav").each(function(e){var t,i=u(this);o.id===i.data("id")&&(t=g.isNonEmptyString(o.label)?o.label:f.pageTabNavText.replace("%s",e+1),i.find(".qfb-page-tab-nav-label").text(t))}),d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").resize(!0)},updatePageTabNavLabels:function(){u(".qfb-page-tab-nav").each(function(e){var t=u(this),i=p.getElementById(t.data("id")),o=i&&g.isNonEmptyString(i.label)?i.label:f.pageTabNavText.replace("%s",e+1);t.find(".qfb-page-tab-nav-label").text(o)}),d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").resize(!0)},sortElements:function(){var l=function(e,o){o=o||0;var a=[];return e.each(function(e){var t,i=u(this).data("id");!i||(t=p.getElementById(i))&&(t.position=e,t.parentId=o,"group"!=t.type&&"page"!=t.type&&"row"!=t.type&&"column"!=t.type||(t.elements=l(u("#qfb-child-elements-"+t.id).find("> .qfb-element"),t.id)),a.push(t))}),a};b.form.elements=l(u(".qfb-page-tab-nav")),p.buildCache(),p.checkEmptyGroups(),p.squeezeElements()},buildCache:function(){var o=function(e){for(var t=0,i=e.length;t<i;t++)p.cache.push(e[t]),"group"!=e[t].type&&"page"!=e[t].type&&"row"!=e[t].type&&"column"!=e[t].type||o(e[t].elements)};p.cache=[],o(b.form.elements)},removeFromCache:function(e){for(var t=p.cache.length;t--;)if(p.cache[t].id==e.id){p.cache.splice(t,1);break}},addToFeatureCaches:function(e){switch(e.type){case"date":p.datepickers[e.id]=p.getValue(e,"dateLocale");break;case"time":p.timepickers[e.id]=p.getValue(e,"timeLocale");break;case"file":p.getValue(e,"enhancedUploadEnabled")&&(p.enhancedUploaders[e.id]=!0);break;case"recaptcha":p.recaptchas.push(e.id);break;case"select":case"multiselect":p.getValue(e,"enhancedSelectEnabled")&&(p.enhancedSelects[e.id]=!0)}},removeFromFeatureCaches:function(e){delete p.datepickers[e.id],delete p.timepickers[e.id],delete p.enhancedUploaders[e.id],delete p.enhancedSelects[e.id];for(var t=p.recaptchas.length;t--;)p.recaptchas[t]==e.id&&p.recaptchas.splice(t,1)},getElementById:function(e){for(var t=0,i=p.cache.length;t<i;t++)if(p.cache[t].id==e)return p.cache[t];return null},isOnFirstPage:function(e){if(b.form.elements.length)for(var t,i=e.parentId;i;){if((t=p.getElementById(i))&&t.id==b.form.elements[0].id)return!0;i=t.parentId}return!1},isOnLastPage:function(e){if(b.form.elements.length)for(var t,i=e.parentId;i;){if((t=p.getElementById(i))&&t.id==b.form.elements[b.form.elements.length-1].id)return!0;i=t.parentId}return!1},checkEmptyGroups:function(){u(".qfb-element-group").each(function(){var e=u(this);e.toggleClass("qfb-element-group-empty",0===e.find(".qfb-child-elements").children().length)})},squeezeElements:function(){u(".qfb-element").not(".qfb-element-page, .qfb-element-row, .qfb-element-column").each(function(){var e=u(this),t=e.width();e.is(":visible")&&0<t&&(t<300?e.addClass("qfb-pre-squeeze"):e.removeClass("qfb-pre-squeeze"),t<220?e.addClass("qfb-squeeze"):e.removeClass("qfb-squeeze"),t<75?e.addClass("qfb-squeeze-panic"):e.removeClass("qfb-squeeze-panic"))})},collapseGroup:function(e,t){var i=e.find("> .qfb-child-elements"),o=t.find("> i");e.hasClass("qfb-collapsed")?(o.removeClass().addClass("mdi mdi-remove_circle_outline"),t.attr("title",f.collapse),i.qfbSlideShow(function(){e.removeClass("qfb-collapsed"),i.sortable("enable")},{minHeight:40})):(e.addClass("qfb-collapsed"),i.sortable("disable").qfbSlideHide(u.noop,{minHeight:0}),t.attr("title",f.expand),o.removeClass().addClass("mdi mdi-add_circle_outline"))},setRequiredClass:function(e,t){t.required?e.addClass("qfb-element-required"):e.removeClass("qfb-element-required")},checkTranslationTabVisibility:function(){var e=!1;d.get(".qfb-translations").find("> .qfb-setting").each(function(){if("block"==u(this).css("display"))return!(e=!0)}),d.get("#qfb-element-settings-tab-translations")[e?"fadeIn":"fadeOut"]()},getValue:function(e,t){return g.getProperty(e,t,g.getProperty(f.elements[e.type].config,t))}},e.builder.elements=p,e}(quform=function(e,n,s,c){"use strict";var r,f=e.core,g=f.cache,b=n(window),d=n(document),t=!1,i=!1,o=null,u=null,p=!1,l=[];function a(){f.isNonEmptyString(g.get("#qfb_form_loading_type").val())?(g.get("#qfb_form_loading_position").add(g.get("#qfb_form_loading_color")).closest(f.settingWrap).qfbSlideShow(),"custom"==g.get("#qfb_form_loading_type").val()?g.get("#qfb_form_loading_custom").closest(f.settingWrap).qfbSlideShow():g.get("#qfb_form_loading_custom").closest(f.settingWrap).qfbSlideHide(),0<=g.get("#qfb_form_loading_position").val().indexOf("over")?(g.get("#qfb_form_loading_overlay").closest(f.settingWrap).qfbSlideShow(),g.get("#qfb_form_loading_overlay").is(":checked")?g.get("#qfb_form_loading_overlay_color").closest(f.settingWrap).qfbSlideShow():g.get("#qfb_form_loading_overlay_color").closest(f.settingWrap).qfbSlideHide()):g.get("#qfb_form_loading_overlay").add(g.get("#qfb_form_loading_overlay_color")).closest(f.settingWrap).qfbSlideHide()):g.get("#qfb_form_loading_custom").add(g.get("#qfb_form_loading_position")).add(g.get("#qfb_form_loading_color")).add(g.get("#qfb_form_loading_overlay")).add(g.get("#qfb_form_loading_overlay_color")).closest(f.settingWrap).qfbSlideHide()}function m(e){e=!!e;var t=g.get("#qfb_form_theme").val(),i=e?"qfbSlideHide":"hide",o=e?"qfbSlideShow":"show";""===t||"minimal"===t?g.get("#qfb-form-theme-primary-color-tabs").closest(f.settingWrap)[i]():"shine-gradient"===t||"blend-gradient"===t?(g.get("#qfb-form-theme-bootstrap-tip").hide(),g.get("#qfb-form-theme-primary-color-tabs").closest(f.settingWrap)[o](),g.get("#qfb-form-theme-secondary-color-tabs")[o](),g.get("#qfb-form-theme-secondary-color-tab")[i](),g.get("#qfb-form-theme-secondary-color-tab-foreground").click()):"storm"===t||"hollow"===t?(g.get("#qfb-form-theme-bootstrap-tip").hide(),g.get("#qfb-form-theme-primary-color-tabs").closest(f.settingWrap)[o](),g.get("#qfb-form-theme-secondary-color-tab")[i](),g.get("#qfb-form-theme-secondary-color-tabs")[i]()):("bootstrap"===t?g.get("#qfb-form-theme-bootstrap-tip").show():g.get("#qfb-form-theme-bootstrap-tip").hide(),g.get("#qfb-form-theme-primary-color-tabs").closest(f.settingWrap)[o](),g.get("#qfb-form-theme-secondary-color-tabs")[o](),g.get("#qfb-form-theme-secondary-color-tab")[o]())}return r={form:{},savedFormJson:"",init:function(e){r.form=e,"function"==typeof Array.prototype.toJSON&&delete Array.prototype.toJSON,r.refreshPreview(),n("#qfb-form").submit(function(){return!1}),n("#qfb-panels").kendoSplitter({panes:[{collapsible:!0},{collapsible:!0,size:"50%"}],resize:function(){r.elements.squeezeElements()}}),b.on("resize.quform",_.debounce(function(){r.resizeSplitter()},250)),d.on("wp-collapse-menu",function(){r.resizeSplitter()}),g.get("#qfb-tabs").tctabs(".qfb-tabs-panel",{tabs:"> .qfb-tabs-nav > li",current:"qfb-current-tab"}),g.get("#qfb-tabs-icon-form").click(function(){r.activateTabs(0)}),g.get("#qfb-tabs-icon-settings").click(function(){r.activateTabs(1)}),g.get("#qfb-save-form").click(function(){r.save()}),r.elements.init(),r.filters.init(),r.validators.init(),r.notifications.init(),r.confirmations.init(),r.resizeSplitter(),r.savedFormJson=JSON.stringify(r.form),window.onbeforeunload=function(){if(r.update(),r.savedFormJson!==JSON.stringify(r.form))return s.unsavedChanges},g.get("#qfb-top").css({opacity:1}),d.one("tinymce-editor-setup",function(){window.tinymce&&window.tinymce.ui&&window.tinymce.ui.FloatPanel&&(window.tinymce.ui.FloatPanel.zIndex=100007)}),t=!0},onWindowLoad:function(){g.get("#qfb-preview-refresh").click(r.refreshPreview),g.get("#qfb-form-settings-tabs").add(g.get("#qfb-form-style-tabs")).add(g.get("#qfb-form-theme-primary-color-tabs")).add(g.get("#qfb-form-theme-secondary-color-tabs")).add(g.get("#qfb-field-background-color-tabs")).add(g.get("#qfb-field-border-color-tabs")).add(g.get("#qfb-field-text-color-tabs")).add(g.get("#qfb-button-background-color-tabs")).add(g.get("#qfb-button-border-color-tabs")).add(g.get("#qfb-button-text-color-tabs")).add(g.get("#qfb-button-icon-color-tabs")).tctabs(".qfb-tabs-panel",{tabs:"> .qfb-tabs-nav > li",current:"qfb-current-tab"}),g.get("#qfb-wrap-outer").on("click",".qfb-insert-variable",r.openInsertVariableMenu),g.get("#qfb-add-to-website").click(function(){g.get("body").css({overflow:"hidden"}).addClass("qfb-popup-open"),g.get("#qfb-add-to-website-popup").show(),g.get("#qfb-add-to-website-popup").find(".qfb-popup-content").scrollTop(0)}),g.get("#qfb-add-to-website-popup").find(".qfb-popup-close-button").add(g.get("#qfb-add-to-website-popup").find(".qfb-popup-overlay")).click(function(){g.get("#qfb-add-to-website-popup").hide(),g.get("body").css({overflow:""}).removeClass("qfb-popup-open")}),g.get("#qfb_form_name").on("keyup blur",function(){var e=g.get("#qfb_form_name").val(),t=f.isNonEmptyString(e);g.get("#qfb-nav-form-name").text(t?e:"")[t?"fadeIn":"hide"]();var i='[quform id="'+r.form.id+'"'+(t?' name="'+e+'"':"")+"]",o='[quform_popup id="'+r.form.id+'"'+(t?' name="'+e+'"':"")+"]"+s.popupTriggerText+"[/quform_popup]";g.get("#qfb-nav-form-shortcode").val(i).prop("size",i.length),g.get("#qfb-add-shortcode-form").val(i),g.get("#qfb-add-shortcode-popup").val(o),g.get("#qfb-add-php-form").val("<?php echo do_shortcode('"+i+"'); ?>"),g.get("#qfb-add-php-popup").val("<?php echo do_shortcode('"+o+"'); ?>")}),g.get("#qfb-nav-form-shortcode").add(n(".qfb-code-input")).on("click",function(){n(this).focus().select()}),n.fn.select2&&g.get("#qfb_form_locale").select2({theme:"qfb",language:{noResults:function(){return c.noResultsFound}}}),g.get("#qfb_form_locale").change(function(){var e=g.get("#qfb_form_locale").val();f.isNonEmptyString(e)?-1===n.inArray(e,s.loadedPreviewLocales)&&r.loadPreviewLocale(e,function(){s.loadedPreviewLocales.push(e),r.refreshPreview()}):r.refreshPreview()}),g.get("#qfb_form_active").click(function(){g.get("#qfb_form_inactive_message").closest(f.settingWrap)[n(this).is(":checked")?"qfbSlideHide":"qfbSlideShow"]()}),g.get("#qfb_form_error_enabled").click(function(){g.get("#qfb_form_error_title").add(g.get("#qfb_form_error_content")).closest(f.settingWrap)[g.get("#qfb_form_error_enabled").is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_theme").add(g.get("#qfb_form_field_size")).add(g.get("#qfb_form_field_width")).add(g.get("#qfb_form_button_style")).add(g.get("#qfb_form_button_size")).add(g.get("#qfb_form_button_width")).add(g.get("#qfb_form_page_progress_type")).change(function(){r.refreshPreview()}),m(),g.get("#qfb_form_theme").change(function(){m(!0)}),g.get("#qfb_form_responsive_elements").change(function(){g.get("#qfb_form_responsive_elements_custom").closest(f.settingWrap)["custom"==g.get("#qfb_form_responsive_elements").val()?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_responsive_columns").change(function(){g.get("#qfb_form_responsive_columns_custom").closest(f.settingWrap)["custom"==g.get("#qfb_form_responsive_columns").val()?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_width").on("keyup blur",function(){g.get("#qfb_form_position").closest(f.settingWrap)[f.isNonEmptyString(g.get("#qfb_form_width").val())?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_label_position").change(function(){g.get("#qfb_form_label_width").closest(f.settingWrap)["left"==g.get("#qfb_form_label_position").val()?"qfbSlideShow":"qfbSlideHide"](),r.refreshPreview()}),g.get("#qfb_form_label_width").blur(r.refreshPreview),g.get("#qfb_form_field_width").change(function(){g.get("#qfb_form_field_width_custom").closest(f.settingWrap)["custom"==g.get("#qfb_form_field_width").val()?"qfbSlideShow":"qfbSlideHide"](function(){r.refreshPreview()})}),g.get("#qfb_form_button_width").change(function(){g.get("#qfb_form_button_width_custom").closest(f.settingWrap)["custom"==g.get("#qfb_form_button_width").val()?"qfbSlideShow":"qfbSlideHide"](function(){r.refreshPreview()})}),g.get("#qfb_form_submit_button_type").change(function(){var e=n(this).val();g.get("#qfb_form_submit_button_text").add(g.get("#qfb_form_submit_button_icon")).add(g.get("#qfb_form_submit_button_icon_position")).closest(f.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_submit_button_image").closest(f.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_submit_button_html").closest(f.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_back_button_type").change(function(){var e=n(this).val();g.get("#qfb_form_back_button_text").add(g.get("#qfb_form_back_button_icon")).add(g.get("#qfb_form_back_button_icon_position")).closest(f.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_back_button_image").closest(f.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_back_button_html").closest(f.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_next_button_type").change(function(){var e=n(this).val();g.get("#qfb_form_next_button_text").add(g.get("#qfb_form_next_button_icon")).add(g.get("#qfb_form_next_button_icon_position")).closest(f.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_next_button_image").closest(f.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_next_button_html").closest(f.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),n.each(["#qfb_form_submit_button_image","#qfb_form_back_button_image","#qfb_form_next_button_image"],function(e,i){n(i+"_browse").qfbMediaBrowser({callback:function(e){try{n(i).val(e.first().toJSON().url)}catch(t){}}})}),g.get("#qfb_form_loading_type").on("change",a),g.get("#qfb_form_loading_position").on("change",a),g.get("#qfb_form_loading_overlay").on("click",a),g.get("#qfb_form_tooltips_enabled").click(function(){g.get("#qfb_form_tooltips_enabled").is(":checked")?g.get("#qfb_form_tooltip_type").add(g.get("#qfb_form_tooltip_event")).add(g.get("#qfb_form_tooltip_icon")).add(g.get("#qfb_form_tooltip_style")).closest(f.settingWrap).qfbSlideShow():g.get("#qfb_form_tooltip_type").add(g.get("#qfb_form_tooltip_event")).add(g.get("#qfb_form_tooltip_icon")).add(g.get("#qfb_form_tooltip_style")).closest(f.settingWrap).qfbSlideHide()}),n("#qfb-form-db-change-password").click(function(){n(this).closest(f.settingInputWrap).html(s.dbPasswordHtml)}),n("#qfb-form-db-add-column").click(function(){r.addDbColumn()}),g.get("#qfb-form-db-columns").on("click",".qfb-form-db-column .qfb-small-remove-button",function(){r.removeDbColumn(n(this))}),g.get("#qfb_form_db_wordpress").click(function(){g.get("#qfb_form_db_wordpress").is(":checked")?g.get("#qfb_form_db_host").add(g.get("#qfb_form_db_username")).add("#qfb_form_db_password, #qfb-form-db-change-password").add(g.get("#qfb_form_db_database")).closest(f.settingWrap).qfbSlideHide():g.get("#qfb_form_db_host").add(g.get("#qfb_form_db_username")).add("#qfb_form_db_password, #qfb-form-db-change-password").add(g.get("#qfb_form_db_database")).closest(f.settingWrap).qfbSlideShow()}),setTimeout(r.setupTooltips,4),setTimeout(r.setupColorpickers,8),setTimeout(r.setupIconSelectors,12),n.fn.editable&&g.get("#qfb-nav-form-name").editable(function(e){return g.get("#qfb_form_name").val(e.substr(0,64)).trigger("blur"),this.editing=!1},{event:"click.editable",onblur:"submit",onreset:function(e,t){t.revert=f.htmlEntities(t.revert)},placeholder:"",height:"35px"}),g.get("#qfb-preview-size-phone").click(function(){var e=g.get("#qfb-panels").data("kendoSplitter");g.get("#qfb-builder-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-builder-panel")),g.get("#qfb-preview-only").removeClass("qfb-active")),g.get("#qfb-preview-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-preview-panel")),g.get("#qfb-preview-hide").removeClass("qfb-active")),e.size(g.get("#qfb-preview-panel"),"479px")}),g.get("#qfb-preview-size-tablet").click(function(){var e=g.get("#qfb-panels").data("kendoSplitter");g.get("#qfb-builder-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-builder-panel")),g.get("#qfb-preview-only").removeClass("qfb-active")),g.get("#qfb-preview-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-preview-panel")),g.get("#qfb-preview-hide").removeClass("qfb-active")),e.size(g.get("#qfb-preview-panel"),"767px")}),g.get("#qfb-preview-hide").click(function(){var e=g.get("#qfb-panels").data("kendoSplitter");g.get("#qfb-builder-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-builder-panel")),g.get("#qfb-preview-only").removeClass("qfb-active")),g.get("#qfb-preview-panel").hasClass("k-state-collapsed")?(e.expand(g.get("#qfb-preview-panel")),g.get("#qfb-preview-hide").removeClass("qfb-active")):(e.collapse(g.get("#qfb-preview-panel")),g.get("#qfb-preview-hide").addClass("qfb-active"))}),g.get("#qfb-preview-only").click(function(){var e=g.get("#qfb-panels").data("kendoSplitter");g.get("#qfb-preview-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-preview-panel")),g.get("#qfb-preview-hide").removeClass("qfb-active")),g.get("#qfb-builder-panel").hasClass("k-state-collapsed")?(e.expand(g.get("#qfb-builder-panel")),g.get("#qfb-preview-only").removeClass("qfb-active")):(e.collapse(g.get("#qfb-builder-panel")),g.get("#qfb-preview-only").addClass("qfb-active"))}),g.get("#qfb_form_tooltip_style").add(g.get("#qfb_form_tooltip_my")).add(g.get("#qfb_form_tooltip_at")).change(r.updateTooltipStyle),g.get("#qfb_form_tooltip_shadow").add(g.get("#qfb_form_tooltip_rounded")).click(r.updateTooltipStyle),d.on("heartbeat-tick",function(e,t){t&&t.nonces_expired&&t.quformSaveFormNonce&&s.saveFormNonce!==t.quformSaveFormNonce&&(s.saveFormNonce=t.quformSaveFormNonce)}),r.options.onWindowLoad(),r.styles.onWindowLoad()},saveValidation:function(){g.get("#qfb-settings").find(".qfb-validation-error").remove(),g.get("#qfb-settings").find(".qfb-field-error").removeClass("qfb-field-error");var e=[];if(r.form.name.length||e.push({context:g.get("#qfb_form_name"),message:c.thisFieldIsRequired,scrollTarget:g.get("#qfb_form_name").closest(f.settingWrap),tabs:[1,0]}),e.length){f.showFixedMessage(s.correctHighlightedFields,"error");for(var t=0;t<e.length;t++)0===t&&r.activateTabs(e[t].tabs[0],e[t].tabs[1]),f.addValidationError(e[t].context.addClass("qfb-field-error").closest(f.settingInputWrap),e[t].message);return f.scrollTo(e[0].scrollTarget,g.get("#qfb-builder-panel")),!1}return!0},save:function(){i||(i=!0,r.update(),r.saveValidation()?("number"==typeof o&&(clearTimeout(o),o=null),g.get("#qfb-save-form").removeClass("qfb-saving qfb-saved qfb-save-error").addClass("qfb-saving"),n.ajax({type:"POST",url:c.ajaxUrl,data:{action:"quform_save_form",_ajax_nonce:s.saveFormNonce,form:JSON.stringify(r.form)},dataType:"json"}).done(function(e){switch((e=f.sanitizeResponse(e)).type){case"success":r.savedFormJson=JSON.stringify(r.form),g.get("#qfb-preview-unsaved-indicator").hide(),f.showFixedMessage(s.formSaved,"success"),g.get("#qfb-save-form").removeClass("qfb-saving").addClass("qfb-saved"),o=setTimeout(function(){g.get("#qfb-save-form").removeClass("qfb-saved")},2e3);break;case"error":case"invalid":f.showFixedMessage(s.errorSavingForm+"<br>"+e.message,"error"),g.get("#qfb-save-form").removeClass("qfb-saving").addClass("qfb-save-error")}}).fail(function(){f.showFixedMessage(s.errorSavingForm+"<br>"+c.ajaxError,"error"),g.get("#qfb-save-form").removeClass("qfb-saving").addClass("qfb-save-error")}).always(function(){i=!1})):i=!1)},update:function(){var e=r.form;e.name=g.get("#qfb_form_name").val(),e.title=g.get("#qfb_form_title").val(),e.titleTag=g.get("#qfb_form_title_tag").val(),e.description=g.get("#qfb_form_description").val(),e.active=g.get("#qfb_form_active").is(":checked"),e.inactiveMessage=g.get("#qfb_form_inactive_message").val(),e.trashed=!1,e.ajax=g.get("#qfb_form_ajax").is(":checked"),e.saveEntry=g.get("#qfb_form_save_entry").is(":checked"),e.honeypot=g.get("#qfb_form_honeypot").is(":checked"),e.logicAnimation=g.get("#qfb_form_logic_animation").is(":checked"),e.theme=g.get("#qfb_form_theme").val(),e.themePrimaryColor=g.get("#qfb_form_theme_primary_color").val(),e.themeSecondaryColor=g.get("#qfb_form_theme_secondary_color").val(),e.themePrimaryForegroundColor=g.get("#qfb_form_theme_primary_foreground_color").val(),e.themeSecondaryForegroundColor=g.get("#qfb_form_theme_secondary_foreground_color").val(),e.responsiveElements=g.get("#qfb_form_responsive_elements").val(),e.responsiveElementsCustom=g.get("#qfb_form_responsive_elements_custom").val(),e.responsiveColumns=g.get("#qfb_form_responsive_columns").val(),e.responsiveColumnsCustom=g.get("#qfb_form_responsive_columns_custom").val(),e.verticalElementSpacing=g.get("#qfb_form_vertical_element_spacing").val(),e.width=g.get("#qfb_form_width").val(),e.position=g.get("#qfb_form_position").val(),e.previewColor=g.get("#qfb_form_preview_color").val(),r.styles.updateGlobalStyles(),e.labelTextColor=g.get("#qfb_form_label_text_color").val(),e.labelPosition=g.get("#qfb_form_label_position").val(),e.labelWidth=g.get("#qfb_form_label_width").val(),e.requiredText=g.get("#qfb_form_required_text").val(),e.requiredTextColor=g.get("#qfb_form_required_text_color").val(),e.fieldSize=g.get("#qfb_form_field_size").val(),e.fieldWidth=g.get("#qfb_form_field_width").val(),e.fieldWidthCustom=g.get("#qfb_form_field_width_custom").val(),e.fieldBackgroundColor=g.get("#qfb_form_field_background_color").val(),e.fieldBackgroundColorHover=g.get("#qfb_form_field_background_color_hover").val(),e.fieldBackgroundColorFocus=g.get("#qfb_form_field_background_color_focus").val(),e.fieldBorderColor=g.get("#qfb_form_field_border_color").val(),e.fieldBorderColorHover=g.get("#qfb_form_field_border_color_hover").val(),e.fieldBorderColorFocus=g.get("#qfb_form_field_border_color_focus").val(),e.fieldTextColor=g.get("#qfb_form_field_text_color").val(),e.fieldTextColorHover=g.get("#qfb_form_field_text_color_hover").val(),e.fieldTextColorFocus=g.get("#qfb_form_field_text_color_focus").val(),e.fieldPlaceholderStyles=g.get("#qfb_form_field_placeholder_styles").val(),e.buttonStyle=g.get("#qfb_form_button_style").val(),e.buttonSize=g.get("#qfb_form_button_size").val(),e.buttonWidth=g.get("#qfb_form_button_width").val(),e.buttonWidthCustom=g.get("#qfb_form_button_width_custom").val(),e.buttonAnimation=g.get("#qfb_form_button_animation").val(),e.buttonBackgroundColor=g.get("#qfb_form_button_background_color").val(),e.buttonBackgroundColorHover=g.get("#qfb_form_button_background_color_hover").val(),e.buttonBackgroundColorActive=g.get("#qfb_form_button_background_color_active").val(),e.buttonBorderColor=g.get("#qfb_form_button_border_color").val(),e.buttonBorderColorHover=g.get("#qfb_form_button_border_color_hover").val(),e.buttonBorderColorActive=g.get("#qfb_form_button_border_color_active").val(),e.buttonTextColor=g.get("#qfb_form_button_text_color").val(),e.buttonTextColorHover=g.get("#qfb_form_button_text_color_hover").val(),e.buttonTextColorActive=g.get("#qfb_form_button_text_color_active").val(),e.buttonIconColor=g.get("#qfb_form_button_icon_color").val(),e.buttonIconColorHover=g.get("#qfb_form_button_icon_color_hover").val(),e.buttonIconColorActive=g.get("#qfb_form_button_icon_color_active").val(),e.submitType=g.get("#qfb_form_submit_button_type").val(),e.submitText=g.get("#qfb_form_submit_button_text").val(),e.submitIcon=g.get("#qfb_form_submit_button_icon").val(),e.submitIconPosition=g.get("#qfb_form_submit_button_icon_position").val(),e.submitImage=g.get("#qfb_form_submit_button_image").val(),e.submitHtml=g.get("#qfb_form_submit_button_html").val(),e.nextType=g.get("#qfb_form_next_button_type").val(),e.nextText=g.get("#qfb_form_next_button_text").val(),e.nextIcon=g.get("#qfb_form_next_button_icon").val(),e.nextIconPosition=g.get("#qfb_form_next_button_icon_position").val(),e.nextImage=g.get("#qfb_form_next_button_image").val(),e.nextHtml=g.get("#qfb_form_next_button_html").val(),e.backType=g.get("#qfb_form_back_button_type").val(),e.backText=g.get("#qfb_form_back_button_text").val(),e.backIcon=g.get("#qfb_form_back_button_icon").val(),e.backIconPosition=g.get("#qfb_form_back_button_icon_position").val(),e.backImage=g.get("#qfb_form_back_button_image").val(),e.backHtml=g.get("#qfb_form_back_button_html").val(),e.pageProgressType=g.get("#qfb_form_page_progress_type").val(),e.loadingType=g.get("#qfb_form_loading_type").val(),e.loadingCustom=g.get("#qfb_form_loading_custom").val(),e.loadingPosition=g.get("#qfb_form_loading_position").val(),e.loadingColor=g.get("#qfb_form_loading_color").val(),e.loadingOverlay=g.get("#qfb_form_loading_overlay").is(":checked"),e.loadingOverlayColor=g.get("#qfb_form_loading_overlay_color").val(),e.tooltipsEnabled=g.get("#qfb_form_tooltips_enabled").is(":checked"),e.tooltipType=g.get("#qfb_form_tooltip_type").val(),e.tooltipEvent=g.get("#qfb_form_tooltip_event").val(),e.tooltipIcon=g.get("#qfb_form_tooltip_icon").val(),e.tooltipStyle=g.get("#qfb_form_tooltip_style").val(),e.tooltipCustom=g.get("#qfb_form_tooltip_custom").val(),e.tooltipMy=g.get("#qfb_form_tooltip_my").val(),e.tooltipAt=g.get("#qfb_form_tooltip_at").val(),e.tooltipShadow=g.get("#qfb_form_tooltip_shadow").is(":checked"),e.tooltipRounded=g.get("#qfb_form_tooltip_rounded").is(":checked"),e.tooltipClasses=r.getTooltipClasses().join(" "),e.errorsPosition=g.get("#qfb_form_errors_position").val(),e.errorsIcon=g.get("#qfb_form_errors_icon").val(),e.errorEnabled=g.get("#qfb_form_error_enabled").is(":checked"),e.errorTitle=g.get("#qfb_form_error_title").val(),e.errorContent=g.get("#qfb_form_error_content").val(),e.locale=g.get("#qfb_form_locale").val(),e.rtl=g.get("#qfb_form_rtl").val(),e.dateFormatJs=g.get("#qfb_form_date_format_js").val(),e.timeFormatJs=g.get("#qfb_form_time_format_js").val(),e.dateTimeFormatJs=g.get("#qfb_form_date_time_format_js").val(),e.dateFormat=g.get("#qfb_form_date_format").val(),e.timeFormat=g.get("#qfb_form_time_format").val(),e.dateTimeFormat=g.get("#qfb_form_date_time_format").val(),e.messageRequired=g.get("#qfb_form_message_required").val(),e.pageProgressNumbersText=g.get("#qfb_form_page_progress_numbers_text").val();var t=f.getProperty(e,"databasePassword"),t=f.isNonEmptyString(t)?t:"";if(e.databaseEnabled=g.get("#qfb_form_db_enabled").is(":checked"),e.databaseWordpress=g.get("#qfb_form_db_wordpress").is(":checked"),e.databaseHost=g.get("#qfb_form_db_host").val(),e.databaseUsername=g.get("#qfb_form_db_username").val(),e.databaseDatabase=g.get("#qfb_form_db_database").val(),e.databaseTable=g.get("#qfb_form_db_table").val(),n("#qfb_form_db_password").length?e.databasePassword=n("#qfb_form_db_password").val():e.databasePassword=t,r.updateDbFields(),e.hasDatepicker=f.isNonEmptyObject(r.elements.datepickers),e.hasTimepicker=f.isNonEmptyObject(r.elements.timepickers),e.hasEnhancedUploader=f.isNonEmptyObject(r.elements.enhancedUploaders),e.hasEnhancedSelect=f.isNonEmptyObject(r.elements.enhancedSelects),e.locales=[],f.isNonEmptyString(e.locale)&&e.locales.push(e.locale),e.hasDatepicker)for(var i in r.elements.datepickers)r.elements.datepickers.hasOwnProperty(i)&&e.locales.push(r.elements.datepickers[i]);if(e.hasTimepicker)for(var o in r.elements.timepickers)r.elements.timepickers.hasOwnProperty(o)&&e.locales.push(r.elements.timepickers[o])},insertAtCursor:function(e,t){var i,o,a,l,s;return document.selection?(e.focus(),document.selection.createRange().text=t):e.selectionStart||0===e.selectionStart?(l=e.value,i=e.selectionStart,o=e.selectionEnd,a=e.scrollTop,e.value=l.substring(0,i)+t+l.substring(o,l.length),e.selectionStart=i+t.length,e.selectionEnd=i+t.length,e.scrollTop=a):e.value+=t,e.focus(),document.createEvent?((s=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.dispatchEvent(s)):e.fireEvent&&e.fireEvent("onchange"),!0},openInsertVariableMenu:function(e){e.preventDefault(),e.stopPropagation(),r.closeInsertVariableMenu();var l=n(this),t=l.hasClass("qfb-insert-variable-pre-process")?g.get("#qfb-insert-variable-pre-process"):g.get("#qfb-insert-variable"),i=t.outerHeight(),o=l.offset().top-b.scrollTop()+l.outerHeight()/2-i/2,a=l.offset().left+l.outerWidth(),s="auto";o<42?o=42:o+i>b.height()-10&&(o="auto",s=10),l.addClass("qfb-active"),t.css({top:o,left:a,bottom:s}).fadeIn(200),g.get("#qfb-wrap-outer").one("click.insert-variable",".qfb-variable",function(e){e.preventDefault();var t,i=l.data("target-id"),o=i&&window.tinymce?window.tinymce.get(i):null,a=f.toString(n(this).data("tag"))||"";a.length&&(o&&!o.isHidden()?o.execCommand("mceInsertContent",!1,a):(t=n("#"+i)).length&&r.insertAtCursor(t[0],a))}),d.one("click.close-insert-variable",r.closeInsertVariableMenu)},closeInsertVariableMenu:function(){n(".qfb-insert-variable").removeClass("qfb-active"),g.get("#qfb-insert-variable").add(g.get("#qfb-insert-variable-pre-process")).scrollTop(0).hide(),g.get("#qfb-wrap-outer").off("click.insert-variable"),d.off("click.close-insert-variable")},addInsertVariableElement:function(e){var t,i;"html"!==e.type&&"group"!==e.type&&"page"!==e.type&&"submit"!==e.type&&"row"!==e.type&&"column"!==e.type&&(t=r.shorten(r.elements.getAdminLabel(e)),i=r.form.id+"_"+e.id,g.get("#qfb-insert-variable-element").append(n('<div class="qfb-variable">').data({tag:"{element|id:"+e.id+"|"+t+"}",id:e.id}).html([n('<span class="qfb-variable-label">').text(t),n('<span class="qfb-variable-identifier">').text("("+i+")")])))},updateInsertVariableElement:function(e){var t=r.shorten(r.elements.getAdminLabel(e));g.get("#qfb-insert-variable-element").find(".qfb-variable").filter(function(){return n(this).data("id")===e.id}).data({tag:"{element|id:"+e.id+"|"+t+"}",id:e.id}).find(".qfb-variable-label").text(t)},removeInsertVariableElement:function(e){g.get("#qfb-insert-variable-element").find(".qfb-variable").filter(function(){return n(this).data("id")===e.id}).remove()},shorten:function(e,t,i){t=t||30,i=i||"...";var o=Math.floor(t/2);return e.length>t&&(e=e.slice(0,o-1)+i+e.slice(-o)),e},updateTooltipStyle:function(){"custom"==g.get("#qfb_form_tooltip_style").val()?(g.get("#qfb-tooltip-example-wrap").qfbSlideHide(),g.get("#qfb_form_tooltip_custom").closest(f.subSettingWrap).qfbSlideShow()):(n.fn.qtip&&g.get("#qfb-tooltip-example").qtip("destroy").qtip({content:s.exampleTooltip,style:{classes:r.getTooltipClasses().join(" ")},position:{my:g.get("#qfb_form_tooltip_my").val(),at:g.get("#qfb_form_tooltip_at").val()}}),g.get("#qfb_form_tooltip_custom").val("").closest(f.subSettingWrap).qfbSlideHide(),g.get("#qfb-tooltip-example-wrap").qfbSlideShow())},getTooltipClasses:function(){var e=[],t=g.get("#qfb_form_tooltip_style").val();return"custom"===t?e.push(g.get("#qfb_form_tooltip_custom").val()):e.push(t),g.get("#qfb_form_tooltip_shadow").is(":checked")&&e.push("qtip-shadow"),g.get("#qfb_form_tooltip_rounded").is(":checked")&&e.push("qtip-rounded"),e},resizeSplitter:function(){var e=g.get("#qfb-panels").data("kendoSplitter"),t=b.height()-g.get("#qfb-nav").outerHeight(!0)-g.get("#qfb-control-panel").outerHeight(!0)-g.get("#wpadminbar").outerHeight(!0)-g.get("#qfb-add-elements").outerHeight(!0)-20;g.get("#qfb-page-messages").length&&(t-=g.get("#qfb-page-messages").outerHeight(!0)),e.wrapper.height(t),e.resize(!0)},addDbColumn:function(){var e=n(s.dbColumnHtml),t=r.uniqid("qfb-");e.find(".qfb-form-db-column-value").attr("id",t),e.find(".qfb-insert-variable").data("target-id",t),g.get("#qfb-form-db-columns-empty").hide(),g.get("#qfb-form-db-columns").show().append(e)},removeDbColumn:function(e){e.closest(".qfb-form-db-column").remove(),0===g.get("#qfb-form-db-columns").children().length&&(g.get("#qfb-form-db-columns").hide(),g.get("#qfb-form-db-columns-empty").show())},updateDbFields:function(){r.form.databaseColumns=[],g.get("#qfb-form-db-columns").find(".qfb-form-db-column").each(function(){var e=n(this),t=e.find(".qfb-form-db-column-name").val(),i=e.find(".qfb-form-db-column-value").val();t.length&&r.form.databaseColumns.push({name:t,value:i})})},buildMessageBox:function(e,t,i){var o=n('<div class="qfb-message-box qfb-message-box-'+(t=t||"info")+'">').append(n('<div class="qfb-message-box-inner">').text(e));return i&&o.addClass(i),o},getPreviewBackgroundColor:function(){var e=g.get("#qfb_form_preview_color").val();if(f.isNonEmptyString(e))return e;var t=g.get("#qfb_form_theme").val();return f.isNonEmptyString(t)&&(e=f.getProperty(s,"themes."+t+".previewColor"),f.isNonEmptyString(e))?e:"transparent"},refreshPreview:function(){var i=g.get("#qfb-preview-frame")[0].contentWindow;if(!t||"object"!=typeof i||"object"!=typeof i.quform||"object"!=typeof i.quform.preview||!i.quform.preview.loaded)return"number"==typeof u&&clearTimeout(u),void(u=setTimeout(function(){r.refreshPreview()},250));"number"==typeof u&&(clearTimeout(u),u=null);var o=i.jQuery;r.update();var a=function(e){o("#qfb-preview-form").html(""),o("#qfb-preview-custom-css").html(""),o("#qfb-preview-error").text(s.previewError+(e?" ("+e+")":"")).fadeIn()},l=JSON.stringify(r.form);o.ajax({url:s.ajaxUrl,type:"POST",dataType:"json",data:{form:l,page:n(".qfb-current-page").data("id"),action:"quform_preview_form"}}).done(function(e){var t;"success"==(e=f.sanitizeResponse(e)).type?(o(".k-animation-container, .quform-datepicker, .quform-timepicker, body > .select2-container").remove(),o("body").css("background-color",r.getPreviewBackgroundColor()),o("#qfb-preview-custom-css").html(e.css),o("#qfb-preview-form").html(e.form).find(".quform-form").quform(),o("#qfb-preview-error").text("").hide(),p?i.QuformRecaptchaLoaded():r.elements.recaptchas.length&&(t=r.elements.getElementById(r.elements.recaptchas[0]),o.getScript("https://www.google.com/recaptcha/api.js?onload=QuformRecaptchaLoaded&render=explicit&hl="+t.recaptchaLang),p=!0),r.savedFormJson!==l&&g.get("#qfb-preview-unsaved-indicator").fadeIn()):a(e.message)}).fail(function(){a(c.ajaxError)}).always(function(){o("#qfb-preview-loading").hide()})},loadPreviewLocale:function(e,t){g.get("#qfb-preview-frame")&&g.get("#qfb-preview-frame")[0]&&g.get("#qfb-preview-frame")[0].contentWindow&&g.get("#qfb-preview-frame")[0].contentWindow.jQuery&&g.get("#qfb-preview-frame")[0].contentWindow.jQuery.ajax({url:c.pluginUrl+"/js/cultures/kendo.culture."+e+".min.js",dataType:"script",cache:!0}).done(t)},activateTabs:function(e,t){g.get("#qfb-tabs").data("tabs").click(e),0===e?(g.get("#qfb-tabs-icon-settings").removeClass("qfb-current-tab"),g.get("#qfb-tabs-icon-form").addClass("qfb-current-tab")):1===e&&(g.get("#qfb-tabs-icon-form").removeClass("qfb-current-tab"),g.get("#qfb-tabs-icon-settings").addClass("qfb-current-tab")),"number"==typeof t&&g.get("#qfb-form-settings-tabs").data("tabs").click(t)},uniqid:function(e,t){var i;void 0===e&&(e="");var o=function(e,t){return t<(e=parseInt(e,10).toString(16)).length?e.slice(e.length-t):t>e.length?Array(t-e.length+1).join("0")+e:e};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,i=e,i+=o(parseInt((new Date).getTime()/1e3,10),8),i+=o(this.php_js.uniqidSeed,5),t&&(i+=(10*Math.random()).toFixed(8).toString()),i},setupTooltips:function(){n.isFunction(n.fn.qtip)&&(n(".qfb-element-tooltip").qtip({show:{solo:!0},style:{classes:"qtip-dark qtip-red-quform"},content:{text:function(){return n(this).find(".qfb-tooltip-content").html()}},position:{viewport:!0}}),r.setupContainerTooltips(g.get("#qfb-add-elements")),r.setupContainerTooltips(g.get("#qfb-builder-panel")),g.get("#qfb-tooltip-example").qtip({content:s.exampleTooltip,style:{classes:r.getTooltipClasses().join(" ")},position:{my:g.get("#qfb_form_tooltip_my").val(),at:g.get("#qfb_form_tooltip_at").val()}}))},setupContainerTooltips:function(e){e.find(".qfb-tooltip, .qfb-tooltip-icon").qtip({show:{solo:!0},style:{classes:"qtip-dark qtip-dark-quform"},content:{text:function(){return n(this).find(".qfb-tooltip-content").html()}},hide:{fixed:!0},position:{container:e,viewport:!0}})},setupColorpickers:function(){var e;n.isFunction(n.fn.spectrum)&&((e=n(".qfb-colorpicker")).each(function(){var e,t=tinycolor(n(this).val());t.isValid()&&(e=t.toString(),-1===n.inArray(e,l)&&l.push(e))}),e.each(function(){var t=n(this),e=tinycolor(t.val()),i=n('<div class="qfb-color-indicator">').insertAfter(t),o=function(e){i.css("background-color",e&&e.isValid()?e.toString():"transparent")},a=function(e){t.val(e&&e.isValid()?e.toString():""),o(e)};i.spectrum({color:e.isValid()?e:"",clickoutFiresChange:!0,allowEmpty:!0,showPalette:!0,palette:l,showSelectionPalette:!0,localStorageKey:"quform.builder",showAlpha:!0,showInput:!0,preferredFormat:"hex",move:a,hide:a}),t.on("keyup blur",function(){i.spectrum("set",t.val()),o(tinycolor(t.val()))}),o(e)}))},setupIconSelectors:function(){var e=n(".qfb-icon-selector-icon"),i=n(".qfb-icon-selector-search input");i.on("keyup blur",function(){var o=n(this).val().toLowerCase();o?e.each(function(){var e=n(this),t=e.data("quform-icon"),i=t.replace(/[\-_]/gi," ");-1<t.indexOf(o)||-1<i.indexOf(o)?e.show():e.hide()}):e.show()}),g.get("#qfb-wrap-outer").on("click",".qfb-select-icon-button",function(){var t=n(this).closest(".qfb-select-icon");g.get("#qfb-icon-selector-popup").show(),i.focus(),g.get("#qfb-wrap-outer").off("click.quform-select-icon").one("click.quform-select-icon",".qfb-icon-selector-icon",function(){var e=n(this).data("quform-icon");t.find(".qfb-select-icon-value").val(e),f.isNonEmptyString(e)&&r.isCoreIcon(e)?t.find(".qfb-select-icon-preview").html('<i class="'+r.convertIconClasses(e)+'"></i>').show():t.find(".qfb-select-icon-preview").html("").hide(),t.find(".qfb-select-icon-clear").show(),g.get("#qfb-icon-selector-popup").hide(),i.val("").trigger("blur")})}),g.get("#qfb-wrap-outer").on("click",".qfb-select-icon-clear",function(){var e=n(this).closest(".qfb-select-icon");e.find(".qfb-select-icon-value").val(""),e.find(".qfb-select-icon-preview").html("").hide(),e.find(".qfb-select-icon-clear").hide()}),g.get("#qfb-icon-selector-popup").find(".qfb-popup-buttons > .qfb-popup-close-button").click(function(){g.get("#qfb-icon-selector-popup").hide(),i.val("").trigger("blur")}),n(".qfb-select-icon").each(function(){var t=n(this),i=t.find(".qfb-select-icon-value");i.on("blur",function(){var e=i.val();f.isNonEmptyString(e)?(r.isCoreIcon(e)?t.find(".qfb-select-icon-preview").html('<i class="'+r.convertIconClasses(e)+'"></i>').show():t.find(".qfb-select-icon-preview").html("").hide(),t.find(".qfb-select-icon-clear").show()):(t.find(".qfb-select-icon-preview").html("").hide(),t.find(".qfb-select-icon-clear").hide())})})},isCoreIcon:function(e){return 0<n("#qfb-icon-selector-popup").find(".qfb-icon-selector-icon").filter(function(){return n(this).data("quform-icon")===e}).length},convertIconClasses:function(e){return e.replace(/^fa fa-/,"qfb-icon qfb-icon-")},loadIconOption:function(e,t){var i=e.closest(".qfb-select-icon");return f.isNonEmptyString(t)?(e.val(t),r.isCoreIcon(t)?i.find(".qfb-select-icon-preview").html('<i class="'+r.convertIconClasses(t)+'"></i>').show():i.find(".qfb-select-icon-preview").html("").hide(),i.find(".qfb-select-icon-clear").show()):(e.val(""),i.find(".qfb-select-icon-preview").html("").hide(),i.find(".qfb-select-icon-clear").hide()),e},isMultiPageForm:function(){return 1<r.form.elements.length},checkPageButtonSettings:function(){if(r.isMultiPageForm()){switch(g.get("#qfb_form_back_button_type").add(g.get("#qfb_form_next_button_type")).closest(f.settingWrap).show(),g.get("#qfb_form_back_button_type").val()){case"default":g.get("#qfb_form_back_button_text").add(g.get("#qfb_form_back_button_icon")).add(g.get("#qfb_form_back_button_icon_position")).closest(f.settingWrap).show();break;case"image":g.get("#qfb_form_back_button_image").closest(f.settingWrap).show();break;case"html":g.get("#qfb_form_back_button_html").closest(f.settingWrap).show()}switch(g.get("#qfb_form_next_button_type").val()){case"default":g.get("#qfb_form_next_button_text").add(g.get("#qfb_form_next_button_icon")).add(g.get("#qfb_form_next_button_icon_position")).closest(f.settingWrap).show();break;case"image":g.get("#qfb_form_next_button_image").closest(f.settingWrap).show();break;case"html":g.get("#qfb_form_next_button_html").closest(f.settingWrap).show()}}else g.get("#qfb_form_back_button_type").add(g.get("#qfb_form_back_button_text")).add(g.get("#qfb_form_back_button_image")).add(g.get("#qfb_form_back_button_html")).add(g.get("#qfb_form_back_button_icon")).add(g.get("#qfb_form_back_button_icon_position")).add(g.get("#qfb_form_next_button_type")).add(g.get("#qfb_form_next_button_text")).add(g.get("#qfb_form_next_button_image")).add(g.get("#qfb_form_next_button_html")).add(g.get("#qfb_form_next_button_icon")).add(g.get("#qfb_form_next_button_icon_position")).closest(f.settingWrap).hide()}},b.on("load",r.onWindowLoad),e.builder=r,e}(quform,jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n,quformCoreL10n);