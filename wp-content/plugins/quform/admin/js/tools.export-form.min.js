var quform=function(o,r,t,e){"use strict";var a=o.core,n=a.cache,i=r(document),f=!1,c={init:function(){n.get("#qfb-export-form-button").click(c["export"]),n.get("#qfb-export-form-data").click(function(){n.get("#qfb-export-form-data").focus().select()}),i.on("heartbeat-tick",function(o,r){r&&r.nonces_expired&&r.quformExportFormNonce&&t.exportFormNonce!==r.quformExportFormNonce&&(t.exportFormNonce=r.quformExportFormNonce)})},validate:function(){if(n.get(".qfb-tools-export-form").find(".qfb-validation-error").remove(),""!==n.get("#qfb-export-form").val())return!0;var o=n.get("#qfb-export-form").closest(a.settingWrap);return a.addValidationError(o,t.noFormSelected),a.scrollTo(o),!1},"export":function(){if(!f){if(n.get("#qfb-export-form-data").val(""),n.get("#qfb-export-form-data-wrap").hide(),!c.validate())return!1;f=!0,n.get("#qfb-export-form-loading").show().animate({maxWidth:"43px"}),r.ajax({type:"POST",url:e.ajaxUrl,data:{action:"quform_export_form",_ajax_nonce:t.exportFormNonce,id:n.get("#qfb-export-form").val()},dataType:"json"}).done(function(o){"success"==(o=a.sanitizeResponse(o)).type?c.onExportSuccess(o.data):"error"!=o.type&&"invalid"!=o.type||c.onExportFail(o)}).fail(function(){c.onExportFail({message:e.ajaxError})}).always(function(){f=!1,n.get("#qfb-export-form-loading").css({maxWidth:0}).hide()})}},onExportSuccess:function(o){n.get("#qfb-export-form-data").val(o),n.get("#qfb-export-form-data-wrap").slideDown()},onExportFail:function(o){var e;a.isNonEmptyString(o.message)&&a.showFixedMessage(t.errorExportingForm+"<br>"+o.message,"error"),o.errors&&r.each(o.errors,function(o,r){var t=n.get("#"+o).closest(a.settingWrap);e=e||t,a.addValidationError(t,r)}),e&&a.scrollTo(e)}};return r(c.init),o.tools=o.tools||{},o.tools.exportForm=c,o}(quform,jQuery,quformToolsExportFormL10n,quformCoreL10n);