!function(d){"use strict";var e;function h(e,t){if(this.$form=d(e),this.submitted=!1,this.nextUploadId=1,this.removedUploadUids=[],this.captchaRefreshQueue=[],this.uploadQueue=[],this.uploadElements=[],this.logicCache={},!this.$form.length)throw new Error("Form not found.");if(this.$form.data("quform"))throw new Error("Quform already attached.");this.$form.data("quform",this),this.options=d.extend({},h.defaults,t),d.isFunction(d.scrollTo)&&d.isFunction(d.fn.scrollTo)||(this.options.scrolling=!1),this.$wrapper=this.$form.closest(".quform"),this.$elements=d(".quform-elements",this.$form),this.$loading=d(".quform-loading",this.$form),this.currentPageId=this.options.currentPageId,this.submitStartTime=0,this.submitEndTime=0,this.successTimeout=null,this.errorShowFunction=this.$wrapper.hasClass("quform-errors-absolute")?"fadeIn":"quformShowSlide",this.init()}h.defaults={errorsIcon:"",scrolling:!0,scrollSpeed:800,scrollDelay:0,scrollOffset:-50,hasPages:!1,pages:[],logic:{logic:[],dependents:[],elementIds:[],dependentElementIds:[],animate:!0}},h.prototype.init=function(){var a=this;this.setupInsideLabels(),this.setupEnhancedSelects(),this.setupEnhancedUploaders(),this.setupDatepickers(),this.setupTimepickers(),this.applyAllLogic(!0),this.setupTooltips(),this.setupCaptchaImages(),this.$wrapper.hasClass("quform-prevent-fouc")&&this.$wrapper.removeClass("quform-prevent-fouc"),this.options.ajax&&(a.$form.on("submit",function(e){if(e.preventDefault(),window.grecaptcha){var t=a.$form.find(".quform-recaptcha");if(t.length){var o=t.data("config");if("v3"===o._version)return void window.grecaptcha.execute(t.data("recaptcha-id"),{action:"quform"}).then(function(e){t.find(".g-recaptcha-response").val(e),a.submit()});if("invisible"===o.size)return void window.grecaptcha.execute(t.data("recaptcha-id"))}}a.submit()}),d(".quform-back",a.$form).on("click",function(e){e.preventDefault(),a.submit("back")}),a.$form.addClass("quform-ajax-initialized")),d(".quform-field-select.quform-submit-on-choice",a.$form).change(function(){a.$form.submit()}),d(".quform-field-radio.quform-submit-on-choice",a.$form).click(function(){a.$form.submit()}),d(".quform-button-submit > button",a.$form).each(function(){var e,t,o=d(this),i=o.closest(".quform-button-submit"),r=i.data("animation"),n=1e3,s=a.options.scrollDelay;r&&(e="quform-button-animation-"+r,"two"===r&&(n=3200),o.click(function(){a.options.scrollDelay=n,i.removeClass(e),"number"==typeof t&&(clearTimeout(t),t=null),setTimeout(function(){i.addClass(e),t=setTimeout(function(){i.removeClass(e),a.options.scrollDelay=s},n)},4)}))})},h.prototype.setupInsideLabels=function(){var r=this;d.InFieldLabels?d(".quform-labels-inside > .quform-spacer > .quform-label",r.$form).each(function(){var e=d(this),t=e.parent().find(".quform-input"),o=t.find(".quform-field"),i={top:parseInt(o.css("padding-top"),10)+parseInt(o.css("border-top-width"),10)};r.options.isRtl?i.right=parseInt(o.css("padding-right"),10)+parseInt(o.css("border-right-width"),10):i.left=parseInt(o.css("padding-left"),10)+parseInt(o.css("border-left-width"),10),e.addClass("quform-label-inside").css(i).appendTo(t),new d.InFieldLabels(e[0],o[0])}):d(".quform-labels-inside > .quform-spacer > .quform-label",r.$form).show()},h.prototype.setupEnhancedSelects=function(){var r;"function"==typeof d.fn.select2&&(d(".quform-field-select-enhanced",(r=this).$form).each(function(){var e=d(this),t=e.data("options"),o={theme:"quform",language:{noResults:function(){return t.noResultsFound}}};t.search||(o.minimumResultsForSearch=Infinity),t.rtl&&(o.dir="rtl"),e.select2(o);var i="quform-"+r.options.id+"-select2";h.isNonEmptyString(r.options.theme)&&(i+=" quform-theme-"+r.options.theme),e.on("select2:opening",function(){e.data("select2").$dropdown.addClass(i)})}),d(".quform-field-multiselect-enhanced",r.$form).each(function(){var e=d(this),t=e.data("options"),o={theme:"quform",language:{noResults:function(){return t.noResultsFound}}};h.isNonEmptyString(t.placeholder)&&(o.placeholder=t.placeholder),t.rtl&&(o.dir="rtl"),e.select2(o);var i="quform-"+r.options.id+"-select2";h.isNonEmptyString(r.options.theme)&&(i+=" quform-theme-"+r.options.theme),e.on("select2:opening",function(){e.data("select2").$dropdown.addClass(i)})}))},h.prototype.setupEnhancedUploaders=function(){var s;d.isFunction(d.fn.fileupload)&&d.support.xhrFileUpload&&d.support.xhrFormDataFileUpload&&d(".quform-field-file-enhanced",(s=this).$form).each(function(){var e,t=d(this),o=t.closest(".quform-input-file"),i=t.data("config"),r=d('<div class="quform-upload-files quform-cf">').insertAfter(o).hide();i.queued=0,s.uploadElements.push(i),e="dropzone"===i.buttonType?s.createUploadButton("quform-upload-dropzone",i):s.createUploadButton("quform-upload-button",i),o.append(e.append(t));var n=t.closest(".quform-element").addClass("quform-enhanced-upload");t.fileupload({dataType:"json",paramName:i.name+"[]",dropZone:e,change:function(){n.find(".quform-error").empty().remove()},add:function(e,t){s.uploadAdd(t,i,r)},start:function(){d(".quform-upload-progress-wrap",s.$form).show()},progress:function(e,t){var o=Math.min(100,t.loaded/t.total*100);d(".quform-upload-progress-bar",s.$form).css("width",o+"%"),d(".quform-upload-filename",s.$form).text(t.files[0].name)}})})},h.prototype.createUploadButton=function(e,t){var o,i=d('<div class="'+e+'">');return i.append(d('<span class="'+e+'-text">').html(t.buttonText)),h.isNonEmptyString(t.buttonIcon)&&(o=d('<span class="'+e+'-icon">').append(d('<i class="'+t.buttonIcon+'">')),i.addClass(e+"-icon-"+t.buttonIconPosition),"right"===t.buttonIconPosition?i.append(o):i.prepend(o)),i},h.prototype.setupDatepickers=function(){var m;d.isFunction(d.fn.kendoDatePicker)&&d(".quform-field-date",(m=this).$form).each(function(){var o=d(this).addClass("quform-field-date-enhanced"),e=o.closest(".quform-input-date"),t=e.find("> .quform-field-icon"),i=o.data("options"),r=d("<input>",{type:"hidden",name:o.attr("name"),value:o.val()}).data("default",o.val()).addClass("quform-field-date-hidden").insertAfter(o);o.attr("name",""),i.placeholder?o.attr("placeholder",i.placeholder):o.removeAttr("placeholder");var n,s,a={start:i.start||"month",depth:i.depth||"month",culture:i.locale||"en-US"};i.format?a.format=i.format:a.format=kendo.getCulture(i.locale).calendars.standard.patterns.d,i.showFooter||(a.footer=!1),!i.min||null!==(n=kendo.parseDate(i.min,"yyyy-MM-dd"))&&(a.min=n),!i.max||null!==(s=kendo.parseDate(i.max,"yyyy-MM-dd"))&&(a.max=s),o.kendoDatePicker(a),o.removeClass("k-input").closest(".k-datepicker").removeClass().addClass("k-widget k-datepicker k-header");var u=o.data("kendoDatePicker"),c="quform-datepicker quform-"+m.options.id+"-datepicker quform-"+i.identifier+"-datepicker";h.isNonEmptyString(m.options.theme)&&(c+=" quform-theme-"+m.options.theme),u.dateView.popup.element.addClass(c),e.find(".k-select").hide(),i.autoOpen&&o.on("click focus",function(){u.open()}).blur(function(){u.close()}),t.click(function(){u.open()});var l=function(){var e,t=o.val();h.isNonEmptyString(t)?null===(e=kendo.parseDate(t,a.format,a.culture))?r.val("9999-99-99"):r.val(kendo.toString(e,"yyyy-MM-dd")):r.val("")};u.bind("change",l),o.on("blur.quformDatePicker keyup.quformDatePicker",l);var p,f=o.val();!h.isNonEmptyString(f)||null!==(p=kendo.parseDate(f,"yyyy-MM-dd"))&&(u.value(p),l())})},h.prototype.setupTimepickers=function(){var m;d.isFunction(d.fn.kendoTimePicker)&&d(".quform-field-time",(m=this).$form).each(function(){var o=d(this).addClass("quform-field-time-enhanced"),e=o.closest(".quform-input-time"),t=e.find("> .quform-field-icon"),i=o.data("options"),r=d("<input>",{type:"hidden",name:o.attr("name"),value:o.val()}).data("default",o.val()).addClass("quform-field-time-hidden").insertAfter(o);o.attr("name",""),i.placeholder?o.attr("placeholder",i.placeholder):o.removeAttr("placeholder");var n,s,a={interval:i.interval&&d.isNumeric(i.interval)?parseInt(i.interval,10):30,culture:i.locale||"en-US"};i.format?a.format=i.format:a.format=kendo.getCulture(i.locale).calendars.standard.patterns.t,!i.min||null!==(n=kendo.parseDate(i.min,"HH:mm"))&&(a.min=n),!i.max||null!==(s=kendo.parseDate(i.max,"HH:mm"))&&(a.max=s),o.kendoTimePicker(a),o.removeClass("k-input").closest(".k-timepicker").removeClass().addClass("k-widget k-timepicker k-header");var u=o.data("kendoTimePicker"),c="quform-timepicker quform-"+m.options.id+"-timepicker quform-"+i.identifier+"-timepicker";h.isNonEmptyString(m.options.theme)&&(c+=" quform-theme-"+m.options.theme),u.timeView.popup.element.addClass(c),e.find(".k-select").hide(),i.autoOpen&&o.on("click focus",function(){u.open()}).blur(function(){u.close()}),t.click(function(){u.open()});var l=function(){var e,t=o.val();h.isNonEmptyString(t)?null===(e=kendo.parseDate(t,a.format,a.culture))?r.val("99:99"):r.val(kendo.toString(e,"HH:mm")):r.val("")};u.bind("change",l),o.on("blur.quformTimePicker keyup.quformTimePicker",l);var p,f=o.val();!h.isNonEmptyString(f)||null!==(p=kendo.parseDate(f,"HH:mm"))&&(u.value(p),l())})},h.prototype.setupTooltips=function(){var e;d.isFunction(d.fn.qtip)&&this.options.tooltipsEnabled&&(e={style:{classes:this.options.tooltipClasses},position:{my:this.options.tooltipMy,at:this.options.tooltipAt,viewport:!0,adjust:{method:"shift shift"}}},d(".quform-tooltip-hover",this.$form).qtip(d.extend({},e,{content:{text:function(){return d(this).closest(".quform-input").find("> .quform-tooltip-content").html()}}})),d(".quform-tooltip-click",this.$form).qtip(d.extend({},e,{show:{event:"focus"},hide:{event:"unfocus"},content:{text:function(){return d(this).closest(".quform-input").find("> .quform-tooltip-content").html()}}})),d(".quform-tooltip-icon-hover",this.$form).qtip(d.extend({},e,{content:{text:function(){return d(this).find(".quform-tooltip-icon-content").html()}}})),d(".quform-tooltip-icon-click",this.$form).qtip(d.extend({},e,{show:{event:"click"},hide:{event:"unfocus"},content:{text:function(){return d(this).find(".quform-tooltip-icon-content").html()}}})),d(".quform-labels-inside > .quform-spacer > .quform-inner > .quform-input > .quform-label",this.$form).hover(function(){d(this).siblings(".quform-tooltip-hover").qtip("show")},function(){d(this).siblings(".quform-tooltip-hover").qtip("hide")}))},h.prototype.setupCaptchaImages=function(){var e=this;d(".quform-captcha-image img",this.$form).hover(function(){d(this).stop().fadeTo(400,"0.3")},function(){d(this).stop().fadeTo(400,"1.0")}).click(function(){e.captchaRefreshQueue.push(d(this)),e.processCaptchaRefreshQueue()})},h.prototype.processCaptchaRefreshQueue=function(t){var o,i=this;i.captchaRefreshQueue.length?(o=i.captchaRefreshQueue.shift(),d.ajax({type:"GET",url:quformL10n.ajaxUrl,dataType:"json",data:{action:"quform_regenerate_captcha",quform_form_id:i.options.id,quform_unique_id:i.options.uniqueId,quform_element_id:o.data("element-id")}}).done(function(e){"success"===(e=h.sanitizeResponse(e)).type&&o.attr("src",e.image).animate({opacity:1}),i.captchaRefreshQueue.length?i.processCaptchaRefreshQueue(t):"function"==typeof t&&t.call(i)})):"function"==typeof t&&t.call(i)},h.prototype.applyAllLogic=function(e){this.logicCache={},this.options.logic.elementIds.length&&(this.applyLogic(this.options.logic.elementIds,e),e&&this.applyDependentLogic(this.options.logic.dependentElementIds))},h.prototype.applyLogic=function(e,t){for(var o=0,i=e.length;o<i;o++)this.applyElementLogic(e[o],t)},h.prototype.applyElementLogic=function(e,t){if(this.options.logic&&this.options.logic.logic){var o=this.options.logic.logic[e];if(o&&o.rules&&o.rules.length){for(var i=0,r=o.action,n=this.options.id+"_"+e,s=0;s<o.rules.length;s++)this.isLogicRuleMatch(o.rules[s])&&i++;"any"===o.match&&0<i||"all"===o.match&&i===o.rules.length||(r=!r);var a=this,u=d(".quform-element-"+n,a.$form),c=r?"show":"hide";!t&&this.options.logic.animate?u.animate({opacity:c,height:c,marginTop:c,marginBottom:c,paddingTop:c,paddingBottom:c},{duration:400,complete:function(){a.updateFancybox()}}):(u[c](),t||a.updateFancybox())}}},h.prototype.applyDependentLogic=function(e){if(this.options.logic&&this.options.logic.dependents)for(var r=this,t=0,o=e.length;t<o;t++){var i,n=this.options.logic.dependents[e[t]],s=this.options.id+"_"+e[t],a=d(".quform-field-"+s,this.$form);a.length&&(a.is("select")||a.is('input[type="checkbox"]')||a.is('input[type="radio"]')||a.is('input[type="hidden"]')?i="change.quform":a.is('textarea, input[type="text"], input[type="email"], input[type="password"]')&&(i="keyup.quform blur.quform",(a.hasClass("quform-field-date-enhanced")||a.hasClass("quform-field-time-enhanced"))&&(i="change.quform")),i&&function(e,t,o,i){e.on(t,function(){r.logicCache[i]=[],setTimeout(function(){r.applyLogic(o)},0)})}(a,i,n,s))}},h.prototype.isLogicRuleMatch=function(e){var t=this.options.id+"_"+e.elementId;if(d.isArray(this.logicCache[t])){if(this.logicCache[t].length)for(var o=0,i=this.logicCache[t].length;o<i;o++)if(this.logicCache[t][o].operator===e.operator&&this.logicCache[t][o].value===e.value)return this.logicCache[t][o].result}else this.logicCache[t]=[];var r,n,s=d(".quform-field-"+t,this.$form),a=!1;return s.length&&(s.is('select:not([multiple]), input[type="hidden"], textarea, input[type="text"], input[type="email"], input[type="password"]')?(n=s.val(),s.hasClass("quform-field-date-enhanced")?(r="date",n=s.closest(".quform-input").find(".quform-field-date-hidden").val()):s.hasClass("quform-field-time-enhanced")&&(r="time",n=s.closest(".quform-input").find(".quform-field-time-hidden").val()),a=this.isLogicValueMatch(n,e,r)):s.is('input[type="checkbox"]')?(n=[],s.filter(":checked").each(function(){n.push(d(this).val())}),a=this.isLogicArrayValueMatch(n,e)):s.is('input[type="radio"]')?(n=s.filter(":checked").val()||"",a=this.isLogicValueMatch(n,e)):s.is("select[multiple]")&&(n=s.val()||[],a=this.isLogicArrayValueMatch(n,e))),this.logicCache[t].push({operator:e.operator,value:e.value,result:a}),a},h.prototype.isLogicValueMatch=function(e,t,o){switch("string"!=typeof e&&(e=""),t.operator){case"eq":return e===t.value;case"neq":return e!==t.value;case"empty":return""===e;case"not_empty":return""!==e;case"gt":return"date"===o?1===h.compareDates(e,t.value):"time"===o?1===h.compareTimes(e,t.value):d.isNumeric(e)&&d.isNumeric(t.value)&&parseFloat(e)>parseFloat(t.value);case"lt":return"date"===o?-1===h.compareDates(e,t.value):"time"===o?-1===h.compareTimes(e,t.value):d.isNumeric(e)&&d.isNumeric(t.value)&&parseFloat(e)<parseFloat(t.value);case"contains":return-1!==e.indexOf(t.value);case"starts_with":return 0===e.indexOf(t.value);case"ends_with":return-1!==e.indexOf(t.value,t.value.length)}return!1},h.prototype.isLogicArrayValueMatch=function(e,t){var o=!1;if(e.length){if("not_empty"===t.operator)o=!0;else for(var i=0;i<e.length;i++)if(this.isLogicValueMatch(e[i],t)){o=!0;break}}else"neq"!==t.operator&&"empty"!==t.operator||(o=!0);return o},h.prototype.uploadAdd=function(e,i,r){var t,o,n=this,s=e.files[0];i.max&&i.queued===i.max?this.addElementError(i.identifier,i.tooMany.replace("%max%",i.max))[this.errorShowFunction]():!i.allowedExtensions||h.isValidFile(s,i.allowedExtensions)?i.size&&s.size>i.size?this.addElementError(i.identifier,i.tooBigWithFilename.replace("%filename%",s.name))[this.errorShowFunction]():(t=this.nextUploadId++,e.formData={quform_ajax_uploading:1,quform_form_id:this.options.id,quform_form_uid:this.options.uniqueId,quform_element_id:i.id,quform_element_identifier:i.identifier,quform_upload_id:t},this.uploadQueue.push(e),i.queued++,o=e.context=d('<div class="quform-upload-file">').data("quform-upload-id",t),d('<span class="quform-upload-file-name">').text(s.name).appendTo(o),d('<span class="quform-upload-file-remove">').attr("title",quformL10n.removeFile).click(function(){for(var e=d(this).closest(".quform-upload-file"),t=e.data("quform-upload-id"),o=n.uploadQueue.length;o--;)n.uploadQueue[o].formData.quform_upload_id===t&&n.uploadQueue.splice(o,1);e.data("quform-upload-uid")&&n.removedUploadUids.push(e.data("quform-upload-uid")),e.remove(),0===r.children().length&&r.hide(),i.queued--}).appendTo(o),r.append(o).show()):this.addElementError(i.identifier,i.notAllowedTypeWithFilename.replace("%filename%",s.name))[this.errorShowFunction]()},h.prototype.processUploadQueue=function(){var t=this,o=t.uploadQueue.shift();o.submit().done(function(e){"success"===(e=h.sanitizeResponse(e)).type?(o.context.addClass("quform-uploaded").prepend(d('<span class="quform-upload-tick"><i class="qicon-check">')).data("quform-upload-uid",e.uid),t.uploadQueue.length?t.processUploadQueue():(d(".quform-upload-progress-wrap",t.$form).hide(),t.submitted=!1,t.submit())):t.uploadError(o,e.message)}).fail(function(){t.uploadError(o,quformL10n.ajaxError)})},h.prototype.uploadError=function(e,t){d(".quform-upload-progress-wrap",this.$form).hide(),this.uploadQueue.unshift(e),this.allowResubmission(),this.addElementError(e.formData.quform_element_identifier,t)[this.errorShowFunction](),this.scrollTo(d(".quform-element-"+e.formData.quform_element_identifier,this.$form))},h.prototype.submit=function(e){var t,o=this;o.submitted||(o.submitStartTime=h.timeNow(),o.submitted=!0,e="back"===e?"back":"submit",o.$form.trigger("quform:submit",[o,e]),o.$loading.fadeIn().addClass("quform-loading-triggered"),"submit"===e&&this.uploadQueue.length?o.processUploadQueue():(t={quform_ajax:1,quform_submit:e,quform_removed_upload_uids:o.removedUploadUids.join(",")},o.$form.ajaxSubmit({type:"POST",data:t,dataType:"json",iframe:!0,iframeSrc:"about:blank",url:"",success:function(e){switch(o.submitEndTime=h.timeNow(),(e=h.sanitizeResponse(e)).type){case"success":o.responseSuccess(e.confirmation);break;case"error":o.responseError(e);break;case"page":o.allowResubmission(),o.goToPage(e.page);break;case"invalid":o.responseInvalid(e)}},error:function(){o.submitEndTime=h.timeNow(),o.responseInvalid({message:quformL10n.ajaxError})}})))},h.prototype.responseSuccess=function(e){var t=this;t.$form.trigger("quform:successStart",[t,e]),t.$loading.addClass("quform-loading-success");var o=function(){switch(e.type){case"message":t.reset(e.resetForm),t.showSuccessMessage(e);break;case"message-redirect-page":case"message-redirect-url":t.showSuccessMessage(e),setTimeout(function(){window.location=e.redirectUrl},1e3*parseFloat(e.redirectDelay));break;case"redirect-page":case"redirect-url":window.location=e.redirectUrl;break;case"reload":window.location.reload()}};e.hideForm?t.$elements.quformHideSlide(function(){o()}):o()},h.prototype.showSuccessMessage=function(e){var t=this,o=d('<div class="quform-success-message-animate">').hide(),i=d('<div class="quform-success-message quform-success-message-'+t.options.id+'">').appendTo(o);h.isNonEmptyString(e.messageIcon)&&i.addClass("quform-success-message-has-icon").append('<div class="quform-success-message-icon"><i class="'+e.messageIcon+'"></i></div>'),i.append(d('<div class="quform-success-message-content">').html(e.message)),o["below"===e.messagePosition?"insertAfter":"insertBefore"](t.$elements).quformShowSlide(),setTimeout(function(){t.scrollTo(o)},t.getScrollDelay());var r=1e3*parseFloat(e.messageTimeout);0<r&&(t.successTimeout=setTimeout(function(){o.quformHideSlide(function(){t.updateFancybox()})},r))},h.prototype.responseError=function(e){var i=this,r=null,t=!1;i.$form.trigger("quform:errorStart",[i,e]),i.allowResubmission(),"object"==typeof e.error&&null!==e.error&&e.error.enabled&&"string"==typeof e.error.content&&e.error.content.length&&(i.errorMessage(e.error.content,e.error.title),t=!0),d.each(e.errors,function(e,t){var o=d(".quform-element-"+e,i.$form);o.length&&(i.addElementError(e,t),r=r||o)}),i.options.hasPages&&e.page!==i.currentPageId&&i.goToPage(e.page),d(".quform-error",i.$form)[this.errorShowFunction](),!t&&r&&setTimeout(function(){i.scrollTo(r)},i.getScrollDelay()),i.updateFancybox(),i.$form.trigger("quform:errorEnd",[i,e])},h.prototype.responseInvalid=function(e){this.allowResubmission(),this.errorMessage(e.message,quformL10n.errorMessageTitle)},h.prototype.goToPage=function(e){var t,o,i,r=d(".quform-page-"+e,this.$form);r.length&&1<this.options.pages.length&&(-1<(t=d.inArray(e,this.options.pages))&&(this.$form.trigger("quform:goToPageStart",[this,r,e,t]),this.currentPageId=e,d('input[name="quform_current_page_id"]',this.$form).val(e),d(".quform-current-page",this.$form).hide().removeClass("quform-current-page"),r.show().addClass("quform-current-page"),(o=this.$form.closest(".quform")).removeClass("quform-is-first-page quform-is-last-page"),0===t?o.addClass("quform-is-first-page"):t===this.options.pages.length-1&&o.addClass("quform-is-last-page"),this.scrollTo(this.$form),i=Math.round((t+1)/this.options.pages.length*100),"numbers"===this.options.pageProgressType||"percentage"===this.options.pageProgressType?(d(".quform-page-progress-bar",this.$form).width(i+"%"),"numbers"===this.options.pageProgressType?d(".quform-page-progress-text > .quform-page-progress-number",this.$form).text(t+1):d(".quform-page-progress-text > .quform-page-progress-percentage",this.$form).text(i)):"tabs"===this.options.pageProgressType&&(d(".quform-page-progress-tab.quform-current-tab",this.$form).removeClass("quform-current-tab"),d(".quform-page-progress-tab",this.$form).filter(function(){return d(this).data("id")===e}).addClass("quform-current-tab")),this.$form.trigger("quform:goToPageEnd",[this,r,e,t])))},h.prototype.allowResubmission=function(){var e=this;e.$loading.removeClass("quform-loading-triggered").fadeOut(function(){e.$loading.removeClass("quform-loading-success")}),d(".quform-error-message, .quform-error, .quform-success-message-animate",e.$form).remove(),d(".quform-has-error",e.$form).removeClass("quform-has-error"),"number"==typeof e.successTimeout&&(clearTimeout(e.successTimeout),e.successTimeout=null),window.grecaptcha&&d(".quform-recaptcha",e.$form).each(function(){if("v3"!==d(this).data("config")._version)try{window.grecaptcha.reset(d(this).data("recaptcha-id"))}catch(e){}}),d(".quform-upload-progress-bar",e.$form).width(0),d(".quform-upload-filename",e.$form).text(""),e.submitted=!1},h.prototype.reset=function(e){var t=this;switch(t.$form.trigger("quform:resetStart",[t,e]),t.allowResubmission(),e){default:case"":t.$form.resetForm(),d("input.quform-field-date-enhanced",t.$form).each(function(){var e=d(this),t=e.closest(".quform-input").find(".quform-field-date-hidden").data("default"),o=e.data("kendoDatePicker"),t=h.isNonEmptyString(t)?kendo.parseDate(t,"yyyy-MM-dd"):null;o.value(t),o.trigger("change"),o.dateView.calendar&&o.dateView.calendar.navigate(null===t?new Date:t)}),d("input.quform-field-time-enhanced",t.$form).each(function(){var e=d(this),t=e.closest(".quform-input").find(".quform-field-time-hidden").data("default"),o=e.data("kendoTimePicker"),t=h.isNonEmptyString(t)?kendo.parseDate(t,"HH:mm"):null;o.value(t),o.trigger("change")}),d(".quform-field-hidden",t.$form).each(function(){var e=d(this);e.val(e.data("default")).change()});break;case"clear":t.$form.clearForm(),d("select",t.$form).each(function(){d(this).prop("selectedIndex",0)}),d("input.quform-field-date-enhanced",t.$form).each(function(){var e=d(this).data("kendoDatePicker");e.value(null),e.trigger("change"),e.dateView.calendar&&e.dateView.calendar.navigate(new Date)}),d("input.quform-field-time-enhanced",t.$form).each(function(){var e=d(this).data("kendoTimePicker");e.value(null),e.trigger("change")}),d(".quform-field-hidden",t.$form).val("").change();break;case"keep":}d(".quform-captcha-image img",t.$form).each(function(){t.captchaRefreshQueue.push(d(this))}),t.processCaptchaRefreshQueue(),d('input[type="text"], input[type="email"], textarea',t.$form).blur(),t.applyAllLogic(),d(".quform-field-select-enhanced, .quform-field-multiselect-enhanced",t.$form).trigger("change"),t.removedUploadUids=[],d(".quform-upload-files",t.$form).empty().hide();for(var o=0,i=t.uploadElements.length;o<i;o++)t.uploadElements[o].queued=0;d('input[type="file"]',t.$form).each(function(){var e=d(this);e.replaceWith(e.val("").clone(!0))}),d(".qtip").hide(),t.options.hasPages&&t.goToPage(t.options.pages[0]),t.$form.trigger("quform:resetEnd",[t,e])},h.prototype.errorMessage=function(e,t){var o=this,i=d('<div class="quform-error-message">').hide(),r=d('<div class="quform-error-message-inner">');"string"==typeof t&&t.length&&r.append(d('<div class="quform-error-message-title">').html(t)),r.append(d('<div class="quform-error-message-content">').html(e)).appendTo(i),o.$elements.prepend(i),i.quformShowSlide(),setTimeout(function(){o.scrollTo(i)},o.getScrollDelay())},h.prototype.addElementError=function(e,t){var o,i=d('<div class="quform-error quform-cf">'),r=d('<div class="quform-error-inner">').appendTo(i);return h.isNonEmptyString(this.options.errorsIcon)&&r.append(d('<span class="quform-error-icon">').append('<i class="'+this.options.errorsIcon+'"></i>')),r.append(d('<span class="quform-error-text">').html(t)),this.$wrapper.hasClass("quform-errors-absolute")&&((o=d('<span class="quform-error-close">').append('<i class="qicon-close">')).click(function(){d(this).closest(".quform-error").fadeOut()}),r.append(o)),d(".quform-element-"+e,this.$form).addClass("quform-has-error"),d(".quform-input-"+e,this.$form).after(i),i},h.prototype.scrollTo=function(e){var t;this.options.scrolling&&e&&e.length&&((t=this.getScrollElement())?t.scrollTo(e,this.options.scrollSpeed,{axis:"y",offset:this.options.scrollOffset}):h.isScrolledIntoView(e,this.options.scrollOffset)||d.scrollTo(e,this.options.scrollSpeed,{axis:"y",offset:this.options.scrollOffset}))},h.prototype.getScrollDelay=function(){return 0<this.options.scrollDelay?h.clamp(this.options.scrollDelay-(this.submitEndTime-this.submitStartTime),0,3200):0},h.prototype.getScrollElement=function(){var e=null;return this.$form.closest(".fancybox-slide").length?e=this.$form.closest(".quform").hasClass("quform-max-height")?this.$form.closest(".quform"):this.$form.closest(".fancybox-slide"):this.$form.closest(".fancybox-inner").length?e=this.$form.closest(".fancybox-inner"):this.$form.closest("#fancybox-content").length?this.$form.closest(".quform").hasClass("quform-custom-dimensions")&&(e=this.$form.closest("#fancybox-content > div")):this.$form.closest(".mfp-wrap").length&&(this.$form.closest(".quform").hasClass("quform-max-height")?e=this.$form.closest(".quform"):d.magnificPopup&&d.magnificPopup.instance&&d.magnificPopup.instance.fixedContentPos&&(e=this.$form.closest(".mfp-wrap"))),e},h.prototype.updateFancybox=function(){var e,t;this.options.updateFancybox&&d.isFunction(d.fn.fancybox)&&d.fancybox&&("2"===(e=h.getFancyboxVersion())?(t=d(".fancybox-wrap")).length&&t.is(":visible")&&d.fancybox.update():"1"===e&&(t=d("#fancybox-wrap")).length&&t.is(":visible")&&d.fancybox.resize())},h.getFancyboxVersion=function(){return d.isFunction(d.fn.fancybox)&&d.fancybox?h.isNonEmptyString(d.fancybox.version)?d.fancybox.version.charAt(0):"1":null},h.isScrolledIntoView=function(e,t){var o=d(window).scrollTop(),i=o+d(window).height(),r=e.offset().top,n=r+e.height();return t&&(r+=t),o<=n&&r<=i&&n<=i&&o<=r},h.formatFileSize=function(e){return 1073741824<=e?e=Math.round(e/1073741824*10)/10+" GB":1048576<=e?e=Math.round(e/1048576*10)/10+" MB":1024<=e?e=Math.round(e/1024*10)/10+" KB":e+=" bytes",e},(h.preLoadImages=function(e,t){for(var o=0;o<e.length;o++){var i=new Image;i.src=t?t+e[o]:e[o],h.preLoadImages.cache.push(i)}}).cache=[],h.sanitizeResponse=function(e){return null!==e&&"object"==typeof e&&"string"==typeof e.type&&0!==e.type.length||(e={type:"invalid",message:"The response from the server was invalid or malformed"}),e},h.sanitiseResponse=function(e){return h.sanitizeResponse(e)},h.compareDates=function(e,t){if(!h.isNonEmptyString(e)||!h.isNonEmptyString(t))return!1;if(e=kendo.parseDate(e,"yyyy-MM-dd"),t=kendo.parseDate(t,"yyyy-MM-dd"),null===e||null===t)return!1;var o=e.getTime(),i=t.getTime();return o<i?-1:i<o?1:0},h.compareTimes=function(e,t){if(!h.isNonEmptyString(e)||!h.isNonEmptyString(t))return!1;if(e=kendo.parseDate(e,"HH:mm"),t=kendo.parseDate(t,"HH:mm"),null===e||null===t)return!1;var o=e.getTime(),i=t.getTime();return o<i?-1:i<o?1:0},h.isValidFile=function(e,t){var o,i;if(!t.length)return!0;for(o=0,i=t.length;o<i;o++)if(-1!==e.name.toLowerCase().indexOf(t[o].toLowerCase(),e.name.length-t[o].length))return!0;return!1},h.isNonEmptyString=function(e){return"string"==typeof e&&e.length},h.clamp=function(e,t,o){return Math.min(Math.max(e,t),o)},h.timeNow=function(){return(new Date).getTime()},h.setupPopupLinks=function(){(d.isFunction(d.fn.fancybox)||d.isFunction(d.fn.magnificPopup))&&d(".quform-popup-link").each(function(){var e,t,o,i,r,n=d(this);n.data("quform-processed")||(e="#quform-"+n.data("unique-id"),t=d(e),o=n.data("options")||{},d.isFunction(d.fn.fancybox)&&d.fancybox?("3"===(r=h.getFancyboxVersion())?(i={type:"inline",baseClass:"quform-fancybox-3-popup",src:e,touch:!1,beforeClose:function(){d(".qtip").hide()}},o.width&&(t.css({width:d.isNumeric(o.width)?o.width+"px":o.width}),delete o.width),o.height&&(t.css({height:d.isNumeric(o.height)?o.height+"px":o.height}).addClass("quform-max-height"),delete o.height)):"2"===r?(i={type:"inline",wrapCSS:"quform-fancybox-2-popup",href:e,beforeClose:function(){d(".qtip").hide()}},(o.width||o.height)&&("undefined"==typeof o.autoSize&&(o.autoSize=!1),o.width||"undefined"!=typeof o.autoWidth||(o.autoWidth=!0),o.height||"undefined"!=typeof o.autoHeight||(o.autoHeight=!0))):"1"===r&&(i={inline:!0,href:e,onStart:function(){d("#fancybox-outer").css("opacity",0),d("#fancybox-wrap").addClass("quform-fancybox-1-popup")},onComplete:function(){window.grecaptcha&&d("#fancybox-content .quform-recaptcha").each(function(){try{window.grecaptcha.reset(d(this).data("recaptcha-id"))}catch(e){}}),d("#fancybox-wrap, #fancybox-content").css({width:"auto"}),d.fancybox.center(0),setTimeout(function(){d("#fancybox-outer").animate({opacity:1},200),d("#fancybox-overlay").css({height:d(document).height()})},1)},onClosed:function(){d("#fancybox-wrap").removeClass("quform-fancybox-1-popup")}},(o.width||o.height)&&"undefined"==typeof o.autoDimensions&&(o.autoDimensions=!1),(o.width||o.height)&&t.addClass("quform-custom-dimensions")),r&&n.fancybox(d.extend({},i,o))):d.isFunction(d.fn.magnificPopup)&&(i={items:{src:t,type:"inline"},mainClass:"quform-magnific-popup"},o.width&&(t.css({maxWidth:d.isNumeric(o.width)?o.width+"px":o.width}),delete o.width),o.height&&(t.css({maxHeight:d.isNumeric(o.height)?o.height+"px":o.height}).addClass("quform-max-height"),delete o.height),n.magnificPopup(d.extend({},i,o)),d.magnificPopup.instance._onFocusIn=function(e){if(d(e.target).hasClass("select2-search__field"))return!0;d.magnificPopup.proto._onFocusIn.call(this,e)}),n.data("quform-processed",!0))})},h.supportPageCaching=function(){var e;quformL10n.supportPageCaching&&(e=[],d(".quform-form").each(function(){e.push(d(this).find('input[name="quform_form_uid"]').val())}),e.length&&d.ajax({type:"GET",url:quformL10n.ajaxUrl,dataType:"json",data:{action:"quform_support_page_caching",forms:e}}).done(function(r){"success"===(r=h.sanitizeResponse(r)).type&&(d(".quform-form").each(function(){var e=d(this),t=e.data("quform"),o=e.attr("action"),i=e.find('input[name="quform_form_uid"]').val();r.forms&&h.isNonEmptyString(i)&&r.forms[i]&&h.isNonEmptyString(r.forms[i])&&(e.find('input[name="quform_form_uid"]').val(r.forms[i]),h.isNonEmptyString(o)&&(o=o.replace(/#quform-(.)+$/,"#quform-"+r.forms[i]),e.attr("action",o)),t&&(t.options.uniqueId=r.forms[i])),r.token&&h.isNonEmptyString(r.token)&&e.find('input[name="quform_csrf_token"]').val(r.token),t&&e.find(".quform-captcha-image img").length&&h.captchaRefreshFormQueue.push(t)}),h.captchaRefreshFormQueue.length&&h.processCaptchaRefreshFormQueue())}))},h.captchaRefreshFormQueue=[],h.processCaptchaRefreshFormQueue=function(){var e;h.captchaRefreshFormQueue.length&&(e=h.captchaRefreshFormQueue.shift(),d(".quform-captcha-image img",e.$form).each(function(){e.captchaRefreshQueue.push(d(this))}),e.processCaptchaRefreshQueue(function(){h.captchaRefreshFormQueue.length&&h.processCaptchaRefreshFormQueue()}))},e=h,window.Quform=e,d.fn.extend({quform:function(){return this.each(function(){return new e(this,d(this).data("options")||{})})},quformHideSlide:function(e,t){var o={height:"hide",opacity:"hide",marginTop:"hide",marginBottom:"hide",paddingTop:"hide",paddingBottom:"hide"},i={duration:400};return e&&(i.complete=e),t&&(o=d.extend(o,t)),this.animate(o,i)},quformShowSlide:function(e,t){var o={height:"show",opacity:"show",marginTop:"show",marginBottom:"show",paddingTop:"show",paddingBottom:"show"},i={duration:400};return e&&(i.complete=e),t&&(o=d.extend(o,t)),this.animate(o,i)}}),d(function(){d(".quform-form").quform(),e.supportPageCaching(),e.setupPopupLinks()})}(jQuery);